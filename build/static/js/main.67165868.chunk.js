(this["webpackJsonpfair-drive"]=this["webpackJsonpfair-drive"]||[]).push([[0],{1005:function(e,t){},1034:function(e,t){},1050:function(e,t){},1112:function(e,t){},1180:function(e,t){},119:function(e,t,a){"use strict";(function(n){var r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(58),i=a(94);if("undefined"===typeof window){a(209).TextEncoder;var c=a(209).TextDecoder}else window.TextEncoder,c=window.TextDecoder;var u=new(function(){function e(){r(this,e)}return s(e,[{key:"generateRandomIV",value:function(){return(0,o.randomBytes)(16)}},{key:"privateToPublicKey",value:function(e){var t=new i.ec("secp256k1"),a=n.from(e.slice(2),"hex");return"0x"+t.keyFromPrivate(a).getPublic(!1,"hex").slice(2)}},{key:"calculateSharedSecret",value:function(e,t){var a=e.substring(2,66),n=t.substring(2,130);if(64!==a.length)throw new Error("private key must be a 32 byte hex string "+e);if(128!==n.length)throw new Error("public key must be a 64 byte hex string "+t);var r=(0,o.createECDH)("secp256k1");return r.setPrivateKey(a,"hex"),r.computeSecret("04"+n,"hex").toString("hex")}},{key:"encryptString",value:function(e,t,a){return this.encryptBuffer(n.from(e,"utf8"),t,a).then((function(e){return e.toString("hex")}))}},{key:"decryptString",value:function(e,t,a){var r=this.decryptBuffer(n.from(e,"hex"),t,a);return(new c).decode(r)}},{key:"encryptBuffer",value:function(e,t,a){return new Promise((function(r,s){var i=(0,o.createCipheriv)("aes-256-ctr",n.from(t.substring(2),"hex"),a);r(n.concat([i.update(e),i.final()]))}))}},{key:"decryptBuffer",value:function(e,t,a){var r=(0,o.createDecipheriv)("aes-256-ctr",n.from(t.substring(2),"hex"),a);return n.concat([r.update(e),r.final()])}}]),e}());t.default=u,e.exports=t.default}).call(this,a(1).Buffer)},1214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(133),o=a.n(s),i=(a(491),a(28)),c=a(17),u=a.n(c),f=a(169),d=a(27),l=a(172),b=a(242),p=a.n(b),y=a(25),h=a.n(y),v=a(8),m=a.n(v);var g=function(e){var t=e.createStage,a=e.restoreStage;return e.exitStage,r.a.createElement("div",{className:m.a.container},r.a.createElement("div",{className:m.a.title},"Welcome to Fairdrive"),r.a.createElement("div",{className:m.a.subtitle},"In the next steps you will be creating a Fairdrive Wallet."),r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:t},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"create account"))),r.a.createElement("div",{tabIndex:"2",className:h.a.button},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext,onClick:a},"restore account"))))},w=a(101),x=a.n(w);function _(){return(_=Object(f.a)(u.a.mark((function e(){var t,a,n,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.ethers=x.a,t=x.a.utils.randomBytes(16),a=x.a.wordlists.en,e.next=5,x.a.utils.entropyToMnemonic(t,a);case 5:return n=e.sent,n,e.next=9,x.a.utils.HDNode.fromMnemonic(n);case 9:return r=e.sent,s=n.split(" "),window.wallet=r,e.abrupt("return",{array:s,wallet:r});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){var t=e.nextStage,a=e.exitStage,s=e.setMnemonic,o=e.mnemonic,i=e.setWallet;return e.setCollection,Object(n.useEffect)((function(){(function(){return _.apply(this,arguments)})().then((function(e){var t=e.array,a=e.wallet;i(a),s(t)}))}),[s,i]),r.a.createElement("div",{className:m.a.container},r.a.createElement("div",{className:m.a.closeButton,onClick:a},r.a.createElement("div",{className:h.a.closeicon})),r.a.createElement("div",{className:m.a.title},"Write down this seed phrase"),r.a.createElement("div",{className:m.a.subtitle},"With it, you will always be able to restore your account."),r.a.createElement("div",{className:m.a.mnemonic},o.map((function(e,t){return r.a.createElement("div",{key:t},t+1+". "+e)}))),o.length>=1?r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:t},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"continue"))):"")},S=a(1226);var E=function(e){var t=e.nextStage,a=e.prevStage,s=e.exitStage,o=e.mnemonic;console.log(o[2],o[4],o[7],o[10]);var i=Object(n.useState)(!1),c=Object(d.a)(i,2),u=c[0],f=c[1],l=Object(n.useState)(!1),b=Object(d.a)(l,2),p=b[0],y=b[1],v=Object(n.useState)(!1),g=Object(d.a)(v,2),w=g[0],x=g[1],_=Object(n.useState)(!1),k=Object(d.a)(_,2),E=k[0],M=k[1];return r.a.createElement("div",{className:m.a.formcontainer},r.a.createElement("div",{className:m.a.closeButton,onClick:s},r.a.createElement("div",{className:h.a.closeicon})),r.a.createElement("div",{className:m.a.title},"Check your backup"),r.a.createElement("div",{className:m.a.subtitle},"Didn't write it down? You can start over with a ",r.a.createElement("span",{className:m.a.link,onClick:a}," new seed phrase"),"."),r.a.createElement("div",{className:m.a.mnemoniccheck},r.a.createElement("div",{className:m.a.mnemonicinputbox},r.a.createElement("input",{className:m.a.mnemonicinput,placeholder:"word 3",autoCorrect:"off",autoCapitalize:"none","data-lpignore":"true",onChange:function(e){return function(e,t){t.target.value===o[e]?f(!0):f(!1)}(2,e)}}),u?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#222222"}})),r.a.createElement("div",{className:m.a.mnemonicinputbox},r.a.createElement("input",{className:m.a.mnemonicinput,placeholder:"word 5",autoCorrect:"off",autoCapitalize:"none","data-lpignore":"true",onChange:function(e){return function(e,t){t.target.value===o[e]?y(!0):y(!1)}(4,e)}}),p?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#222222"}})),r.a.createElement("div",{className:m.a.mnemonicinputbox},r.a.createElement("input",{className:m.a.mnemonicinput,placeholder:"word 8",autoCorrect:"off",autoCapitalize:"none","data-lpignore":"true",onChange:function(e){return function(e,t){t.target.value===o[e]?x(!0):x(!1)}(7,e)}}),w?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#222222"}})),r.a.createElement("div",{className:m.a.mnemonicinputbox},r.a.createElement("input",{className:m.a.mnemonicinput,placeholder:"word 11",autoCorrect:"off",autoCapitalize:"none","data-lpignore":"true",onChange:function(e){return function(e,t){t.target.value===o[e]?M(!0):M(!1)}(10,e)}}),E?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#222222"}})),u&&p&&w&&E?r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:t},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"continue"))):""))},M=function(e){var t=e.nextStage,a=e.exitStage,n=e.avatarStage,s=e.username,o=e.setUsername,i=e.avatar;return r.a.createElement("div",{className:m.a.formcontainer},r.a.createElement("div",{className:m.a.closeButton,onClick:a},r.a.createElement("div",{className:h.a.closeicon})),r.a.createElement("div",{className:m.a.title},"Choose an avatar and a username"),r.a.createElement("div",{className:m.a.placeholder},r.a.createElement("img",{src:i,className:m.a.avatarImage,alt:"avatar"})),r.a.createElement("div",{className:m.a.uploadbtn}),r.a.createElement("div",{className:m.a.uploadicon,onClick:n},r.a.createElement("div",{className:m.a.arrowup})),r.a.createElement("div",{className:m.a.usernameinputbox},r.a.createElement("input",{type:"text",autoFocus:!0,className:m.a.usernameinput,placeholder:"Fairdrive User #1263",value:s,onChange:function(e){return o(e.target.value)}})),s.length>=1?r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:t},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"continue"))):"")};var A=function(e){var t=e.createAccount,a=e.exitStage,s=(e.nextStage,e.setPassword),o=(e.password,Object(n.useState)(!1)),i=Object(d.a)(o,2),c=i[0],u=i[1],f=Object(n.useState)(),l=Object(d.a)(f,2),b=l[0],p=l[1],y=Object(n.useState)(),v=Object(d.a)(y,2),g=v[0],w=v[1],x=function(e,t){""!==e|""!==t&&(e===t?(u(!0),s(e)):u(!1))};return r.a.createElement("div",{className:m.a.formcontainer},r.a.createElement("div",{className:m.a.closeButton,onClick:a},r.a.createElement("div",{className:h.a.closeicon})),r.a.createElement("div",{className:m.a.title},"Choose a password"),r.a.createElement("div",{className:m.a.passwordflex}),r.a.createElement("div",{className:m.a.flexer}),r.a.createElement("div",{className:m.a.usernameinputbox},r.a.createElement("input",{type:"password",autoFocus:!0,name:"1",className:m.a.mnemonicinput,placeholder:"Password",value:b,onChange:function(e){return function(e){p(e.target.value),x(e.target.value,g)}(e)}})),r.a.createElement("div",{className:m.a.usernameinputbox},r.a.createElement("input",{type:"password",name:"2",className:m.a.mnemonicinput,placeholder:"Control",value:g,onChange:function(e){return function(e){w(e.target.value),x(e.target.value,b)}(e)}})),c?r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:t},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"set password"))):"")},N=a(3),C=a(5),O=a(7),P=a(6),I=a(477),T=a.n(I),K=function(e){Object(O.a)(a,e);var t=Object(P.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={image:e.props.avatar,allowZoomOut:!1,position:{x:.5,y:.5},scale:1.2,rotate:0,borderRadius:200,preview:null,width:200,height:200},e.handleSave=function(t){var a=e.editor.getImageScaledToCanvas().toDataURL(),n=e.editor.getCroppingRect();e.setState({preview:{img:a,rect:n,scale:e.state.scale,width:e.state.width,height:e.state.height,borderRadius:e.state.borderRadius}})},e.handleScale=function(t){var a=parseFloat(t.target.value);e.setState({scale:a})},e.handleNewImage=function(t){e.setState({image:t.target.files[0]})},e.rotateRight=function(t){t.preventDefault(),e.setState({rotate:e.state.rotate+90})},e.handlePositionChange=function(t){e.setState({position:t})},e.onClickSave=function(){if(e.editor){var t=e.editor.getImage();e.props.setAvatar(t.toDataURL("image/jpeg",.82)),e.props.exitStage()}},e.setEditorRef=function(t){return e.editor=t},e}return Object(C.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:m.a.formcontainer},r.a.createElement("div",{className:m.a.avatareditor},r.a.createElement("div",{className:h.a.rotateicon,onClick:this.rotateRight}),r.a.createElement(T.a,{ref:this.setEditorRef,scale:parseFloat(this.state.scale),width:this.state.width,height:this.state.height,position:this.state.position,onPositionChange:this.handlePositionChange,rotate:parseFloat(this.state.rotate),borderRadius:this.state.borderRadius,image:this.state.image})),r.a.createElement("div",{className:m.a.sliderbox},r.a.createElement("input",{name:"scale",type:"range",onChange:this.handleScale,min:"1",max:"3",step:"0.01",defaultValue:"1.2"})),r.a.createElement("div",{className:m.a.subtitle},"scroll to zoom - drag to move"),r.a.createElement("label",{for:"newFile",className:m.a.link,onClick:""},"choose another file"),r.a.createElement("input",{hidden:!0,name:"newImage",id:"newFile",accept:".jpg, .jpeg, .png, .gif",type:"file",onChange:this.handleNewImage,className:m.a.fileinput}),r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:this.onClickSave.bind(this)},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"set avatar"))),r.a.createElement("div",{className:m.a.flexer}),r.a.createElement("div",{className:m.a.link},"Cancel"))}}]),a}(r.a.Component);var R=function(e){e.accountCreateDone;var t=e.item0,a=e.item1,n=e.item2,s=e.item3,o=e.nextStage;return r.a.createElement("div",{className:m.a.formcontainer},r.a.createElement("div",{className:m.a.title},"Your account is being created"),r.a.createElement("div",{className:m.a.statusbox},t?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#333333"}}),t?r.a.createElement("div",{style:{color:"#92e7fa"}},"Creating wallet"):r.a.createElement("div",null,"Creating wallet"),a?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#333333"}}),a?r.a.createElement("div",{style:{color:"#92e7fa"}},"Setting storage on Swarm"):r.a.createElement("div",null,"Setting storage on Swarm"),n?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#333333"}}),n?r.a.createElement("div",{style:{color:"#92e7fa"}},"Creating Fairdrive"):r.a.createElement("div",null,"Creating Fairdrive"),s?r.a.createElement(S.a,{style:{color:"#92e7fa"}}):r.a.createElement(S.a,{style:{color:"#333333"}}),s?r.a.createElement("div",{style:{color:"#92e7fa"}},"Encrypting keys"):r.a.createElement("div",null,"Encrypting keys")),t&&a&&n&&s?r.a.createElement("div",{tabIndex:"2",className:h.a.button,onClick:o},r.a.createElement("div",null,r.a.createElement("div",{className:h.a.buttontext},"To your account"))):"")};var F=[{path:"/account-create",exact:!0,component:function(){var e=window.fds,t=Object(l.b)(),a=Object(n.useState)("accountCreateIntroId"),s=Object(d.a)(a,2),o=s[0],c=s[1],b=Object(i.e)(),y=Object(n.useState)([]),h=Object(d.a)(y,2),v=h[0],m=h[1],w=Object(n.useState)(),x=Object(d.a)(w,2),_=x[0],S=x[1],N=Object(n.useState)(),C=Object(d.a)(N,2),O=(C[0],C[1]),P=Object(n.useState)(p.a),I=Object(d.a)(P,2),T=I[0],F=I[1],j=Object(n.useState)(""),D=Object(d.a)(j,2),B=D[0],V=D[1],J=Object(n.useState)(),L=Object(d.a)(J,2),U=L[0],H=L[1],z=Object(n.useState)(!1),G=Object(d.a)(z,2),W=G[0],q=(G[1],Object(n.useState)(!1)),X=Object(d.a)(q,2),Z=X[0],Y=X[1],Q=Object(n.useState)(!1),$=Object(d.a)(Q,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(d.a)(ae,2),re=ne[0],se=ne[1],oe=Object(n.useState)(!1),ie=Object(d.a)(oe,2),ce=ie[0],ue=ie[1],fe=function(){var a=Object(f.a)(u.a.mark((function a(){var n,r,s,o,i;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c("creatingAccountId"),n=_.derivePath("m/44'/60'/0'/0/0"),r=_.derivePath("m/44'/60'/1'/0/0"),s=_.derivePath("m/44'/60'/2'/0/0"),Y(!0),a.next=7,e.Account.SwarmStore.SF.set(n.address,"userdata",n.privateKey,{username:B,useravatar:T,publicKey:n.publicKey,address:n.address,addresses:[n.address,r.address]});case 7:return a.sent,te(!0),(new Date).toISOString(),a.next=12,e.Account.SwarmStore.SF.set(r.address,"fairdrive-temp",r.privateKey,{keyIndex:1,name:"Temporary",ownerAddress:r.address,content:{}});case 12:return a.sent,a.next=15,e.Account.SwarmStore.SF.set(s.address,"fairdrive-dappdata",s.privateKey,{keyIndex:2,name:"DappData",ownerAddress:s.address,content:{}});case 15:return a.sent,a.next=18,e.Account.SwarmStore.SF.set(n.address,"fairdrive",n.privateKey,{Temporary:{name:"Temporary",address:r.address},DappData:{name:"DappData",address:s.address}});case 18:return a.sent,se(!0),a.next=22,window.myWeb3.eth.accounts.encrypt(_.privateKey,U);case 22:o=a.sent,i={status:"accountSet",username:B,avatar:T,address:_.address,publicKey:_.publicKey,privateKey:o},t({type:"SET_ACCOUNT",data:i}),ue(!0);case 26:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();switch(o){case"accountCreateIntroId":return r.a.createElement(g,{createStage:function(){return c("mnemonicShowId")},restoreStage:function(){return c()},exitStage:function(){return b.goBack()}});case"mnemonicShowId":return r.a.createElement(k,{nextStage:function(){return c("mnemonicCheckId")},exitStage:function(){return c("accountCreateIntroId")},setMnemonic:m,mnemonic:v,setWallet:S,setCollection:O});case"mnemonicCheckId":return r.a.createElement(E,{nextStage:function(){return c("chooseUsernameId")},prevStage:function(){return c("mnemonicShowId")},exitStage:function(){return c("accountCreateIntroId")},mnemonic:v});case"chooseUsernameId":return r.a.createElement(M,{avatar:T,setUsername:V,username:B,nextStage:function(){return c("choosePasswordId")},exitStage:function(){return c("accountCreateIntroId")},avatarStage:function(){return c("chooseAvatarId")}});case"chooseAvatarId":return r.a.createElement(K,{avatar:p.a,exitStage:function(){return c("chooseUsernameId")},setAvatar:F});case"choosePasswordId":return r.a.createElement(A,{createAccount:fe,exitStage:function(){return c("accountCreateIntroId")},setPassword:H,password:U});case"creatingAccountId":return r.a.createElement(R,{accountCreateDone:W,item0:Z,item1:ee,item2:re,item3:ce});default:return r.a.createElement("h1",null,"Oops...")}}}];var j=function(){return r.a.createElement("div",{className:h.a.swarmcity},F.map((function(e){var t=e.path,a=e.exact,n=e.component;return r.a.createElement(i.a,Object.assign({key:t},{path:t,exact:a,component:n}))})))},D=a(54),B=a(100),V=a(173),J=a(482),L=a(171),U=a(478),H=a(34),z={status:"noAccount"};var G={account:{mountPoint:"account",reducer:Object(L.persistentReducer)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCOUNT":return Object(D.a)(Object(D.a)({},e),t.data);case"RESET_ACCOUNT":return Object(D.a)({},z);default:return e}}),{name:"account"})}},W={directories:{"0x1":{dirName:"DappData",metaHash:"0x...",items:{0:{itemName:"File 1.jpg",fileSize:12233,mimeType:"JPEG"}}},"0x2":{dirName:"Images",metaHash:"0x...",items:{0:{itemName:"File 2.jpg",fileSize:12233,mimeType:"JPEG"}}}},directoryList:[],idInfo:{idString:"KarsDrive-1",balanceEth:1e18,balanceFdt:2e19}},q={};Object.values(G).forEach((function(e){var t=e.mountPoint,a=e.reducer;q[t]=a}));var X=Object(H.c)(Object(D.a)(Object(D.a)({},q),{},{globalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DIRECTORY":return Object(D.a)(Object(D.a)({},e),{},{directories:[].concat(Object(B.a)(e.directories),[t.directories])});default:return e}}})),Z=a(483),Y=u.a.mark(Q);function Q(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)(Object(B.a)(Object.values(G).filter((function(e){return e.saga})).map((function(e){return e.saga()}))));case 2:case"end":return e.stop()}}),Y)}var $=a(480),ee=a.n($),te=a(481),ae=a.n(te);window.myWeb3=new ae.a("https://goerli.infura.io/v3/46958faea5154db687257f9598b0e269"),window.fds=new ee.a;var ne=Object(J.a)(),re=new U.a({name:"fairdrive"}),se=Object(L.persistentStore)({db:re}),oe=Object(V.a)({reducer:X,middleware:[ne].concat(Object(B.a)(Object(V.b)())),enhancers:[se],preloadedState:{}}),ie=oe;window.dispatch=function(e,t){oe.dispatch(Object(D.a)({type:e},t))},ne.run(Q);var ce=a(168),ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(l.a,{store:ie},r.a.createElement(ce.a,null,r.a.createElement(j,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):fe(t,e)}))}}()},160:function(e,t,a){"use strict";(function(n){var r=a(17),s=a(20),o=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(212)),c=l(a(119)),u=l(a(222)),f=l(a(161)),d=a(223);function l(e){return e&&e.__esModule?e:{default:e}}function b(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){b(s,n,r,o,i,"next",e)}function i(e){b(s,n,r,o,i,"throw",e)}o(void 0)}))}}if("undefined"===typeof y)var y=function e(t,a,n){o(this,e),this.content=t,this.name=a,this.type=n.type};var h=function(){function e(t,a){o(this,e),this.config=t,this.account=a,this.gateway=t.swarmGateway,this.rawGateway=t.swarmGateway+"/bzz-raw:/"}return s(e,[{key:"getSwarmDigest",value:function(e){var t=this;return p(r.mark((function a(){var n;return r.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e,a.next="/shared/mail"===a.t0?3:"/shared"===a.t0?4:"/"===a.t0?5:6;break;case 3:return a.abrupt("return","0x723beeeb4a880dc9432fdf3b1b53df942c4ec162ffda83037f2ad2ef94b22c23");case 4:return a.abrupt("return","0x23e642b7242469a5e3184a6566020c815689149967703a98c0affc14b9ca9b28");case 5:return a.abrupt("return","0xc7f5bbf5fe95923f0691c94f666ac3dfed12456cd33bd018e7620c3d93edd5a6");case 6:return a.next=8,t.sendRequest(t.rawGateway,"POST","text",e,null,null,!0);case 8:return n=a.sent,a.abrupt("return","0x"+n);case 10:case"end":return a.stop()}}),a)})))()}},{key:"getSwarmDigestValue",value:function(e){var t=this;return p(r.mark((function a(){var n;return r.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=e.replace(/0x/,""),a.t0=e,a.next="723beeeb4a880dc9432fdf3b1b53df942c4ec162ffda83037f2ad2ef94b22c23"===a.t0?4:"23e642b7242469a5e3184a6566020c815689149967703a98c0affc14b9ca9b28"===a.t0?5:"c7f5bbf5fe95923f0691c94f666ac3dfed12456cd33bd018e7620c3d93edd5a6"===a.t0?6:7;break;case 4:return a.abrupt("return","/shared/mail");case 5:return a.abrupt("return","/shared");case 6:return a.abrupt("return","/");case 7:return a.next=9,t.sendRequest(t.rawGateway+e,"GET","text");case 9:return n=a.sent,a.abrupt("return",n);case 11:case"end":return a.stop()}}),a)})))()}},{key:"storeFilesUnencrypted",value:function(e){for(var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,n=(arguments.length>2&&void 0!==arguments[2]||console.log,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),r=this.gateway+"/bzz:/",s=new FormData,o=0,i=e.length-1;i>=0;i--){o+=e[i].size;var c=e[i].fullPath?e[i].fullPath.split("/").splice(1).join("/"):e[i].name;s.append("file",e[i],c)}return this.sendRequest(r,"POST","text",s,a,o,n).then((function(a){return new u.default({address:a,file:e[0],time:Date.now()},t.account)})).catch((function(e){throw new Error(e)}))}},{key:"storeEncryptedFile",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:console.log,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return s("encrypting"),i.default.fileToBuffer(e).then((function(i){var d=c.default.generateRandomIV();return c.default.encryptBuffer(i,t,d).then((function(t){return n(!0),s("uploading"),a.postData(t,r,"bzz:/",o).then((function(t){return new u.default({address:t,file:e,time:Date.now(),iv:"0x"+d.toString("hex"),meta:f},a.account)})).catch((function(e){throw new Error(e)}))}))}))}},{key:"getDecryptedFile",value:function(e,t,a,r){return this.getDataFromManifest(e.address,e.file.name).then((function(a){var r=c.default.decryptBuffer(a,t,n.from(e.iv.substring(2,34),"hex"));if("object"===typeof window){var s=new Blob([r],{type:e.file.type});return s.name=e.file.name,s}return new y([r],e.file.name,{type:e.file.type})}))}},{key:"getFile",value:function(e){return this.sendRequest(e,"GET","text")}},{key:"getData",value:function(e){return this.sendRequest(e,"GET","arraybuffer")}},{key:"getDataFromManifest",value:function(e,t){var a=this,n=this.rawGateway+e+"/";return this.getFile(n).then((function(e){var t=JSON.parse(e);if(1===t.entries.length)return a.getData(a.rawGateway+t.entries[0].hash+"/").then((function(e){return e}));throw new Error("couldn't find that file in the manifest.")}))}},{key:"postData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bzz:/",n=arguments.length>3?arguments[3]:void 0;return this.sendRequest(this.gateway+"/"+a,"POST","text",e,t,e.length,n)}},{key:"pin",value:function(e){return this.sendRequest(this.gateway+"/bzz-pin/","POST","text","",progressCallback,0,!0)}},{key:"sendRequest",value:function(e,t,a,r,s,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c={Accept:"application/octet-stream"};return i&&(c["x-swarm-pin"]=!0),f.default.time("sendRequest//Swarm"),(0,d.request)({responseType:a,url:"".concat(e),method:t,headers:c,data:r,transformResponse:[function(e){return"arraybuffer"===a?n.from(e):e}],onUploadProgress:function(e){s&&s(Math.floor(e.loaded/o*100,2))}}).then((function(a){return f.default.timeEnd("sendRequest//Swarm"),f.default.log(e,t),a.data}))}}]),e}();t.default=h,e.exports=t.default}).call(this,a(1).Buffer)},161:function(e,t,a){"use strict";var n=a(19),r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=new(function(){function e(){n(this,e)}return r(e,[{key:"log",value:function(){}},{key:"time",value:function(e){0}},{key:"timeEnd",value:function(e){0}}]),e}());t.default=s,e.exports=t.default},212:function(e,t,a){"use strict";(function(n){var r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new(function(){function e(){r(this,e)}return s(e,[{key:"fileToBuffer",value:function(e){return new Promise((function(t,a){if("undefined"===typeof FileReader)t(n.from(e.content[0]));else{var r=new FileReader;r.onload=function(e){t(n.from(e.target.result))},r.readAsArrayBuffer(e)}}))}},{key:"fileToString",value:function(e){return new Promise((function(t,a){if("undefined"===typeof window)t(e.content[0].toString());else{var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsText(e)}}))}}]),e}());t.default=o,e.exports=t.default}).call(this,a(1).Buffer)},214:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(82),i=a(105);function c(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){c(s,n,r,o,i,"next",e)}function i(e){c(s,n,r,o,i,"throw",e)}o(void 0)}))}}var f=a(967),d=a(968),l=a(970),b=function(){function e(t,a){r(this,e),this.account=t,this.config=a,this.ENSRegistry=new f(this.account,a.registryAddress),this.SubdomainRegistrar=new d(this.account,a.subdomainRegistrarAddress),this.PublicResolver=new l(this.account,a.resolverContractAddress)}return s(e,[{key:"registerSubdomain",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.SubdomainRegistrar.register((0,o.sha3)(e),t)}},{key:"setResolver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,i.hash)(e+"."+this.config.domain),n=this.config.resolverContractAddress;return this.ENSRegistry.setResolver(a,n,t)}},{key:"setAll",value:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=(0,i.hash)(e+"."+this.config.domain),o=this.account.publicKey,c=o.substring(0,66),u="0x"+o.substring(66,130);return this.PublicResolver.setAll(s,this.account.wallet.address,t,a,c,u,n,r)}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,i.hash)(e+"."+this.config.domain);return this.PublicResolver.getAll(a,t)}},{key:"setAddr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,i.hash)(e+"."+this.config.domain);return this.PublicResolver.setAddr(a,this.account.wallet.address,t)}},{key:"setPubkey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,i.hash)(e+"."+this.config.domain),n=this.account.publicKey,r=n.substring(0,66),s="0x"+n.substring(66,130);return this.PublicResolver.setPubkey(a,r,s,t)}},{key:"setMultihash",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,i.hash)(e+"."+this.config.domain);return this.PublicResolver.setMultihash(n,t,a)}},{key:"getPubKey",value:function(e){var t=this;return u(n.mark((function a(){var r;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,i.hash)(e+"."+t.config.domain),a.abrupt("return",t.getPubKeyRaw(r));case 2:case"end":return a.stop()}}),a)})))()}},{key:"getOwner",value:function(e){var t=this;return u(n.mark((function a(){var r;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,i.hash)(e+"."+t.config.domain),a.abrupt("return",t.ENSRegistry.owner(r));case 2:case"end":return a.stop()}}),a)})))()}},{key:"getPubKeyRaw",value:function(e){var t=this;return u(n.mark((function a(){var r,s;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.PublicResolver.getPubkey(e);case 2:if(r=a.sent,"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"===(s="04"+r[0].substring(2,66)+r[1].substring(2,66))){a.next=8;break}return a.abrupt("return",s);case 8:return a.abrupt("return",!1);case 9:return a.abrupt("return",s);case 10:case"end":return a.stop()}}),a)})))()}},{key:"getMultihash",value:function(e){var t=(0,i.hash)(e+"."+this.config.domain);return this.PublicResolver.getMultihash(t)}}]),e}();t.default=b,e.exports=t.default},222:function(e,t,a){"use strict";var n,r=a(19),s=a(20),o=(n=a(213))&&n.__esModule?n:{default:n};var i=function(){function e(t,a){if(r(this,e),void 0===t.address)throw new Error("address must be defined");if(void 0===t.file)throw new Error("file must be defined");if(void 0===t.time)throw new Error("time must be defined");return this.address=t.address,this.file=t.file,this.time=t.time,this.iv=t.iv,this.meta=t.meta,void 0===t.meta&&(this.meta={}),this.account=a,this.SwarmStore=this.account.SwarmStore,this}return s(e,[{key:"toJSON",value:function(){return{address:this.address,file:{name:this.file.name,type:this.file.type,size:this.file.size},time:this.time,iv:this.iv,meta:this.meta}}},{key:"getFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;return this.SwarmStore.retrieveFile(this.account,this,e,t)}},{key:"saveAs",value:function(){arguments.length>0&&void 0!==arguments[0]||console.log,arguments.length>1&&void 0!==arguments[1]||console.log;return this.getFile(console.log,console.log).then((function(e){return(0,o.default)(e)}))}},{key:"gatewayLink",value:function(){return"".concat(this.account.Store.config.swarmGateway,"/bzz:/").concat(this.address,"/").concat(this.file.name)}}]),e}();e.exports=i},242:function(e,t,a){e.exports=a.p+"static/media/defaultAvatar.e9316813.png"},25:function(e,t,a){e.exports={baseShadow:"styles_baseShadow__3Xdrr",baseGlow:"styles_baseGlow__fiX4_",baseGlowText:"styles_baseGlowText__1theI",mainTitle1:"styles_mainTitle1__2NSyK",mainTitle2:"styles_mainTitle2__Si20_",mainTitle3:"styles_mainTitle3__LGCpn",mainTitle4:"styles_mainTitle4__1V0jS",bodyDefault:"styles_bodyDefault__3HIAZ",bodyBold:"styles_bodyBold__1X9lW",bodyDetail:"styles_bodyDetail__3X0gq",smallLight:"styles_smallLight__19t_v",smallBold:"styles_smallBold__2dgD2",smallestLight:"styles_smallestLight__2N7qc",smallestBold:"styles_smallestBold__2t4FG","fair-drive":"styles_fair-drive__17zvp",container:"styles_container__d38tt",topbar:"styles_topbar__1EdBD",brand:"styles_brand__3zFIq styles_mainTitle2__Si20_",loginregistertitle:"styles_loginregistertitle__2U9ie styles_bodyBold__1X9lW",breadcrumb:"styles_breadcrumb__bpbO0 styles_mainTitle2__Si20_",h1:"styles_h1__1yNOI styles_mainTitle4__1V0jS",address:"styles_address__9xoaG styles_bodyDefault__3HIAZ",space:"styles_space__1gPRX",breadcrumbpath:"styles_breadcrumbpath__UqK5n styles_bodyBold__1X9lW",exiticonblue:"styles_exiticonblue__2iuy7",exitgrayicon:"styles_exitgrayicon__wSN_K",closeicon:"styles_closeicon__1ph6l",innercontainer:"styles_innercontainer__atUd9",logincontainer:"styles_logincontainer__1R-KF",register:"styles_register__-9W1q",createnew:"styles_createnew__26ZmC styles_smallLight__19t_v",button:"styles_button__jo6qc styles_bodyBold__1X9lW styles_baseGlow__fiX4_",buttontext:"styles_buttontext__Rx19U styles_baseGlowText__1theI",rowfile:"styles_rowfile__3vKca",dirName:"styles_dirName__1mRTc styles_bodyBold__1X9lW",icons8folder:"styles_icons8folder__TMZPE",directoryrow:"styles_directoryrow__1zOps",flaticon:"styles_flaticon__1-ES6",solid:"styles_solid__2wDj6",A1:"styles_A1__28MMj","grid-1":"styles_grid-1__14Q4R",grid:"styles_grid__2je-P",location:"styles_location__3GLdJ",myaccount:"styles_myaccount__2kWuX",handlebalance:"styles_handlebalance__26a3V",avatar:"styles_avatar__1frs7",handle:"styles_handle__3mz5R styles_smallBold__2dgD2",balance:"styles_balance__xoCET styles_smallBold__2dgD2",bigbalance:"styles_bigbalance__IVi1A styles_mainTitle2__Si20_"}},418:function(e){e.exports=JSON.parse('{"contractName":"ENSRegistry","abi":[{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":true,"name":"label","type":"bytes32"},{"indexed":false,"name":"owner","type":"address"}],"name":"NewOwner","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"owner","type":"address"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"resolver","type":"address"}],"name":"NewResolver","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"ttl","type":"uint64"}],"name":"NewTTL","type":"event"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"owner","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"label","type":"bytes32"},{"name":"owner","type":"address"}],"name":"setSubnodeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"resolver","type":"address"}],"name":"setResolver","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"ttl","type":"uint64"}],"name":"setTTL","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"resolver","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"ttl","outputs":[{"name":"","type":"uint64"}],"payable":false,"stateMutability":"view","type":"function"}]}')},419:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(105),i=a(82),c=h(a(214)),u=h(a(974)),f=h(a(160)),d=h(a(429)),l=h(a(119)),b=h(a(995)),p=h(a(222)),y=h(a(430));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}var m=function(){function e(t,a){r(this,e),this.account=a,this.config=t,this.Mailbox=new u.default(t),this.Store=new f.default(t,a),this.SF=new d.default(t.swarmGateway),this.SwarmStore=this.account.SwarmStore,this.gasPrice=(0,i.toWei)(t.gasPrice.toString(),"gwei")}return s(e,[{key:"lookupContact",value:function(e,t){var a,n,r=new c.default(e,this.config.ensConfig),s=(0,o.hash)(t+"."+this.config.ensConfig.domain),i=this.Mailbox.encodeFeedLocationHash(e.address,s);return r.getPubKey(t).then((function(e){n="0x"+e.substr(2,130)})).then((function(e){return r.getMultihash(t)})).then((function(e){if("0x"===(a=e))throw Error("could not find multihash entry")})).then((function(e){return new y.default({subdomain:t,publicKey:n,multiboxAddress:a,feedLocationHash:i})}))}},{key:"send",value:function(e,t,a,n){var r,s,i,u,f=this,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:console.log,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:console.log,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:console.log,v=new c.default(e,this.config.ensConfig),m=(0,o.hash)(e.subdomain+"."+this.config.ensConfig.domain),g=(0,o.hash)(t+"."+this.config.ensConfig.domain),w=this.Mailbox.encodeFeedLocationHash(e.address,g);return h("retrieving public key"),v.getPubKey(t).then((function(t){return i=t,l.default.calculateSharedSecret(e.privateKey,t)})).then((function(e){return r=e,h("retrieving mailbox address"),v.getMultihash(t)})).then((function(t){if(s=t,h("retrieving connection"),"0x"!==s)return f.Mailbox.getInboxFeed(e,e.subdomain,s,n);throw Error("could not find multihash entry")})).then((function(a){return JSON.stringify(a.values)===JSON.stringify({})||void 0===a.values[m]?(h("creating connection ".concat(e.subdomain,"->").concat(t)),f.Mailbox.newInboxFeed(e,e.subdomain,m,s,w,n).then((function(a){return e.storeContact(new y.default({subdomain:t,publicKey:i,multiboxAddress:s,feedLocationHash:w}))})).then((function(){var t=f.Mailbox.decodeFeedLocationHash(w);return f.initMessages(i,e,t.topic)}))):(h("request found"),!0)})).then((function(){return h("storing encrypted file"),f.Store.storeEncryptedFile(a,"0x"+r,d,p,h)})).then((function(a){h("sending encrypted message");var r=f.Mailbox.decodeFeedLocationHash(w);return u=new b.default({to:t,from:e.subdomain,hash:a},f.config,e),f.saveMessage(i,e,r.topic,u,n,h)})).then((function(){return u}))}},{key:"receive",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,s=new c.default(e,this.config.ensConfig);return s.getPubKey(t.from).then((function(t){return"0x"+l.default.calculateSharedSecret(e.privateKey,t)})).then((function(e){return a.Store.getDecryptedFile(t.hash,e,n,r)}))}},{key:"retrieveSent",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,s=new c.default(e,this.config.ensConfig);return s.getPubKey(t.to).then((function(t){return"0x"+l.default.calculateSharedSecret(e.privateKey,t)})).then((function(e){return a.Store.getDecryptedFile(t.hash,e,n,r)}))}},{key:"initMessages",value:function(e,t,a){var n=l.default.calculateSharedSecret(t.privateKey,e);return this.SwarmStore.storeEncryptedValue(a,JSON.stringify({messages:[]}),t,"0x"+n)}},{key:"saveMessage",value:function(e,t,a,n,r){var s=this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:console.log;return o("retrieving connection message feed"),this.getAccountMessages(e,t,a,r).then((function(r){o("saving message feed"),r.push(n.toJSON()),o("appending message");var i=l.default.calculateSharedSecret(t.privateKey,e);return s.SwarmStore.storeEncryptedValue(a,JSON.stringify({messages:r}),t,"0x"+i)}))}},{key:"getAccountMessages",value:function(e,t,a,n){return this.getMessageFeed(e,t.address,t,a,n)}},{key:"getMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"received",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;switch(e){case"received":return this.getReceivedMessages(t,a);case"sent":return this.getSentMessages(t,a)}}},{key:"getReceivedMessages",value:function(e,t){var a=this,n=new c.default(e,this.config.ensConfig);return this.getSenders(e,t).then((function(r){for(var s=[],o=r.length-1;o>=0;o--)s.push(new Promise((function(s,i){var c=a.Mailbox.decodeFeedLocationHash(r[o].feedLocationHash);return n.getPubKeyRaw(r[o].senderNamehash).then((function(n){return a.getMessageFeed(n,c.address,e,c.topic,t).then(s)}))})));return Promise.all(s).then((function(e){return[].concat.apply([],e).sort((function(e,t){return e.hash.time>t.hash.time?1:-1}))}))}))}},{key:"getSentMessages",value:function(e,t){var a=this;return e.getContacts().then((function(n){for(var r=[],s=n.length-1;s>=0;s--)r.push(new Promise((function(r,o){var i=a.Mailbox.decodeFeedLocationHash(n[s].feedLocationHash);return a.getMessageFeed(n[s].publicKey,i.address,e,i.topic,t).then(r)})));return Promise.all(r).then((function(e){return[].concat.apply([],e).sort((function(e,t){return e.hash.time>t.hash.time?1:-1}))}))}))}},{key:"getMessageFeed",value:function(e,t,a,n){var r=this,s=l.default.calculateSharedSecret(a.privateKey,e);return this.SwarmStore.retrieveDecryptedValue(n,t,"0x"+s).then((function(e){return JSON.parse(e).messages.map((function(e){return new b.default(e,r.config,a)})).map((function(e){return e.hash=new p.default(e.hash,r.config),e}))})).catch((function(e){if(404!==e.response.status)throw new Error(e);return[]}))}},{key:"getTreeSenders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.children&&e.children.length>0){for(var a=e.children.length-1;a>=0;a--)t=Object.assign(t,this.getTreeSenders(e.children[a]));return t}return t=Object.assign(t,e.values)}},{key:"getSenders",value:function(e,t){var a,r=this;return(a=n.mark((function a(){var s,o,i,u,f,d,l,b;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=new c.default(e,r.config.ensConfig),a.next=3,s.getMultihash(e.subdomain);case 3:if(null!==(o=a.sent)){a.next=6;break}throw new Error("couldn't find mailbox for ".concat(e.subdomain));case 6:return a.next=8,r.Mailbox.getInboxFeeds(e,o,t);case 8:for(i=a.sent,u=r.getTreeSenders(i),f=[],d=0,l=Object.keys(u);d<l.length;d++)b=l[d],f.push({senderNamehash:b,feedLocationHash:u[b]});return a.abrupt("return",f);case 13:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var s=a.apply(e,t);function o(e){v(s,n,r,o,i,"next",e)}function i(e){v(s,n,r,o,i,"throw",e)}o(void 0)}))})()}}]),e}();t.default=m,e.exports=t.default},420:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(a(160)),i=u(a(991)),c=u(a(993));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){f(s,n,r,o,i,"next",e)}function i(e){f(s,n,r,o,i,"throw",e)}o(void 0)}))}}var l=function(){function e(t,a){r(this,e),this.account=t,this.con=null,this.roots=null,this.contractAddress=null,this.rootKvt=null,this.kvts=null,this.Store=new o.default(a,t)}return s(e,[{key:"at",value:function(e){var t=this;return d(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new i.default(t.account,e);case 2:return t.mb=a.sent,t.contractAddress=e,a.next=6,t.mb.getRoots();case 6:return t.roots=a.sent,t.rootKvt=new c.default(t.account,t.roots[0]),t.kvts=t.roots.map((function(e){return new c.default(t.account,e)})),a.abrupt("return",t);case 10:case"end":return a.stop()}}),a)})))()}},{key:"deploy",value:function(){var e=this;return d(n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new i.default(e.account);case 2:return e.mb=t.sent,e.contractAddress=e.mb.contractAddress,t.next=6,e.mb.getRoots();case 6:return e.roots=t.sent,e.rootKvt=new c.default(e.account,e.roots[0]),e.kvts=e.roots.map((function(t){return new c.default(e.account,t)})),t.abrupt("return",e);case 10:case"end":return t.stop()}}),t)})))()}},{key:"get",value:function(e){var t=arguments,a=this;return d(n.mark((function r(){var s;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=!(t.length>1&&void 0!==t[1])||t[1],n.abrupt("return",a.retrievePathValues(e,s));case 2:case"end":return n.stop()}}),r)})))()}},{key:"set",value:function(e,t,a){var r=this;return d(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.createPath(e);case 2:return n.next=4,r.Store.getSwarmDigest(e);case 4:return o=n.sent,n.abrupt("return",r.rootKvt.setKeyValue(o,t,a));case 6:case"end":return n.stop()}}),s)})))()}},{key:"createPath",value:function(e,t){var a=arguments,r=this;return d(n.mark((function t(){var s,o,i,c,u;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.length>2&&void 0!==a[2]?a[2]:0,"root"!==(o=e.split("/").slice(1))[0]){t.next=8;break}return t.next=5,r.rootKvt.getRootId();case 5:s=t.sent,t.next=15;break;case 8:if("shared"!==o[0]){t.next=14;break}return t.next=11,r.rootKvt.getSharedId();case 11:s=t.sent,t.next=15;break;case 14:throw new Error("path must begin /shared or /root");case 15:i=0;case 16:if(!(i<o.length-1)){t.next=28;break}return c="/"+o.slice(0,i+2).join("/"),t.next=20,r.Store.getSwarmDigest(c);case 20:return u=t.sent,t.next=23,r.rootKvt.addChildNode(s,u);case 23:t.sent,s=u;case 25:i++,t.next=16;break;case 28:return t.abrupt("return",!0);case 29:case"end":return t.stop()}}),t)})))()}},{key:"retrieveValues",value:function(e){var t=this;return d(n.mark((function a(){var r,s,o;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={},a.next=3,t.rootKvt.getKeyValues(e);case 3:for(s=a.sent,o=0;o<s.keys.length;o++)r[s.keys[o]]=s.values[o];return a.abrupt("return",r);case 6:case"end":return a.stop()}}),a)})))()}},{key:"retrieveTree",value:function(e){var t=arguments,a=this;return d(n.mark((function r(){var s,o,i,c,u;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.length>1&&void 0!==t[1]&&t[1],o=t.length>2&&void 0!==t[2]&&t[2],i={id:e,parentId:!1},n.next=5,a.rootKvt.getChildren(e);case 5:if(c=n.sent,!0!==o){n.next=11;break}return n.next=9,a.Store.getSwarmDigestValue(e);case 9:u=n.sent,i.name=u;case 11:if(0!==c.length||!1!==s){n.next=15;break}i={id:e,parentId:!1},n.next=27;break;case 15:if(0!==c.length||!0!==s){n.next=21;break}return n.next=18,a.retrieveValues(e);case 18:i.values=n.sent,n.next=27;break;case 21:return n.next=23,a.retrieveValues(e);case 23:return i.values=n.sent,n.next=26,a.retrievesDescendants(e,s,o);case 26:i.children=n.sent;case 27:return n.abrupt("return",i);case 28:case"end":return n.stop()}}),r)})))()}},{key:"retrievesDescendants",value:function(e){var t=arguments,a=this;return d(n.mark((function r(){var s,o,i,c,u,f,d,l,b;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.length>1&&void 0!==t[1]&&t[1],o=t.length>2&&void 0!==t[2]&&t[2],n.next=4,a.rootKvt.getChildren(e);case 4:i=n.sent,c=[],u=0;case 7:if(!(u<i.length)){n.next=32;break}return n.next=10,a.retrievesDescendants(i[u],s,o);case 10:if(f=n.sent,d={id:i[u],parentId:e},!0!==o){n.next=17;break}return n.next=15,a.Store.getSwarmDigestValue(i[u]);case 15:l=n.sent,d.name=l;case 17:if(!(f.length>0)){n.next=22;break}d.children=f,c.push(d),n.next=29;break;case 22:if(b={},!0!==s){n.next=27;break}return n.next=26,a.retrieveValues(i[u]);case 26:b=n.sent;case 27:d.values=b,c.push(d);case 29:u++,n.next=7;break;case 32:return n.abrupt("return",c);case 33:case"end":return n.stop()}}),r)})))()}},{key:"retrievePathNodes",value:function(e){var t=this;return d(n.mark((function a(){var r;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.Store.getSwarmDigest(e);case 2:return r=a.sent,a.next=5,t.retrieveTree(r,!1,!1);case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})))()}},{key:"retrievePathValues",value:function(e,t){var a=this;return d(n.mark((function r(){var s;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.Store.getSwarmDigest(e);case 2:return s=n.sent,n.next=5,a.retrieveTree(s,!0,t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),r)})))()}}]),e}();t.default=l,e.exports=t.default},429:function(e,t,a){"use strict";(function(n){var r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(82),i=f(a(151)),c=(f(a(160)),f(a(161))),u=a(223);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){if(r(this,e),"string"!==typeof t)throw new Error("You must provide a Swarm gateway endpoint.");this.swarmNode=t}return s(e,[{key:"getHex",value:function(e,t){return this.get(e,t,"arraybuffer").then((function(e){return(0,o.bytesToHex)(e)}))}},{key:"get",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.getResource(t,e).then((function(e){return a.sendRequest("/bzz-raw:/".concat(e,"/"),"GET",n).then((function(t){return r?{value:t,address:e}:t}))}))}},{key:"set",value:function(e,t,a,n){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.sendRequest("/bzz-raw:/","POST","text",(0,o.toHex)(n),s).then((function(n){return r.updateResource(t,e,a,(0,o.toHex)(n)).then((function(){return n}))}))}},{key:"getResource",value:function(e,t){var a=(0,o.padRight)((0,o.toHex)(e),64,"0");return this.sendRequest("/bzz-feed:/?topic=".concat(a,"&user=").concat(t),"GET")}},{key:"getMeta",value:function(e,t){var a=(0,o.padRight)((0,o.toHex)(e),64,"0");return this.sendRequest("/bzz-feed:/?topic=".concat(a,"&user=").concat(t,"&meta=1"),"GET","text")}},{key:"updateResource",value:function(e,t,a,n){var r=this,s=(0,o.padLeft)(n,2,"0");(0,o.padRight)((0,o.toHex)(e),64,"0");return this.getMeta(e,t).then((function(e){var t=JSON.parse(e),n=r.feedUpdateDigest(t,s),o=r.signData(n,a);return r.sendRequest("/bzz-feed:/?topic=".concat(t.feed.topic,"&user=").concat(t.feed.user,"&level=").concat(t.epoch.level,"&time=").concat(t.epoch.time,"&signature=").concat(o),"POST","text",s).then((function(e){e.substr(1).substr(0,64);return e}))}))}},{key:"sendRequest",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];c.default.time("sendRequest//SwarmFeeds"),r&&(r=n.from((0,o.hexToBytes)(r)));var i={Accept:"application/octet-stream"};return s&&(i["x-swarm-pin"]=!0),(0,u.request)({responseType:a,url:"".concat(this.swarmNode).concat(e),method:t,headers:i,data:r,transformResponse:[function(e){return"arraybuffer"===a?n.from(e):e}]}).then((function(a){return c.default.timeEnd("sendRequest//SwarmFeeds"),c.default.log(e,t),a.data}))}},{key:"signData",value:function(e,t){var a=i.default.sign(n.from((0,o.hexToBytes)(e)),n.from((0,o.hexToBytes)(t)));return"0x".concat(a.signature.toString("hex"),"0").concat(a.recovery.toString())}},{key:"feedUpdateDigest",value:function(e,t){var a,n,r,s=(0,o.hexToBytes)(t);r=e.protocolVersion;try{a=(0,o.hexToBytes)(e.feed.topic)}catch(f){return}try{n=(0,o.hexToBytes)(e.feed.user)}catch(f){return}var i=new ArrayBuffer(68+s.length),c=new DataView(i),u=0;return c.setUint8(u,r),u+=8,a.forEach((function(e){c.setUint8(u,e),u++})),n.forEach((function(e){c.setUint8(u,e),u++})),c.setUint32(u,e.epoch.time,!0),u+=7,c.setUint8(u,e.epoch.level),u++,s.forEach((function(e){c.setUint8(u,e),u++})),(0,o.sha3)((0,o.padLeft)((0,o.bytesToHex)(new Uint8Array(i)),264))}},{key:"dataToBuffer",value:function(e){return n.from(e,"hex")}}]),e}();t.default=d,e.exports=t.default}).call(this,a(1).Buffer)},430:function(e,t,a){"use strict";var n=a(19),r=a(20),s=function(){function e(t){if(n(this,e),void 0===t.subdomain)throw new Error("subdomain must be defined");if(void 0===t.publicKey)throw new Error("publicKey must be defined");if(void 0===t.multiboxAddress)throw new Error("mailboxAddress must be defined");if(void 0===t.feedLocationHash)throw new Error("feedLocationHash must be defined");return this.subdomain=t.subdomain,this.publicKey=t.publicKey,this.multiboxAddress=t.multiboxAddress,this.feedLocationHash=t.feedLocationHash,this}return r(e,[{key:"toJSON",value:function(){return{subdomain:this.subdomain,publicKey:this.publicKey,multiboxAddress:this.multiboxAddress,feedLocationHash:this.feedLocationHash}}}]),e}();e.exports=s},431:function(e,t,a){"use strict";var n=a(19),r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=a(82),i=(s=a(998))&&s.__esModule?s:{default:s};var c=function(){function e(t,a){n(this,e),this.account=a,this.config=t,this.web3=this.config.web3}return r(e,[{key:"getContract",value:function(e,t,a){return new i.default(this.config,e,t).at(a)}},{key:"deployContract",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:12e6,s=new i.default(this.config,e,t,a);return s.deploy(n,r)}},{key:"syncNonce",value:function(e){return this.web3.eth.getTransactionCount(e.wallet.address)}},{key:"pay",value:function(e,t,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15e6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:console.log;arguments.length>5&&void 0!==arguments[5]||console.log;return new Promise((function(i,c){var u={from:e.address,to:t,gas:r,gasPrice:n.gasPrice,value:(0,o.toWei)(a,"ether")};return s(u),n.web3.eth.accounts.signTransaction(u,e.privateKey).then((function(e){return n.web3.eth.sendSignedTransaction(e.rawTransaction).once("confirmation",(function(e,t){i(t)}))}))}))}},{key:"getBalance",value:function(e){try{return this.web3.eth.getBalance(e)}catch(t){console.error("can't access gateway ",config.ethGateway)}}},{key:"getBlockNumber",value:function(){return this.web3.eth.getBlockNumber()}},{key:"sign",value:function(e,t){return this.web3.eth.accounts.sign(t,e.privateKey)}},{key:"recover",value:function(e,t){return this.web3.eth.accounts.recover(e,t)}}]),e}();t.default=c,e.exports=t.default},480:function(e,t,a){"use strict";var n=a(19),r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(a(252)),o=c(a(873)),i=c(a(431));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){n(this,e);var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!1===t&&(t=this.defaultConfig()),t.web3=new s.default(new s.default.providers.HttpProvider(t.ethGateway,t.httpTimeout),null,{transactionConfirmationBlocks:1}),this.ethGateway=t.ethGateway,this.swarmGateway=t.swarmGateway,this.currentAccount=null,this.Account=new o.default(t),this.Tx=new i.default(t)}return r(e,[{key:"defaultConfig",value:function(){return{tokenName:"gas",swarmGateway:"https://swarm2.fairdatasociety.org",ethGateway:"https://geth-noordung.fairdatasociety.org",faucetAddress:"https://faucet-noordung.fairdatasociety.org/gimmie",chainID:"235813",httpTimeout:1e3,gasPrice:.001,walletVersion:1,ensConfig:{domain:"datafund.eth",registryAddress:"0xA1029cb176082eca658A67fD6807B9bDfB44A695",subdomainRegistrarAddress:"0x0E6a3B5f6800145bAe95C48934B7b5a90Df50722",resolverContractAddress:"0xC91AB84FFad79279D47a715eF91F5fbE86302E4D"}}}}]),r(e,[{key:"GetAccounts",value:function(e){return this.Account.getAll(e)}},{key:"CreateAccount",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return this.Account.create(e,t,a).then((function(e){return e}))}},{key:"UnlockAccount",value:function(e,t){var a=this;return this.currentAccount=this.Account.unlock(e,t).then((function(e){return a.currentAccount=e,a.currentAccount}))}},{key:"DeleteAccount",value:function(e){return this.Account.delete(e)}},{key:"LockAccount",value:function(e){this.currentAccount=null}},{key:"RestoreAccount",value:function(e){return this.Account.restoreFromFile(e)}},{key:"RestoreAccountFromJSON",value:function(e,t){return this.Account.restore(e,t)}},{key:"RestoreAccountFromPrivateKey",value:function(e,t,a){return this.Account.restoreFromPrivateKey(e,t,a)}},{key:"BackupAccount",value:function(e){return this.Account.get(e).saveBackupAs()}},{key:"BackupAccountAsJSON",value:function(e){return this.Account.get(e).getBackupAsJSON()}}]),e}();t.default=u,e.exports=t.default},486:function(e,t,a){e.exports=a(1214)},491:function(e,t,a){},518:function(e,t){},524:function(e,t){},544:function(e,t){},546:function(e,t){},558:function(e,t){},563:function(e,t){},568:function(e,t){},572:function(e,t){},577:function(e,t){},582:function(e,t){},586:function(e,t){},589:function(e,t){},634:function(e,t){},644:function(e,t){},646:function(e,t){},678:function(e,t){},679:function(e,t){},684:function(e,t){},686:function(e,t){},710:function(e,t){},731:function(e,t){},751:function(e,t){},753:function(e,t){},786:function(e,t){},8:function(e,t,a){e.exports={container:"account-create_container__3NdcF",containergreen:"account-create_containergreen__24rsl account-create_container__3NdcF",containerred:"account-create_containerred__sljYP account-create_container__3NdcF",formcontainer:"account-create_formcontainer__1FtYc account-create_container__3NdcF",closeButton:"account-create_closeButton__3zjgh",title:"account-create_title__1QZdD styles_mainTitle1__2NSyK",titleblue:"account-create_titleblue__1CHBH styles_mainTitle1__2NSyK",formtitle:"account-create_formtitle__2gzcM styles_mainTitle1__2NSyK",formsubtitle:"account-create_formsubtitle__199uV styles_smallLight__19t_v",subtitle:"account-create_subtitle__3_35a styles_bodyDefault__3HIAZ",link:"account-create_link__1Ayx_ styles_baseGlowText__1theI",username:"account-create_username__1WQGK styles_bodyBold__1X9lW",showkeystoggle:"account-create_showkeystoggle__3cERA styles_smallBold__2dgD2",box:"account-create_box___GsGi styles_bodyBold__1X9lW",placeholder:"account-create_placeholder__3Uv3g",avatarImage:"account-create_avatarImage__DaV2F",button:"account-create_button__nj0EZ undefined styles_baseShadow__3Xdrr",buttontext:"account-create_buttontext__1LWBJ",buttongray:"account-create_buttongray__7H5lD undefined styles_baseShadow__3Xdrr",buttontextblue:"account-create_buttontextblue__12CFX",uploadicon:"account-create_uploadicon__3p-4z",arrowup:"account-create_arrowup__Q_BAP",avatareditor:"account-create_avatareditor__3bq5u",usernameinputbox:"account-create_usernameinputbox__3DSg4",usernameinput:"account-create_usernameinput__qwoNz styles_bodyBold__1X9lW",mnemonicinputbox:"account-create_mnemonicinputbox__3s9ic",mnemonicinput:"account-create_mnemonicinput__cPDmh styles_bodyBold__1X9lW",passwordflex:"account-create_passwordflex__2UZT5",flexer:"account-create_flexer__3OqLs",dialogiconbox:"account-create_dialogiconbox__1FIZw",confirm:"account-create_confirm__1MSCL",cancel:"account-create_cancel__1s5HZ",sliderbox:"account-create_sliderbox__1sBLF",statusbox:"account-create_statusbox__2oMVP",statusboxitemactive:"account-create_statusboxitemactive__vnq_N",blacktext:"account-create_blacktext__22UQe styles_smallBold__2dgD2",choosefile:"account-create_choosefile__2pDg4 styles_smallBold__2dgD2",nextbuttonbox:"account-create_nextbuttonbox__3ixzS",mnemonic:"account-create_mnemonic__1lK4p styles_bodyBold__1X9lW",mnemoniccheck:"account-create_mnemoniccheck__1gGIJ",fileinput:"account-create_fileinput__38N5L",textField:"account-create_textField__1mcno"}},810:function(e,t){},870:function(e,t){},873:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=g(a(874)),i=g(a(973)),c=g(a(212)),u=(g(a(119)),g(a(419))),f=g(a(160)),d=g(a(996)),l=g(a(997)),b=g(a(431)),p=g(a(418)),y=g(a(420)),h=g(a(214)),v=g(a(161)),m=g(a(105));function g(e){return e&&e.__esModule?e:{default:e}}function w(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){w(s,n,r,o,i,"next",e)}function i(e){w(s,n,r,o,i,"throw",e)}o(void 0)}))}}var _=function(){function e(t){r(this,e),this.config=t,this.UserStore=new o.default(t,this),this.Store=new f.default(t,this),this.SwarmStore=new d.default(t,this),this.Mail=new u.default(t,this),this.Tx=new b.default(t,this),this.web3=this.config.web3,this.faucet=new l.default(t.faucetAddress)}return s(e,[{key:"getAll",value:function(e){return this.UserStore.getAll(e)}},{key:"isMailboxNameValid",value:function(e){if(void 0===e||!1===e)return!1;var t=e.match(/^[a-z0-9_-]*$/),a=e.match(/^[A-Z]*$/);return e.length<83&&e.length>3&&null!==t&&t.length>0&&null===a}},{key:"isMailboxNameAvailable",value:function(e){var t=this;return x(n.mark((function a(){var r,s,o;return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=m.default.hash(e+"."+t.config.ensConfig.domain),s=t.Tx.getContract(!1,p.default.abi,t.config.ensConfig.registryAddress),a.next=4,s.call("owner",[r]);case 4:return o=a.sent,a.abrupt("return","0x0000000000000000000000000000000000000000"===o);case 6:case"end":return a.stop()}}),a)})))()}},{key:"createWallet",value:function(e){return(new i.default).generate(e)}},{key:"createAndStoreAccount",value:function(e,t,a){var r=this;return x(n.mark((function s(){var o,i;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a("creating wallet"),n.next=3,r.createWallet(t);case 3:return o=n.sent,a("storing user"),n.next=7,r.UserStore.addUser(o.walletV3,e);case 7:return i=n.sent,n.abrupt("return",r.unlockByAddress(i.wallet.address,t));case 9:case"end":return n.stop()}}),s)})))()}},{key:"deployMultibox",value:function(e){var t=this;return x(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new y.default(e,t.config).deploy());case 1:case"end":return a.stop()}}),a)})))()}},{key:"getMultibox",value:function(e,t){var a=this;return x(n.mark((function r(){var s,o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=new h.default(e,a.config.ensConfig),n.next=3,s.getMultihash(t);case 3:return o=n.sent,n.abrupt("return",new y.default(e,a.config).at(o));case 5:case"end":return n.stop()}}),r)})))()}},{key:"addENS",value:function(e,t,a){var r=this;return x(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return!1,!1===a&&!0,o=new h.default(e,r.config.ensConfig),n.next=5,o.registerSubdomain(t);case 5:return n.next=7,o.setResolver(t);case 7:return"0x0000000000000000000000000000000000000000000000000000000000000000","subdomain-hidden",n.next=11,o.setAll(t,"0x0000000000000000000000000000000000000000000000000000000000000000",a,"subdomain-hidden",!0);case 11:return n.abrupt("return",!0);case 12:case"end":return n.stop()}}),s)})))()}},{key:"create",value:function(e,t,a){var r=this;return x(n.mark((function s(){var o,i,c,u;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v.default.time("created account ".concat(e)),!1!==r.isMailboxNameValid(e)){n.next=6;break}throw new Error("account name is not valid.");case 6:return v.default.time("creating account ".concat(e)),a("checking mailbox name is available"),n.next=10,r.isMailboxNameAvailable(e);case 10:if(o=n.sent,a("MICHELLE-4 mailbox name is available, creating account"),!0!==o){n.next=54;break}return n.next=15,r.createAndStoreAccount(e,t,a);case 15:return c=n.sent,u=r.config.tokenName,n.prev=17,a("account created, gifting you ".concat(u,"! \u2764")),n.next=21,r.faucet.gimmie("0x"+c.wallet.address);case 21:n.sent,n.next=29;break;case 24:return n.prev=24,n.t0=n.catch(17),n.next=28,r.UserStore.delete(e);case 28:throw new Error("could not fund account");case 29:return n.prev=29,a("deploying multibox"),n.next=33,r.deployMultibox(c);case 33:i=n.sent,n.next=41;break;case 36:return n.prev=36,n.t1=n.catch(29),n.next=40,r.UserStore.delete(e);case 40:throw new Error("could not deploy multibox");case 41:return a("creating ENS subdomain"),n.next=44,r.addENS(c,e,i.contractAddress);case 44:return a("initialising storage"),n.next=47,r.SwarmStore.initContacts(c);case 47:return n.next=49,r.SwarmStore.initStored(c);case 49:return v.default.timeEnd("created account ".concat(e)),a("created account ".concat(e)),n.abrupt("return",c);case 54:throw new Error("account name is not available.");case 55:case"end":return n.stop()}}),s,null,[[17,24],[29,36]])})))()}},{key:"ensureHasBalance",value:function(e){var t=this;return x(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return 2e3,200,a.abrupt("return",new Promise((function(a,n){var r=0,s=setInterval((function(){r++,t.web3.eth.getBalance(e).then((function(t){if(console.log(r+"/ checking: "+e+" balance: "+t),r>200)return clearInterval(s),void n(!1);parseInt(t)>0&&(clearInterval(s),a(!0))}))}),2e3)})));case 3:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this.UserStore.get(e);if(!1===t)throw new Error("".concat(e," account does not exist locally, please import it."));return t}},{key:"unlockByAddress",value:function(e,t){var a=this;return x(n.mark((function r(){var s,o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=a.UserStore.getByAddress(e),n.next=3,s.syncNonce();case 3:if(!1!==s){n.next=5;break}throw new Error("".concat(e," account does not exist locally, please import it."));case 5:return o=new i.default,n.abrupt("return",o.fromJSON(s.wallet,t).then((function(e){return s.address=e.address,s.publicKey=e.publicKey,s.privateKey=e.privateKey,s})));case 7:case"end":return n.stop()}}),r)})))()}},{key:"unlock",value:function(e,t){var a=this;return x(n.mark((function r(){var s,o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=a.get(e),n.next=3,s.syncNonce();case 3:return o=new i.default,n.abrupt("return",o.fromJSON(s.wallet,t).then((function(e){return s.address=e.address,s.publicKey=e.publicKey,s.privateKey=e.privateKey,s})));case 5:case"end":return n.stop()}}),r)})))()}},{key:"restore",value:function(e,t){return this.UserStore.restore(e,t)}},{key:"restoreFromPrivateKey",value:function(e,t,a){var n=this;return(new i.default).encrypt(a,t).then((function(a){return n.UserStore.restore(e,a),n.unlock(e,t)}))}},{key:"restoreFromFile",value:function(e){var t=this,a=e.name.match(/fds-wallet-(.*)-backup/);if(2!==a.length)throw new Error("file name should be in the format fds-wallet-subdomain-backup");var n=a[1];return c.default.fileToString(e).then((function(e){t.restore(n,e)}))}},{key:"delete",value:function(e){return this.UserStore.delete(e)}}]),e}();t.default=_,e.exports=t.default},874:function(e,t,a){"use strict";var n=a(19),r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(a(212));var s=o(a(875));function o(e){return e&&e.__esModule?e:{default:e}}var i=null;"undefined"===typeof localStorage&&(i=a(972));var c=function(){function e(t,a){n(this,e),this.config=t,this.Account=a,this.users=this.getAll()}return r(e,[{key:"get",value:function(e){var t=this.getAll().filter((function(t){return t.subdomain===e}));if(1===t.length)return new s.default(t[0],this.Account);if(0===t.length)return!1;throw new Error("there should only be one result per subdomain")}},{key:"getByAddress",value:function(e){var t=this.getAll().filter((function(t){return t.wallet.address===e}));if(1===t.length)return new s.default(t[0],this.Account);if(0===t.length)return!1;throw new Error("there should only be one result per address")}},{key:"getAll",value:function(e){void 0===this.config.walletVersion&&(e=0);var t,a=void 0===e?this.config.walletVersion:e,n=this.config.chainID?"fds-users_".concat(this.config.chainID):"users";if("undefined"===typeof localStorage){var r=void 0!==this.config.scratchDir?this.config.scratchDir:"./scratch/",o="".concat(r,"/").concat(n);this.initScratchDir(r,o),t=i.readFileSync(o)}else t=localStorage.getItem(n);if(null===t)return[];for(var c=[],u=JSON.parse(t),f=u.length-1;f>=0;f--)(0===a&&void 0===u[f].version||a===u[f].version)&&c.push(new s.default(u[f],this.Account));return c}},{key:"addUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.getByAddress(e.address);if(!1===a){var n=new s.default({version:this.config.walletVersion,subdomain:t,wallet:e},this.Account);return this.users.push(n),this.saveAll(),n}if(t===a.subdomain)return a;throw new Error("user already present in local storage, but with username "+a.subdomain)}},{key:"delete",value:function(e){this.users=this.getAll().filter((function(t){return t.subdomain!==e})),this.saveAll()}},{key:"saveAll",value:function(){for(var e=this.config.chainID?"fds-users_".concat(this.config.chainID):"users",t=[],a=this.users.length-1;a>=0;a--)t.push(this.users[a].toJSON());if("undefined"===typeof localStorage){var n=void 0!==this.config.scratchDir?this.config.scratchDir:"./scratch/",r="".concat(n,"/").concat(e);return this.initScratchDir(n,r),i.writeFileSync(r,JSON.stringify(t))}return localStorage.setItem(e,JSON.stringify(t))}},{key:"restore",value:function(e,t){var a=JSON.parse(t);return this.addUser(a,e)}},{key:"initScratchDir",value:function(e,t){i.existsSync(e)||i.mkdirSync(t),i.existsSync(t)||i.writeFileSync(t,JSON.stringify([]))}}]),e}();t.default=c,e.exports=t.default},875:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20),o=c(a(213)),i=c(a(214));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){u(s,n,r,o,i,"next",e)}function i(e){u(s,n,r,o,i,"throw",e)}o(void 0)}))}}var d=function(){function e(t,a){if(r(this,e),void 0===t.subdomain)throw new Error("subdomain must be defined");if(void 0===t.wallet)throw new Error("wallet must be defined");return this.Account=a,this.Mail=this.Account.Mail,this.Tx=this.Account.Tx,this.SwarmStore=this.Account.SwarmStore,this.version=t.version||void 0,this.subdomain=t.subdomain,this.wallet=t.wallet,this.nonce=!1,this}return s(e,[{key:"syncNonce",value:function(){var e=this;return this.Tx.syncNonce(this).then((function(t){e.nonce=t}))}},{key:"toJSON",value:function(){return{subdomain:this.subdomain,wallet:this.wallet,version:this.version}}},{key:"sign",value:function(e){return this.Tx.sign(this,e)}},{key:"recover",value:function(e,t){return this.Tx.recover(e,t)}},{key:"deployContract",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:15e6;return this.Tx.deployContract(this,e,t,a,n,r)}},{key:"getContract",value:function(e,t){return this.Tx.getContract(this,e,t)}},{key:"send",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:console.log,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:console.log;return this.Mail.send(this,e,t,a,n,r,s)}},{key:"payAddress",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e6,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:console.log;return this.Tx.pay(this,e,t,a,n,r)}},{key:"pay",value:function(e,t){var a=arguments,r=this;return f(n.mark((function s(){var o,c,u,f,d;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]?a[2]:15e6,c=a.length>3&&void 0!==a[3]?a[3]:console.log,u=a.length>4&&void 0!==a[4]?a[4]:console.log,f=new i.default(r,r.Account.config.ensConfig),n.next=6,f.getOwner(e);case 6:return d=n.sent,n.abrupt("return",r.payAddress(d,t,o,c,u));case 8:case"end":return n.stop()}}),s)})))()}},{key:"getBalance",value:function(){return this.Tx.getBalance(this.address)}},{key:"getBlockNumber",value:function(){return this.Tx.getBlockNumber()}},{key:"receive",value:function(e){var t=arguments,a=this;return f(n.mark((function r(){var s,o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=t.length>1&&void 0!==t[1]?t[1]:console.log,o=t.length>2&&void 0!==t[2]?t[2]:console.log,e.to!==a.subdomain){n.next=8;break}return n.next=5,a.Mail.receive(a,e,s,o);case 5:return n.abrupt("return",n.sent);case 8:if(e.from!==a.subdomain){n.next=14;break}return n.next=11,a.Mail.retrieveSent(a,e,s,o);case 11:return n.abrupt("return",n.sent);case 14:throw Error("there was a problem...");case 15:case"end":return n.stop()}}),r)})))()}},{key:"messages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"received",t=arguments.length>1?arguments[1]:void 0;if(-1===["received","sent"].indexOf(e))throw new Error("must be of type received or sent");return this.Mail.getMessages(e,this,t)}},{key:"storeValue",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SwarmStore.storeValue(e,t,this,a)}},{key:"retrieveValue",value:function(e){return this.SwarmStore.retrieveValue(e,this)}},{key:"storeEncryptedValue",value:function(e,t){return this.SwarmStore.storeEncryptedValue(e,t,this,this.privateKey)}},{key:"retrieveDecryptedValue",value:function(e){return this.SwarmStore.retrieveDecryptedValue(e,this.address,this.privateKey)}},{key:"getContacts",value:function(){return this.SwarmStore.getContacts(this)}},{key:"storeContact",value:function(e){return this.SwarmStore.storeContact(this,e)}},{key:"store",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return this.SwarmStore.storeFile(this,e,t,a,n,r,s,o)}},{key:"storedManifest",value:function(){return this.SwarmStore.getStoredManifest(this)}},{key:"updateStoredManifest",value:function(e){return this.SwarmStore.updateStoredManifest(e,this)}},{key:"updateStoredMeta",value:function(e,t){return this.SwarmStore.updateStoredMeta(e,t,this)}},{key:"stored",value:function(e){return this.SwarmStore.getStored(e,this).then((function(e){return e.files}))}},{key:"getBackup",value:function(){return{data:JSON.stringify(this.wallet),name:"fds-wallet-".concat(this.subdomain,"-backup.json")}}},{key:"getBackupAsJSON",value:function(){return JSON.stringify(this.wallet)}},{key:"getBackupFile",value:function(){return new File([JSON.stringify(this.wallet)],"fds-wallet-".concat(this.subdomain,"-backup.json"),{type:"application/json"})}},{key:"saveBackupAs",value:function(){return(0,o.default)(this.getBackupFile())}},{key:"getMultibox",value:function(e){return this.Account.getMultibox(this,e)}},{key:"lookupContact",value:function(e){return this.Mail.lookupContact(this,e)}}]),e}();e.exports=d},967:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(418);function i(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,c,"next",e)}function c(e){i(s,n,r,o,c,"throw",e)}o(void 0)}))}}var u=function(){function e(t){r(this,e);var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.account=t,this.contractAddress=a,this.con=!1,!1!==a&&(this.con=t.getContract(o.abi,a)),this}return s(e,[{key:"owner",value:function(e){var t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.con.call("owner",[e]));case 1:case"end":return a.stop()}}),a)})))()}},{key:"setResolver",value:function(e,t){var a=arguments,r=this;return c(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]&&a[2],n.abrupt("return",r.con.send("setResolver",[e,t],o));case 2:case"end":return n.stop()}}),s)})))()}},{key:"setAddr",value:function(e,t){var a=arguments,r=this;return c(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]&&a[2],n.abrupt("return",r.con.send("setResolver",[e,t],o));case 2:case"end":return n.stop()}}),s)})))()}}]),e}();t.default=u,e.exports=t.default},968:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(969);function i(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,c,"next",e)}function c(e){i(s,n,r,o,c,"throw",e)}o(void 0)}))}}var u=function(){function e(t){r(this,e);var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.account=t,this.contractAddress=a,this.con=!1,!1!==a&&(this.con=t.getContract(o.abi,a)),this}return s(e,[{key:"register",value:function(e){var t=arguments,a=this;return c(n.mark((function r(){var s;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.length>1&&void 0!==t[1]&&t[1],n.abrupt("return",a.con.send("register",[e,a.account.wallet.address],s));case 2:case"end":return n.stop()}}),r)})))()}}]),e}();t.default=u,e.exports=t.default},969:function(e){e.exports=JSON.parse('{"contractName":"SubdomainRegistrar","abi":[{"constant":true,"inputs":[],"name":"ens","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"expiryTimes","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rootNode","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"ensAddr","type":"address"},{"name":"node","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"owner","type":"address"},{"indexed":false,"name":"label","type":"bytes32"}],"name":"Log","type":"event"},{"constant":false,"inputs":[{"name":"label","type":"bytes32"},{"name":"owner","type":"address"}],"name":"register","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]}')},970:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(971);function i(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,c,"next",e)}function c(e){i(s,n,r,o,c,"throw",e)}o(void 0)}))}}var u=function(){function e(t){r(this,e);var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.account=t,this.contractAddress=a,this.con=!1,!1!==a&&(this.con=t.getContract(o.abi,a)),this}return s(e,[{key:"setAll",value:function(e,t,a,r,s,o,i){var u=arguments,f=this;return c(n.mark((function c(){var d;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=u.length>7&&void 0!==u[7]&&u[7],n.abrupt("return",f.con.send("setAll",[e,t,a,r,s,o,i],d));case 2:case"end":return n.stop()}}),c)})))()}},{key:"getAll",value:function(e){var t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.con.call("getAll",[e]));case 1:case"end":return a.stop()}}),a)})))()}},{key:"setResolver",value:function(e,t){var a=arguments,r=this;return c(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]&&a[2],n.abrupt("return",r.con.send("setResolver",[e,t],o));case 2:case"end":return n.stop()}}),s)})))()}},{key:"setAddr",value:function(e,t){var a=arguments,r=this;return c(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]&&a[2],n.abrupt("return",r.con.send("setAddr",[e,t],o));case 2:case"end":return n.stop()}}),s)})))()}},{key:"setPubkey",value:function(e,t,a){var r=arguments,s=this;return c(n.mark((function o(){var i;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.length>3&&void 0!==r[3]&&r[3],n.abrupt("return",s.con.send("setPubkey",[e,t,a],i));case 2:case"end":return n.stop()}}),o)})))()}},{key:"setMultihash",value:function(e,t){var a=arguments,r=this;return c(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]&&a[2],n.abrupt("return",r.con.send("setMultihash",[e,t],o));case 2:case"end":return n.stop()}}),s)})))()}},{key:"getPubkey",value:function(e){var t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.con.call("pubkey",[e]));case 1:case"end":return a.stop()}}),a)})))()}},{key:"getMultihash",value:function(e){var t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.con.call("multihash",[e]));case 1:case"end":return a.stop()}}),a)})))()}}]),e}();t.default=u,e.exports=t.default},971:function(e){e.exports=JSON.parse('{"contractName":"PublicResolver","abi":[{"inputs":[{"name":"ensAddr","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"a","type":"address"}],"name":"AddrChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"hash","type":"bytes32"}],"name":"ContentChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"name","type":"string"}],"name":"NameChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":true,"name":"contentType","type":"uint256"}],"name":"ABIChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"x","type":"bytes32"},{"indexed":false,"name":"y","type":"bytes32"}],"name":"PubkeyChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"indexedKey","type":"string"},{"indexed":false,"name":"key","type":"string"}],"name":"TextChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"node","type":"bytes32"},{"indexed":false,"name":"hash","type":"bytes"}],"name":"MultihashChanged","type":"event"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"addr","type":"address"},{"name":"content","type":"bytes32"},{"name":"multihash","type":"bytes"},{"name":"x","type":"bytes32"},{"name":"y","type":"bytes32"},{"name":"name","type":"string"}],"name":"setAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"getAll","outputs":[{"name":"addr","type":"address"},{"name":"content","type":"bytes32"},{"name":"multihash","type":"bytes"},{"name":"x","type":"bytes32"},{"name":"y","type":"bytes32"},{"name":"name","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"addr","type":"address"}],"name":"setAddr","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"hash","type":"bytes32"}],"name":"setContent","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"hash","type":"bytes"}],"name":"setMultihash","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"name","type":"string"}],"name":"setName","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"contentType","type":"uint256"},{"name":"data","type":"bytes"}],"name":"setABI","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"x","type":"bytes32"},{"name":"y","type":"bytes32"}],"name":"setPubkey","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"node","type":"bytes32"},{"name":"key","type":"string"},{"name":"value","type":"string"}],"name":"setText","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"},{"name":"key","type":"string"}],"name":"text","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"pubkey","outputs":[{"name":"x","type":"bytes32"},{"name":"y","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"content","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"multihash","outputs":[{"name":"","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"bytes32"}],"name":"addr","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"}]}')},973:function(e,t,a){"use strict";var n=a(20),r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(119));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(a(252)).default),c=function e(t){r(this,e),this.address=t.address||null,this.publicKey=t.publicKey||null,this.privateKey=t.privateKey||null},u=function(){function e(){r(this,e)}return n(e,[{key:"generate",value:function(e){var t=this;return new Promise((function(a,n){setTimeout((function(){var n=i.eth.accounts.create(),r=new c({address:n.address.toLowerCase(),publicKey:s.default.privateToPublicKey(n.privateKey),privateKey:n.privateKey});t.wallet=r,t.walletV3=i.eth.accounts.encrypt(n.privateKey,e),a(t)}))}))}},{key:"fromJSON",value:function(e,t){return new Promise((function(a,n){try{var r=i.eth.accounts.decrypt(e,t);a(new c({address:r.address.toLowerCase(),publicKey:s.default.privateToPublicKey(r.privateKey),privateKey:r.privateKey}))}catch(o){if("Key derivation failed - possibly wrong passphrase"!==o.message)throw new Error(o);n(!1)}}))}},{key:"encrypt",value:function(e,t){return new Promise((function(a,n){try{var r=i.eth.accounts.encrypt(e,t);a(JSON.stringify(r))}catch(s){throw new Error(s)}}))}}]),e}();t.default=u,e.exports=t.default},974:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=a(82),c=(o=a(420))&&o.__esModule?o:{default:o};function u(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){u(s,n,r,o,i,"next",e)}function i(e){u(s,n,r,o,i,"throw",e)}o(void 0)}))}}var d=function(){function e(t){r(this,e),this.config=t,this.web3=this.config.web3,this.gasPrice=(0,i.toWei)(t.gasPrice.toString(),"gwei")}return s(e,[{key:"encodeFeedLocationHash",value:function(e,t){return e+t.substr(42,66)}},{key:"subdomainNameHashToFeedLocationHash",value:function(e){return e.substr(42,66)}},{key:"decodeFeedLocationHash",value:function(e){return{address:e.substring(0,42),topic:e.substr(42,66)}}},{key:"newInboxFeed",value:function(e,t,a,r,s,o){var i=this;return f(n.mark((function t(){var u;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new c.default(e,i.config).at(r);case 2:return u=t.sent,t.abrupt("return",u.set(o,a,s));case 4:case"end":return t.stop()}}),t)})))()}},{key:"getInboxFeed",value:function(e,t,a,r){var s=this;return f(n.mark((function t(){var o;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new c.default(e,s.config).at(a);case 2:return o=t.sent,t.abrupt("return",o.get(r));case 4:case"end":return t.stop()}}),t)})))()}},{key:"getInboxFeeds",value:function(e,t,a){var r=this;return f(n.mark((function s(){var o;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new c.default(e,r.config).at(t);case 2:return o=n.sent,n.abrupt("return",o.get(a));case 4:case"end":return n.stop()}}),s)})))()}}]),e}();t.default=d,e.exports=t.default},991:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(992);function i(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,c,"next",e)}function c(e){i(s,n,r,o,c,"throw",e)}o(void 0)}))}}var u=function(){function e(t){r(this,e);var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.account=t,this.contractAddress=a,this.con=!1,!1===a?this.deploy():(this.con=t.getContract(o.abi,a),this)}return s(e,[{key:"deploy",value:function(){var e=this;return c(n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.account.deployContract(o.abi,o.bytecode);case 2:return e.con=t.sent,e.contractAddress=e.con.contractAddress,t.next=6,e.con.send("init",[],!0);case 6:return t.sent,t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})))()}},{key:"getRoots",value:function(){var e=arguments,t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],a.abrupt("return",t.con.call("getRoots",[]));case 2:case"end":return a.stop()}}),a)})))()}}]),e}();t.default=u,e.exports=t.default},992:function(e){e.exports=JSON.parse('{"contractName":"Multibox","abi":[{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function","signature":"0x8da5cb5b"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor","signature":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"a","type":"address"}],"name":"Log","type":"event","signature":"0xb8a00d6d8ca1be30bfec34d8f97e55f0f0fd9eeb7fb46e030516363d4cfe1ad6"},{"anonymous":false,"inputs":[],"name":"Initialized","type":"event","signature":"0x5daa87a0e9463431830481fd4b6e3403442dfb9a12b9c07597e9f61d50b633c8"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0xa6f9dae1"},{"constant":false,"inputs":[],"name":"init","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0xe1c7392a"},{"constant":false,"inputs":[{"name":"whoHasReadWriteRights","type":"address"}],"name":"createRoot","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0x22fb78a9"},{"constant":true,"inputs":[],"name":"getRoots","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function","signature":"0x35a5e06d"},{"constant":true,"inputs":[],"name":"getRootsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function","signature":"0x9423fc6e"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getRootAt","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function","signature":"0xc7fb2dc7"},{"constant":false,"inputs":[{"name":"kvt","type":"address"}],"name":"addRoot","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0xda8bb7c7"},{"constant":false,"inputs":[{"name":"index","type":"uint256"}],"name":"removeRoot","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0x38af30b0"},{"constant":false,"inputs":[{"name":"index","type":"uint256"}],"name":"revokeRoot","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0x3466fda5"},{"constant":false,"inputs":[],"name":"removeFunds","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0xfeac51f5"},{"constant":false,"inputs":[{"name":"kvt","type":"address"},{"name":"nodeId","type":"bytes32"}],"name":"requestAccess","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0xa57ae0dc"},{"constant":false,"inputs":[{"name":"dr","type":"address"}],"name":"allowAccess","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function","signature":"0xc4a85bc1"},{"constant":true,"inputs":[{"name":"dr","type":"address"}],"name":"amountAvailable","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function","signature":"0x9c60b07e"},{"constant":true,"inputs":[],"name":"getDataRequests","outputs":[{"name":"requests","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function","signature":"0xb4358602"}],"bytecode":"0x608060405234801561001057600080fd5b5060008054600160a060020a03191633179055613aba806100326000396000f3fe608060405260043610620000d15763ffffffff60e060020a60003504166322fb78a98114620000d35780633466fda5146200012657806335a5e06d146200016657806338af30b014620001d05780638da5cb5b14620001fe5780639423fc6e14620002165780639c60b07e146200022e578063a57ae0dc1462000265578063a6f9dae114620002a2578063b435860214620002d9578063c4a85bc114620002f1578063c7fb2dc71462000328578063da8bb7c71462000356578063e1c7392a146200038d578063feac51f514620003a5575b005b348015620000e057600080fd5b506200010a60048036036020811015620000f957600080fd5b5035600160a060020a0316620003bd565b60408051600160a060020a039092168252519081900360200190f35b3480156200013357600080fd5b5062000154600480360360208110156200014c57600080fd5b503562000626565b60408051918252519081900360200190f35b3480156200017357600080fd5b506200017e620007a2565b60408051602080825283518183015283519192839290830191858101910280838360005b83811015620001bc578181015183820152602001620001a2565b505050509050019250505060405180910390f35b348015620001dd57600080fd5b506200015460048036036020811015620001f657600080fd5b503562000807565b3480156200020b57600080fd5b506200010a620008df565b3480156200022357600080fd5b5062000154620008ee565b3480156200023b57600080fd5b5062000154600480360360208110156200025457600080fd5b5035600160a060020a0316620008f4565b3480156200027257600080fd5b506200010a600480360360408110156200028b57600080fd5b50600160a060020a03813516906020013562000901565b348015620002af57600080fd5b50620000d160048036036020811015620002c857600080fd5b5035600160a060020a031662000b95565b348015620002e657600080fd5b506200017e62000bcf565b348015620002fe57600080fd5b50620000d1600480360360208110156200031757600080fd5b5035600160a060020a031662000c31565b3480156200033557600080fd5b506200010a600480360360208110156200034e57600080fd5b503562000e53565b3480156200036357600080fd5b506200010a600480360360208110156200037c57600080fd5b5035600160a060020a031662000e80565b3480156200039a57600080fd5b506200010a62000f5d565b348015620003b257600080fd5b50620000d162000fcc565b600080548190600160a060020a0316620003d662001023565b600160a060020a03909116815260405190819003602001906000f08015801562000404573d6000803e3d6000fd5b506001549091501515620005155780600160a060020a03166390d1040e82600160a060020a031663bfbd3c1f6040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156200045e57600080fd5b505afa15801562000473573d6000803e3d6000fd5b505050506040513d60208110156200048a57600080fd5b50516040805160e060020a63ffffffff85160281526004810192909252600160a060020a0387166024830152600360448301525160648083019260209291908290030181600087803b158015620004e057600080fd5b505af1158015620004f5573d6000803e3d6000fd5b505050506040513d60208110156200050c57600080fd5b50620006129050565b80600160a060020a03166390d1040e82600160a060020a031663bfbd3c1f6040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156200056157600080fd5b505afa15801562000576573d6000803e3d6000fd5b505050506040513d60208110156200058d57600080fd5b50516040805160e060020a63ffffffff85160281526004810192909252600160a060020a0387166024830152600260448301525160648083019260209291908290030181600087803b158015620005e357600080fd5b505af1158015620005f8573d6000803e3d6000fd5b505050506040513d60208110156200060f57600080fd5b50505b6200061d8162000e80565b9150505b919050565b6000806001838154811015156200063957fe5b600091825260209091200154600160a060020a031690508215156200066357600091505062000621565b33600160a060020a031681600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b158015620006aa57600080fd5b505afa158015620006bf573d6000803e3d6000fd5b505050506040513d6020811015620006d657600080fd5b5051600160a060020a03161415620006f357600091505062000621565b6001805460001981019081106200070657fe5b60009182526020909120015460018054600160a060020a0390921691859081106200072d57fe5b60009182526020909120018054600160a060020a031916600160a060020a03929092169190911790556001805460001981019081106200076957fe5b60009182526020909120018054600160a060020a031916905560018054906200079790600019830162001034565b505060015492915050565b60606001805480602002602001604051908101604052809291908181526020018280548015620007fc57602002820191906000526020600020905b8154600160a060020a03168152600190910190602001808311620007dd575b505050505090505b90565b60008054600160a060020a031633146200082057600080fd5b811515620008315750600062000621565b6001805460001981019081106200084457fe5b60009182526020909120015460018054600160a060020a0390921691849081106200086b57fe5b60009182526020909120018054600160a060020a031916600160a060020a0392909216919091179055600180546000198101908110620008a757fe5b60009182526020909120018054600160a060020a03191690556001805490620008d590600019830162001034565b5050600154919050565b600054600160a060020a031681565b60015490565b600160a060020a03163190565b60008054604080517f8f1ac17500000000000000000000000000000000000000000000000000000000815260048101859052600160a060020a03928316602482015290518392839290871691638f1ac17591604480820192602092909190829003018186803b1580156200097457600080fd5b505afa15801562000989573d6000803e3d6000fd5b505050506040513d6020811015620009a057600080fd5b5051604080517f8da5cb5b00000000000000000000000000000000000000000000000000000000815290519192503091638da5cb5b91600480820192602092909190829003018186803b158015620009f757600080fd5b505afa15801562000a0c573d6000803e3d6000fd5b505050506040513d602081101562000a2357600080fd5b5051604080517f8da5cb5b0000000000000000000000000000000000000000000000000000000081529051600160a060020a0392831692881691638da5cb5b916004808301926020929190829003018186803b15801562000a8357600080fd5b505afa15801562000a98573d6000803e3d6000fd5b505050506040513d602081101562000aaf57600080fd5b5051600160a060020a03161462000ac95750905062000b8f565b801562000b8b573330868662000ade62001060565b600160a060020a039485168152928416602084015292166040808301919091526060820192909252905190819003608001906000f08015801562000b26573d6000803e3d6000fd5b506002805460018101918290557f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace018054600160a060020a031916600160a060020a038416908117909155600090815260036020526040902055925062000b8f915050565b5090505b92915050565b600054600160a060020a0316331462000bad57600080fd5b60008054600160a060020a031916600160a060020a0392909216919091179055565b60606002805480602002602001604051908101604052809291908181526020018280548015620007fc57602002820191906000526020600020908154600160a060020a03168152600190910190602001808311620007dd575050505050905090565b600054600160a060020a0316331462000c4957600080fd5b600160a060020a038116600090815260036020526040902054801562000df75781600160a060020a03166312424e3f6040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801562000ca857600080fd5b505af115801562000cbd573d6000803e3d6000fd5b505050506040513d602081101562000cd457600080fd5b50511562000df757600160a060020a03821660009081526003602052604081205560028054600019810190811062000d0857fe5b60009182526020909120015460028054600160a060020a0390921691600019840190811062000d3357fe5b60009182526020909120018054600160a060020a031916600160a060020a039290921691909117905560028054600019810190811062000d6f57fe5b60009182526020909120018054600160a060020a0319169055600280549062000d9d90600019830162001034565b5081600160a060020a0316634bb278f36040518163ffffffff1660e060020a028152600401600060405180830381600087803b15801562000ddd57600080fd5b505af115801562000df2573d6000803e3d6000fd5b505050505b81600160a060020a031663e60955946040518163ffffffff1660e060020a028152600401600060405180830381600087803b15801562000e3657600080fd5b505af115801562000e4b573d6000803e3d6000fd5b505050505050565b600060018281548110151562000e6557fe5b600091825260209091200154600160a060020a031692915050565b600033600160a060020a031682600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b15801562000ec957600080fd5b505afa15801562000ede573d6000803e3d6000fd5b505050506040513d602081101562000ef557600080fd5b5051600160a060020a03161462000f0f5750600062000621565b506001805480820182556000919091527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6018054600160a060020a031916600160a060020a03831617905590565b6001546000908190151562000fc75760005462000f8390600160a060020a0316620003bd565b60005460408051600160a060020a039092168252519192507fb8a00d6d8ca1be30bfec34d8f97e55f0f0fd9eeb7fb46e030516363d4cfe1ad6919081900360200190a15b905090565b600054600160a060020a0316331462000fe457600080fd5b60008054604051600160a060020a0390911691303180156108fc02929091818181858888f1935050505015801562001020573d6000803e3d6000fd5b50565b60405161215f806200109383390190565b8154818355818111156200105b576000838152602090206200105b91810190830162001071565b505050565b60405161089d80620031f283390190565b6200080491905b808211156200108e576000815560010162001078565b509056fe60806040523480156200001157600080fd5b506040516020806200215f833981018060405260208110156200003357600080fd5b505160008054600160a060020a031916600160a060020a03831617815562000085907fc7f5bbf5fe95923f0691c94f666ac3dfed12456cd33bd018e7620c3d93edd5a6640100000000620000c9810204565b6003819055620000bf907f23e642b7242469a5e3184a6566020c815689149967703a98c0affc14b9ca9b28640100000000620001e9810204565b600455506200063b565b6000620000df836401000000006200032e810204565b158015620000ed5750600083115b15620000f857600080fd5b6200010c826401000000006200032e810204565b156200011757600080fd5b50806200012362000597565b6040810184905260018152600084111562000153576200014d848364010000000062000343810204565b60208201525b6000828152600760209081526040918290208351815460ff191690151517815583820151600182015591830151600283015560608301518051849392620001a2926005850192910190620005cb565b5060808201518051620001c0916006840191602090910190620005cb565b5060a08201518051620001de916007840191602090910190620005cb565b505050505b92915050565b60008262000200816401000000006200032e810204565b15156200020c57506003545b62000221813364010000000062000369810204565b15156200022d57506004545b62000241836401000000006200032e810204565b1562000278576200025c833364010000000062000369810204565b15156200026e575060009050620001e3565b82915050620001e3565b6200028d813364010000000062000454810204565b15156200029f575060009050620001e3565b6000620002b68285640100000000620000c9810204565b6005805460018101918290557f036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db00186905560008681526006602052604081209190915554909150600160a060020a03163314620003265762000324813360026401000000006200051e810204565b505b949350505050565b60009081526007602052604090205460ff1690565b600091825260076020818152604084209091018054600181018255908452922082015590565b60006200037f836401000000006200032e810204565b15156200038f57506000620001e3565b600160a060020a038216331415620003aa57506001620001e3565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415620003e7576000915050620001e3565b6000808052600380830160205260409091205414156200040c576000915050620001e3565b600080805260038201602052604081205413156200042f576001915050620001e3565b600160a060020a03831660009081526003909101602052604081205413905092915050565b60006200046a836401000000006200032e810204565b15156200047a57506000620001e3565b600160a060020a0382163314156200049557506001620001e3565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415620004d2576000915050620001e3565b600080805260038201602052604090205460011215620004f7576001915050620001e3565b600160a060020a038316600090815260039091016020526040902054600112905092915050565b60008054600160a060020a03848116911614156200053f5750600262000590565b62000554843364010000000062000454810204565b151562000565575060001962000590565b506000838152600760209081526040808320600160a060020a03861684526003019091529020819055805b9392505050565b6040805160c0810182526000808252602082018190529181019190915260608082018190526080820181905260a082015290565b82805482825590600052602060002090810192821562000609579160200282015b8281111562000609578251825591602001919060010190620005ec565b50620006179291506200061b565b5090565b6200063891905b8082111562000617576000815560010162000622565b90565b611b14806200064b6000396000f3fe6080604052600436106101f75763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416628614ff81146101f95780631a0925411461023b5780631a8283e41461025057806322c1064a146102d05780632947ef381461031a57806339bf397e1461032f5780634d9b3735146103445780635ba5342a1461035957806362ecbd351461036e57806362fbdb76146103a7578063640a7f88146103bc5780637284e416146103e657806372965b30146103fb578063790c38b01461042b5780637b01127c1461045b578063821f32ce1461048b57806389f5df5d146104b55780638da5cb5b146104df5780638f1ac1751461051057806390d1040e1461054957806398aca92214610588578063a09e3d0a1461059d578063a24fa791146105c7578063a60efc65146105f1578063a6f9dae11461061b578063ae4c61611461064e578063b1cfda8814610678578063b7471dd0146106ae578063ba75d806146106de578063bfbd3c1f14610708578063cd98de851461071d578063ceef5f0214610756578063cf25611e1461079f578063d37684ff146107cf578063d4c602f1146107f9578063e073546b14610829578063e29581aa14610853578063f12a796b14610868578063f7260d3e14610892578063f7fed313146108a7578063fa8016441461096a575b005b34801561020557600080fd5b506102296004803603604081101561021c57600080fd5b50803590602001356109a6565b60408051918252519081900360200190f35b34801561024757600080fd5b506102296109d7565b34801561025c57600080fd5b506102806004803603604081101561027357600080fd5b50803590602001356109de565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156102bc5781810151838201526020016102a4565b505050509050019250505060405180910390f35b3480156102dc57600080fd5b50610306600480360360608110156102f357600080fd5b5080359060208101359060400135610a61565b604080519115158252519081900360200190f35b34801561032657600080fd5b50610229610b3d565b34801561033b57600080fd5b50610229610b43565b34801561035057600080fd5b506101f7610b62565b34801561036557600080fd5b50610229610bb7565b34801561037a57600080fd5b506103066004803603604081101561039157600080fd5b5080359060200135600160a060020a0316610bbd565b3480156103b357600080fd5b50610229610c72565b3480156103c857600080fd5b50610229600480360360208110156103df57600080fd5b5035610c78565b3480156103f257600080fd5b50610229610cab565b34801561040757600080fd5b506102296004803603604081101561041e57600080fd5b5080359060200135610cb1565b34801561043757600080fd5b506102296004803603604081101561044e57600080fd5b5080359060200135610ce8565b34801561046757600080fd5b506102296004803603604081101561047e57600080fd5b5080359060200135610dd7565b34801561049757600080fd5b50610229600480360360208110156104ae57600080fd5b5035610e13565b3480156104c157600080fd5b506101f7600480360360208110156104d857600080fd5b5035610e25565b3480156104eb57600080fd5b506104f4610e41565b60408051600160a060020a039092168252519081900360200190f35b34801561051c57600080fd5b506103066004803603604081101561053357600080fd5b5080359060200135600160a060020a0316610e50565b34801561055557600080fd5b506102296004803603606081101561056c57600080fd5b50803590600160a060020a036020820135169060400135610f07565b34801561059457600080fd5b50610229610f6e565b3480156105a957600080fd5b50610229600480360360208110156105c057600080fd5b5035610f74565b3480156105d357600080fd5b50610306600480360360208110156105ea57600080fd5b5035610f8a565b3480156105fd57600080fd5b506102296004803603602081101561061457600080fd5b5035610f9f565b34801561062757600080fd5b506101f76004803603602081101561063e57600080fd5b5035600160a060020a0316610fcf565b34801561065a57600080fd5b506102806004803603602081101561067157600080fd5b5035611015565b34801561068457600080fd5b506103066004803603606081101561069b57600080fd5b5080359060208101359060400135611093565b3480156106ba57600080fd5b50610229600480360360408110156106d157600080fd5b50803590602001356110d8565b3480156106ea57600080fd5b506102296004803603602081101561070157600080fd5b503561110f565b34801561071457600080fd5b50610229611147565b34801561072957600080fd5b506103066004803603604081101561074057600080fd5b5080359060200135600160a060020a031661114d565b34801561076257600080fd5b506107866004803603604081101561077957600080fd5b5080359060200135611223565b6040805192835260208301919091528051918290030190f35b3480156107ab57600080fd5b50610306600480360360408110156107c257600080fd5b50803590602001356112a3565b3480156107db57600080fd5b50610280600480360360208110156107f257600080fd5b50356113f6565b34801561080557600080fd5b506103066004803603604081101561081c57600080fd5b508035906020013561145b565b34801561083557600080fd5b506101f76004803603602081101561084c57600080fd5b50356115a6565b34801561085f57600080fd5b506102806115c2565b34801561087457600080fd5b506103066004803603602081101561088b57600080fd5b5035611632565b34801561089e57600080fd5b50610229611728565b3480156108b357600080fd5b506108d1600480360360208110156108ca57600080fd5b503561172e565b604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156109155781810151838201526020016108fd565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561095457818101518382015260200161093c565b5050505090500194505050505060405180910390f35b34801561097657600080fd5b506103066004803603608081101561098d57600080fd5b5080359060208101359060408101359060600135611819565b60008281526007602081905260408220018054839081106109c357fe5b906000526020600020015490505b92915050565b6002545b90565b600054606090600160a060020a031633146109f857600080fd5b600082815260086020908152604080832086845282529182902080548351818402810184019094528084529091830182828015610a5457602002820191906000526020600020905b815481526020019060010190808311610a40575b5050505050905092915050565b6000610a6d8433610e50565b1515610a7b57506000610b36565b600084815260076020908152604080832086845260048101909252909120541515610b095760058101805460018181018355600092835260208084209092018790556006840180548083018255908452828420018690558683526004909301815260408083208690556008825280832088845282528220805480850182559083529120018390559050610b36565b50506000828152600860209081526040808320868452825282208054600181018255908352908220018290555b9392505050565b60035490565b60008054600160a060020a03163314610b5b57600080fd5b5060055490565b600054600160a060020a03163314610b7957600080fd5b60008054604051600160a060020a0390911691303180156108fc02929091818181858888f19350505050158015610bb4573d6000803e3d6000fd5b50565b60035481565b6000610bc883610f8a565b1515610bd6575060006109d1565b600160a060020a038216331415610bef575060016109d1565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415610c2a5760009150506109d1565b600080805260038281016020526040909120541315610c4d5760019150506109d1565b600160a060020a03831660009081526003918201602052604090205413905092915050565b60045481565b6000610c84823361114d565b1515610c9257506000610ca6565b506000818152600760205260409020600601545b919050565b60025481565b6000610cbd833361114d565b1515610ccb575060006109d1565b60008381526007602052604090206006018054839081106109c357fe5b600082610cf481610f8a565b1515610cff57506003545b610d09813361114d565b1515610d1457506004545b610d1d83610f8a565b15610d4557610d2c833361114d565b1515610d3c5750600090506109d1565b829150506109d1565b610d4f8133610e50565b1515610d5f5750600090506109d1565b6000610d6b828561190e565b6005805460018101918290557f036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db00186905560008681526006602052604081209190915554909150600160a060020a03163314610dcf57610dcd81336002610f07565b505b949350505050565b6000610de3833361114d565b1515610df1575060006109d1565b5060009182526007602090815260408084209284526004909201905290205490565b60009081526006602052604090205490565b600054600160a060020a03163314610e3c57600080fd5b600255565b600054600160a060020a031681565b6000610e5b83610f8a565b1515610e69575060006109d1565b600160a060020a038216331415610e82575060016109d1565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415610ebd5760009150506109d1565b600080805260038201602052604090205460011215610ee05760019150506109d1565b600160a060020a038316600090815260039091016020526040902054600112905092915050565b60008054600160a060020a0384811691161415610f2657506002610b36565b610f308433610e50565b1515610f3f5750600019610b36565b506000928352600760209081526040808520600160a060020a0394909416855260039093019052912081905590565b60015490565b6000908152600760208190526040909120015490565b60009081526007602052604090205460ff1690565b6000610fab823361114d565b1515610fb957506000610ca6565b5060009081526007602052604090206005015490565b600054600160a060020a03163314610fe657600080fd5b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b606080611022833361114d565b151561102f579050610ca6565b6000838152600760209081526040918290206005018054835181840281018401909452808452909183018282801561108657602002820191906000526020600020905b815481526020019060010190808311611072575b5050505050915050919050565b600061109e84610f8a565b15156110cd57600454600054600160a060020a03163314156110bf57506003545b6110c98186610ce8565b9450505b610dcf848484610a61565b60006110e4833361114d565b15156110f2575060006109d1565b60008381526007602052604090206005018054839081106109c357fe5b60008054600160a060020a0316331461112757600080fd5b600580548390811061113557fe5b90600052602060002001549050919050565b60045490565b600061115883610f8a565b1515611166575060006109d1565b600160a060020a03821633141561117f575060016109d1565b6000838152600760209081526040808320600160a060020a0386168452600381019092529091205460001914156111ba5760009150506109d1565b6000808052600380830160205260409091205414156111dd5760009150506109d1565b600080805260038201602052604081205413156111fe5760019150506109d1565b600160a060020a03831660009081526003909101602052604081205413905092915050565b600080611230843361114d565b15156112415750600090508061129c565b600084815260076020526040902060050180548490811061125e57fe5b9060005260206000200154600760008681526020019081526020016000206006018481548110151561128c57fe5b9060005260206000200154915091505b9250929050565b60006112af8333610e50565b15156112bd575060006109d1565b6000838152600760205260408120600581018054919291859081106112de57fe5b60009182526020909120015490508015156112f857600080fd5b6000818152600483016020526040812055600582018054600019810190811061131d57fe5b9060005260206000200154826005018581548110151561133957fe5b600091825260209091200155600582018054600019810190811061135957fe5b600091825260208220015560058201805490611379906000198301611a26565b50600682018054600019810190811061138e57fe5b906000526020600020015482600601858154811015156113aa57fe5b60009182526020909120015560068201805460001981019081106113ca57fe5b6000918252602082200155600682018054906113ea906000198301611a26565b50600195945050505050565b60008181526007602081815260409283902090910180548351818402810184019094528084526060939283018282801561144f57602002820191906000526020600020905b81548152602001906001019080831161143b575b50505050509050919050565b60006114678333610e50565b1515611475575060006109d1565b600083815260076020819052604090912090810180546114ab91908590811061149a57fe5b906000526020600020015433610e50565b15156114bb5760009150506109d1565b600780820180546000198101926000929091839190859081106114da57fe5b90600052602060002001548152602001908152602001600020600101549050826007018281548110151561150a57fe5b9060005260206000200154836007018681548110151561152657fe5b6000918252602090912001556007830180548390811061154257fe5b600091825260208220015560078301805490611562906000198301611a26565b508060076000856007018581548110151561157957fe5b90600052602060002001548152602001908152602001600020600101819055506001935050505092915050565b600054600160a060020a031633146115bd57600080fd5b600155565b600054606090600160a060020a031633146115dc57600080fd5b600580548060200260200160405190810160405280929190818152602001828054801561162857602002820191906000526020600020905b815481526020019060010190808311611614575b5050505050905090565b600061163e8233610e50565b151561164c57506000610ca6565b60008281526007602052604090206002810154600182015461166e919061145b565b1561171f57600083815260066020526040902054801561171d576000848152600760209081526040808320805460ff1916905560069091528120556005805460001981019081106116bb57fe5b90600052602060002001546005828154811015156116d557fe5b6000918252602090912001556005805460001981019081106116f357fe5b60009182526020822001556005805490611711906000198301611a26565b50600192505050610ca6565b505b50600092915050565b60015481565b606080606061173d843361114d565b151561174d579150819050611814565b600084815260076020908152604091829020600501805483518184028101840190945280845290918301828280156117a457602002820191906000526020600020905b815481526020019060010190808311611790575b505050505092506007600085815260200190815260200160002060060180548060200260200160405190810160405280929190818152602001828054801561180b57602002820191906000526020600020905b8154815260200190600101908083116117f7575b50505050509150505b915091565b60006118258533610bbd565b151561183357506000610dcf565b60008581526007602052604090206006810154851015611902576000816005018681548110151561186057fe5b600091825260208083209091015480835260048501909152604082209190915560058301805491925086918890811061189557fe5b90600052602060002001819055508382600601878154811015156118b557fe5b600091825260208083209091019290925586815260049093018152604080842086905560088252808420898552825283208054600181810183559185529190932001849055509050610dcf565b50600095945050505050565b600061191983610f8a565b1580156119265750600083115b1561193057600080fd5b61193982610f8a565b1561194357600080fd5b508061194d611a4f565b604081018490526001815260008411156119715761196b8483611a00565b60208201525b6000828152600760209081526040918290208351815460ff1916901515178155838201516001820155918301516002830155606083015180518493926119be926005850192910190611a83565b50608082015180516119da916006840191602090910190611a83565b5060a082015180516119f6916007840191602090910190611a83565b5050505092915050565b600091825260076020818152604084209091018054600181018255908452922082015590565b815481835581811115611a4a57600083815260209020611a4a918101908301611ace565b505050565b6040805160c0810182526000808252602082018190529181019190915260608082018190526080820181905260a082015290565b828054828255906000526020600020908101928215611abe579160200282015b82811115611abe578251825591602001919060010190611aa3565b50611aca929150611ace565b5090565b6109db91905b80821115611aca5760008155600101611ad456fea165627a7a72305820a94a72dfbc557790c0914274c183f9b07a846099e80eac55353f2b258403c4470029608060405234801561001057600080fd5b5060405160808061089d8339810180604052608081101561003057600080fd5b5080516020820151604083015160609093015160048054600160a060020a0319908116600160a060020a039586161790915560008054821693851693909317835560018054909116939094169290921790925560025561080790819061009690396000f3fe6080604052600436106100745763ffffffff60e060020a6000350416630205217e8114610079578063043b0496146100aa57806312120511146100c157806312424e3f1461010057806345f9a3b5146101295780634bb278f314610153578063d0e30db014610168578063e609559414610170575b600080fd5b34801561008557600080fd5b5061008e610185565b60408051600160a060020a039092168252519081900360200190f35b3480156100b657600080fd5b506100bf610228565b005b3480156100cd57600080fd5b5061008e600480360360808110156100e457600080fd5b5080359060ff602082013516906040810135906060013561024d565b34801561010c57600080fd5b50610115610410565b604080519115158252519081900360200190f35b34801561013557600080fd5b506101156004803603602081101561014c57600080fd5b5035610573565b34801561015f57600080fd5b506100bf61060e565b6100bf610725565b34801561017c57600080fd5b506100bf61074b565b60008060009054906101000a9004600160a060020a0316600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156101d757600080fd5b505afa1580156101eb573d6000803e3d6000fd5b505050506040513d602081101561020157600080fd5b5051600160a060020a0316331461021757600080fd5b50600454600160a060020a03165b90565b600454600160a060020a0316331461023f57600080fd5b600454600160a060020a0316ff5b604080518082018252601c8082527f19457468657265756d205369676e6564204d6573736167653a0a33320000000060208084019182529351600094859385938b939092019182918083835b602083106102b85780518252601f199092019160209182019101610299565b51815160209384036101000a600019018019909216911617905292019384525060408051808503815284830180835281519184019190912060009182905282860180845281905260ff8d166060870152608086018c905260a086018b90529151919650945060019360c08082019450601f19830192918290030190855afa158015610347573d6000803e3d6000fd5b505060408051601f198101516001547f8da5cb5b0000000000000000000000000000000000000000000000000000000083529251909450600160a060020a039092169250638da5cb5b916004808301926020929190829003018186803b1580156103b057600080fd5b505afa1580156103c4573d6000803e3d6000fd5b505050506040513d60208110156103da57600080fd5b5051600160a060020a03828116911614156103fd576103f7610410565b50610405565b610405610228565b505050949350505050565b600154600254604080517fa24fa791000000000000000000000000000000000000000000000000000000008152600481019290925251600092600160a060020a03169163a24fa791916024808301926020929190829003018186803b15801561047857600080fd5b505afa15801561048c573d6000803e3d6000fd5b505050506040513d60208110156104a257600080fd5b50511561056d576001805460025460048054604080517f90d1040e00000000000000000000000000000000000000000000000000000000815292830193909352600160a060020a03908116602483015260448201949094529051600093909216916390d1040e9160648082019260209290919082900301818787803b15801561052a57600080fd5b505af115801561053e573d6000803e3d6000fd5b505050506040513d602081101561055457600080fd5b50519050600181141561056b576001915050610225565b505b50600090565b60008060009054906101000a9004600160a060020a0316600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105c557600080fd5b505afa1580156105d9573d6000803e3d6000fd5b505050506040513d60208110156105ef57600080fd5b5051600160a060020a0316331461060557600080fd5b60039190915590565b6000809054906101000a9004600160a060020a0316600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b15801561065e57600080fd5b505afa158015610672573d6000803e3d6000fd5b505050506040513d602081101561068857600080fd5b5051600160a060020a0316331461069e57600080fd5b6000809054906101000a9004600160a060020a0316600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156106ee57600080fd5b505afa158015610702573d6000803e3d6000fd5b505050506040513d602081101561071857600080fd5b5051600160a060020a0316ff5b600454600160a060020a0316331461073c57600080fd5b6000341161074957600080fd5b565b6000809054906101000a9004600160a060020a0316600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b15801561079b57600080fd5b505afa1580156107af573d6000803e3d6000fd5b505050506040513d60208110156107c557600080fd5b5051600160a060020a0316331461023f57600080fdfea165627a7a723058204f8ac421dfe9a1db32b4bee74de5e72757ec8ef53ac5fbc0c0d7f019414df8580029a165627a7a72305820d8a29302a7bdea4d92f53d443cf9feab37d479ad1cbce362875f039dcfe820d20029"}')},993:function(e,t,a){"use strict";var n=a(17),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(994);function i(e,t,a,n,r,s,o){try{var i=e[s](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,c,"next",e)}function c(e){i(s,n,r,o,c,"throw",e)}o(void 0)}))}}var u=function(){function e(t,a){r(this,e),this.account=t,this.contractAddress=a,this.con=t.getContract(o.abi,a)}return s(e,[{key:"getSharedId",value:function(){var e=arguments,t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],a.abrupt("return",t.con.call("getSharedId",[]));case 2:case"end":return a.stop()}}),a)})))()}},{key:"getRootId",value:function(){var e=arguments,t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],a.abrupt("return",t.con.call("getRootId",[]));case 2:case"end":return a.stop()}}),a)})))()}},{key:"setKeyValue",value:function(e,t,a){var r=this;return c(n.mark((function s(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.con.send("setKeyValue",[e,t,a],!0));case 1:case"end":return n.stop()}}),s)})))()}},{key:"getKeyValue",value:function(e,t){var a=this;return c(n.mark((function r(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",a.con.call("getValue",[e,t]));case 1:case"end":return n.stop()}}),r)})))()}},{key:"getKeyValues",value:function(e){var t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.con.call("getKeysValues",[e]));case 1:case"end":return a.stop()}}),a)})))()}},{key:"addChildNode",value:function(e,t){var a=this;return c(n.mark((function r(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",a.con.send("addChildNode",[e,t]));case 1:case"end":return n.stop()}}),r)})))()}},{key:"getChildren",value:function(e){var t=this;return c(n.mark((function a(){return n.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.con.call("getChildren",[e]));case 1:case"end":return a.stop()}}),a)})))()}}]),e}();t.default=u,e.exports=t.default},994:function(e){e.exports=JSON.parse('{"contractName":"KeyValueTree","abi":[{"constant":true,"inputs":[],"name":"rootNodeId","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"sharedNodeId","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"description","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"receiver","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_owner","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getReceiver","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getDescription","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newReceiver","type":"bytes32"}],"name":"setReceiver","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newDescription","type":"bytes32"}],"name":"setDescription","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getRootId","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getSharedId","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"isNode","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getChildCount","outputs":[{"name":"childCount","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getChildAt","outputs":[{"name":"childId","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getChildren","outputs":[{"name":"childrenodeId","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"removeChildAt","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"addr","type":"address"},{"name":"rights","type":"int256"}],"name":"setNodeAccess","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"addr","type":"address"}],"name":"canRead","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"addr","type":"address"}],"name":"canWrite","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"addr","type":"address"}],"name":"canOverwrite","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"deleteNode","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"parentNodeId","type":"bytes32"},{"name":"subNodeId","type":"bytes32"}],"name":"addChildNode","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"key","type":"bytes32"},{"name":"value","type":"bytes32"}],"name":"setKeyValue","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"key","type":"bytes32"},{"name":"value","type":"bytes32"}],"name":"writeKeyValue","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getKeysValues","outputs":[{"name":"keys","type":"bytes32[]"},{"name":"values","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getKeyValueAt","outputs":[{"name":"key","type":"bytes32"},{"name":"value","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getKeys","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getKeysCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getKeyAt","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"key","type":"bytes32"}],"name":"getValue","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getValuesCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getValueAt","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"},{"name":"key","type":"bytes32"},{"name":"newValue","type":"bytes32"}],"name":"overwriteKey","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"removeKeyAt","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"}],"name":"getNodesIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodeId","type":"bytes32"},{"name":"key","type":"bytes32"}],"name":"getNodeValuesForAKey","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getNodes","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getNodeCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"idx","type":"uint256"}],"name":"getNodeAt","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"getFunds","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x60806040523480156200001157600080fd5b506040516020806200215f833981018060405260208110156200003357600080fd5b505160008054600160a060020a031916600160a060020a03831617815562000085907fc7f5bbf5fe95923f0691c94f666ac3dfed12456cd33bd018e7620c3d93edd5a6640100000000620000c9810204565b6003819055620000bf907f23e642b7242469a5e3184a6566020c815689149967703a98c0affc14b9ca9b28640100000000620001e9810204565b600455506200063b565b6000620000df836401000000006200032e810204565b158015620000ed5750600083115b15620000f857600080fd5b6200010c826401000000006200032e810204565b156200011757600080fd5b50806200012362000597565b6040810184905260018152600084111562000153576200014d848364010000000062000343810204565b60208201525b6000828152600760209081526040918290208351815460ff191690151517815583820151600182015591830151600283015560608301518051849392620001a2926005850192910190620005cb565b5060808201518051620001c0916006840191602090910190620005cb565b5060a08201518051620001de916007840191602090910190620005cb565b505050505b92915050565b60008262000200816401000000006200032e810204565b15156200020c57506003545b62000221813364010000000062000369810204565b15156200022d57506004545b62000241836401000000006200032e810204565b1562000278576200025c833364010000000062000369810204565b15156200026e575060009050620001e3565b82915050620001e3565b6200028d813364010000000062000454810204565b15156200029f575060009050620001e3565b6000620002b68285640100000000620000c9810204565b6005805460018101918290557f036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db00186905560008681526006602052604081209190915554909150600160a060020a03163314620003265762000324813360026401000000006200051e810204565b505b949350505050565b60009081526007602052604090205460ff1690565b600091825260076020818152604084209091018054600181018255908452922082015590565b60006200037f836401000000006200032e810204565b15156200038f57506000620001e3565b600160a060020a038216331415620003aa57506001620001e3565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415620003e7576000915050620001e3565b6000808052600380830160205260409091205414156200040c576000915050620001e3565b600080805260038201602052604081205413156200042f576001915050620001e3565b600160a060020a03831660009081526003909101602052604081205413905092915050565b60006200046a836401000000006200032e810204565b15156200047a57506000620001e3565b600160a060020a0382163314156200049557506001620001e3565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415620004d2576000915050620001e3565b600080805260038201602052604090205460011215620004f7576001915050620001e3565b600160a060020a038316600090815260039091016020526040902054600112905092915050565b60008054600160a060020a03848116911614156200053f5750600262000590565b62000554843364010000000062000454810204565b151562000565575060001962000590565b506000838152600760209081526040808320600160a060020a03861684526003019091529020819055805b9392505050565b6040805160c0810182526000808252602082018190529181019190915260608082018190526080820181905260a082015290565b82805482825590600052602060002090810192821562000609579160200282015b8281111562000609578251825591602001919060010190620005ec565b50620006179291506200061b565b5090565b6200063891905b8082111562000617576000815560010162000622565b90565b611b14806200064b6000396000f3fe6080604052600436106101f75763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416628614ff81146101f95780631a0925411461023b5780631a8283e41461025057806322c1064a146102d05780632947ef381461031a57806339bf397e1461032f5780634d9b3735146103445780635ba5342a1461035957806362ecbd351461036e57806362fbdb76146103a7578063640a7f88146103bc5780637284e416146103e657806372965b30146103fb578063790c38b01461042b5780637b01127c1461045b578063821f32ce1461048b57806389f5df5d146104b55780638da5cb5b146104df5780638f1ac1751461051057806390d1040e1461054957806398aca92214610588578063a09e3d0a1461059d578063a24fa791146105c7578063a60efc65146105f1578063a6f9dae11461061b578063ae4c61611461064e578063b1cfda8814610678578063b7471dd0146106ae578063ba75d806146106de578063bfbd3c1f14610708578063cd98de851461071d578063ceef5f0214610756578063cf25611e1461079f578063d37684ff146107cf578063d4c602f1146107f9578063e073546b14610829578063e29581aa14610853578063f12a796b14610868578063f7260d3e14610892578063f7fed313146108a7578063fa8016441461096a575b005b34801561020557600080fd5b506102296004803603604081101561021c57600080fd5b50803590602001356109a6565b60408051918252519081900360200190f35b34801561024757600080fd5b506102296109d7565b34801561025c57600080fd5b506102806004803603604081101561027357600080fd5b50803590602001356109de565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156102bc5781810151838201526020016102a4565b505050509050019250505060405180910390f35b3480156102dc57600080fd5b50610306600480360360608110156102f357600080fd5b5080359060208101359060400135610a61565b604080519115158252519081900360200190f35b34801561032657600080fd5b50610229610b3d565b34801561033b57600080fd5b50610229610b43565b34801561035057600080fd5b506101f7610b62565b34801561036557600080fd5b50610229610bb7565b34801561037a57600080fd5b506103066004803603604081101561039157600080fd5b5080359060200135600160a060020a0316610bbd565b3480156103b357600080fd5b50610229610c72565b3480156103c857600080fd5b50610229600480360360208110156103df57600080fd5b5035610c78565b3480156103f257600080fd5b50610229610cab565b34801561040757600080fd5b506102296004803603604081101561041e57600080fd5b5080359060200135610cb1565b34801561043757600080fd5b506102296004803603604081101561044e57600080fd5b5080359060200135610ce8565b34801561046757600080fd5b506102296004803603604081101561047e57600080fd5b5080359060200135610dd7565b34801561049757600080fd5b50610229600480360360208110156104ae57600080fd5b5035610e13565b3480156104c157600080fd5b506101f7600480360360208110156104d857600080fd5b5035610e25565b3480156104eb57600080fd5b506104f4610e41565b60408051600160a060020a039092168252519081900360200190f35b34801561051c57600080fd5b506103066004803603604081101561053357600080fd5b5080359060200135600160a060020a0316610e50565b34801561055557600080fd5b506102296004803603606081101561056c57600080fd5b50803590600160a060020a036020820135169060400135610f07565b34801561059457600080fd5b50610229610f6e565b3480156105a957600080fd5b50610229600480360360208110156105c057600080fd5b5035610f74565b3480156105d357600080fd5b50610306600480360360208110156105ea57600080fd5b5035610f8a565b3480156105fd57600080fd5b506102296004803603602081101561061457600080fd5b5035610f9f565b34801561062757600080fd5b506101f76004803603602081101561063e57600080fd5b5035600160a060020a0316610fcf565b34801561065a57600080fd5b506102806004803603602081101561067157600080fd5b5035611015565b34801561068457600080fd5b506103066004803603606081101561069b57600080fd5b5080359060208101359060400135611093565b3480156106ba57600080fd5b50610229600480360360408110156106d157600080fd5b50803590602001356110d8565b3480156106ea57600080fd5b506102296004803603602081101561070157600080fd5b503561110f565b34801561071457600080fd5b50610229611147565b34801561072957600080fd5b506103066004803603604081101561074057600080fd5b5080359060200135600160a060020a031661114d565b34801561076257600080fd5b506107866004803603604081101561077957600080fd5b5080359060200135611223565b6040805192835260208301919091528051918290030190f35b3480156107ab57600080fd5b50610306600480360360408110156107c257600080fd5b50803590602001356112a3565b3480156107db57600080fd5b50610280600480360360208110156107f257600080fd5b50356113f6565b34801561080557600080fd5b506103066004803603604081101561081c57600080fd5b508035906020013561145b565b34801561083557600080fd5b506101f76004803603602081101561084c57600080fd5b50356115a6565b34801561085f57600080fd5b506102806115c2565b34801561087457600080fd5b506103066004803603602081101561088b57600080fd5b5035611632565b34801561089e57600080fd5b50610229611728565b3480156108b357600080fd5b506108d1600480360360208110156108ca57600080fd5b503561172e565b604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156109155781810151838201526020016108fd565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561095457818101518382015260200161093c565b5050505090500194505050505060405180910390f35b34801561097657600080fd5b506103066004803603608081101561098d57600080fd5b5080359060208101359060408101359060600135611819565b60008281526007602081905260408220018054839081106109c357fe5b906000526020600020015490505b92915050565b6002545b90565b600054606090600160a060020a031633146109f857600080fd5b600082815260086020908152604080832086845282529182902080548351818402810184019094528084529091830182828015610a5457602002820191906000526020600020905b815481526020019060010190808311610a40575b5050505050905092915050565b6000610a6d8433610e50565b1515610a7b57506000610b36565b600084815260076020908152604080832086845260048101909252909120541515610b095760058101805460018181018355600092835260208084209092018790556006840180548083018255908452828420018690558683526004909301815260408083208690556008825280832088845282528220805480850182559083529120018390559050610b36565b50506000828152600860209081526040808320868452825282208054600181018255908352908220018290555b9392505050565b60035490565b60008054600160a060020a03163314610b5b57600080fd5b5060055490565b600054600160a060020a03163314610b7957600080fd5b60008054604051600160a060020a0390911691303180156108fc02929091818181858888f19350505050158015610bb4573d6000803e3d6000fd5b50565b60035481565b6000610bc883610f8a565b1515610bd6575060006109d1565b600160a060020a038216331415610bef575060016109d1565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415610c2a5760009150506109d1565b600080805260038281016020526040909120541315610c4d5760019150506109d1565b600160a060020a03831660009081526003918201602052604090205413905092915050565b60045481565b6000610c84823361114d565b1515610c9257506000610ca6565b506000818152600760205260409020600601545b919050565b60025481565b6000610cbd833361114d565b1515610ccb575060006109d1565b60008381526007602052604090206006018054839081106109c357fe5b600082610cf481610f8a565b1515610cff57506003545b610d09813361114d565b1515610d1457506004545b610d1d83610f8a565b15610d4557610d2c833361114d565b1515610d3c5750600090506109d1565b829150506109d1565b610d4f8133610e50565b1515610d5f5750600090506109d1565b6000610d6b828561190e565b6005805460018101918290557f036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db00186905560008681526006602052604081209190915554909150600160a060020a03163314610dcf57610dcd81336002610f07565b505b949350505050565b6000610de3833361114d565b1515610df1575060006109d1565b5060009182526007602090815260408084209284526004909201905290205490565b60009081526006602052604090205490565b600054600160a060020a03163314610e3c57600080fd5b600255565b600054600160a060020a031681565b6000610e5b83610f8a565b1515610e69575060006109d1565b600160a060020a038216331415610e82575060016109d1565b6000838152600760209081526040808320600160a060020a038616845260038101909252909120546000191415610ebd5760009150506109d1565b600080805260038201602052604090205460011215610ee05760019150506109d1565b600160a060020a038316600090815260039091016020526040902054600112905092915050565b60008054600160a060020a0384811691161415610f2657506002610b36565b610f308433610e50565b1515610f3f5750600019610b36565b506000928352600760209081526040808520600160a060020a0394909416855260039093019052912081905590565b60015490565b6000908152600760208190526040909120015490565b60009081526007602052604090205460ff1690565b6000610fab823361114d565b1515610fb957506000610ca6565b5060009081526007602052604090206005015490565b600054600160a060020a03163314610fe657600080fd5b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b606080611022833361114d565b151561102f579050610ca6565b6000838152600760209081526040918290206005018054835181840281018401909452808452909183018282801561108657602002820191906000526020600020905b815481526020019060010190808311611072575b5050505050915050919050565b600061109e84610f8a565b15156110cd57600454600054600160a060020a03163314156110bf57506003545b6110c98186610ce8565b9450505b610dcf848484610a61565b60006110e4833361114d565b15156110f2575060006109d1565b60008381526007602052604090206005018054839081106109c357fe5b60008054600160a060020a0316331461112757600080fd5b600580548390811061113557fe5b90600052602060002001549050919050565b60045490565b600061115883610f8a565b1515611166575060006109d1565b600160a060020a03821633141561117f575060016109d1565b6000838152600760209081526040808320600160a060020a0386168452600381019092529091205460001914156111ba5760009150506109d1565b6000808052600380830160205260409091205414156111dd5760009150506109d1565b600080805260038201602052604081205413156111fe5760019150506109d1565b600160a060020a03831660009081526003909101602052604081205413905092915050565b600080611230843361114d565b15156112415750600090508061129c565b600084815260076020526040902060050180548490811061125e57fe5b9060005260206000200154600760008681526020019081526020016000206006018481548110151561128c57fe5b9060005260206000200154915091505b9250929050565b60006112af8333610e50565b15156112bd575060006109d1565b6000838152600760205260408120600581018054919291859081106112de57fe5b60009182526020909120015490508015156112f857600080fd5b6000818152600483016020526040812055600582018054600019810190811061131d57fe5b9060005260206000200154826005018581548110151561133957fe5b600091825260209091200155600582018054600019810190811061135957fe5b600091825260208220015560058201805490611379906000198301611a26565b50600682018054600019810190811061138e57fe5b906000526020600020015482600601858154811015156113aa57fe5b60009182526020909120015560068201805460001981019081106113ca57fe5b6000918252602082200155600682018054906113ea906000198301611a26565b50600195945050505050565b60008181526007602081815260409283902090910180548351818402810184019094528084526060939283018282801561144f57602002820191906000526020600020905b81548152602001906001019080831161143b575b50505050509050919050565b60006114678333610e50565b1515611475575060006109d1565b600083815260076020819052604090912090810180546114ab91908590811061149a57fe5b906000526020600020015433610e50565b15156114bb5760009150506109d1565b600780820180546000198101926000929091839190859081106114da57fe5b90600052602060002001548152602001908152602001600020600101549050826007018281548110151561150a57fe5b9060005260206000200154836007018681548110151561152657fe5b6000918252602090912001556007830180548390811061154257fe5b600091825260208220015560078301805490611562906000198301611a26565b508060076000856007018581548110151561157957fe5b90600052602060002001548152602001908152602001600020600101819055506001935050505092915050565b600054600160a060020a031633146115bd57600080fd5b600155565b600054606090600160a060020a031633146115dc57600080fd5b600580548060200260200160405190810160405280929190818152602001828054801561162857602002820191906000526020600020905b815481526020019060010190808311611614575b5050505050905090565b600061163e8233610e50565b151561164c57506000610ca6565b60008281526007602052604090206002810154600182015461166e919061145b565b1561171f57600083815260066020526040902054801561171d576000848152600760209081526040808320805460ff1916905560069091528120556005805460001981019081106116bb57fe5b90600052602060002001546005828154811015156116d557fe5b6000918252602090912001556005805460001981019081106116f357fe5b60009182526020822001556005805490611711906000198301611a26565b50600192505050610ca6565b505b50600092915050565b60015481565b606080606061173d843361114d565b151561174d579150819050611814565b600084815260076020908152604091829020600501805483518184028101840190945280845290918301828280156117a457602002820191906000526020600020905b815481526020019060010190808311611790575b505050505092506007600085815260200190815260200160002060060180548060200260200160405190810160405280929190818152602001828054801561180b57602002820191906000526020600020905b8154815260200190600101908083116117f7575b50505050509150505b915091565b60006118258533610bbd565b151561183357506000610dcf565b60008581526007602052604090206006810154851015611902576000816005018681548110151561186057fe5b600091825260208083209091015480835260048501909152604082209190915560058301805491925086918890811061189557fe5b90600052602060002001819055508382600601878154811015156118b557fe5b600091825260208083209091019290925586815260049093018152604080842086905560088252808420898552825283208054600181810183559185529190932001849055509050610dcf565b50600095945050505050565b600061191983610f8a565b1580156119265750600083115b1561193057600080fd5b61193982610f8a565b1561194357600080fd5b508061194d611a4f565b604081018490526001815260008411156119715761196b8483611a00565b60208201525b6000828152600760209081526040918290208351815460ff1916901515178155838201516001820155918301516002830155606083015180518493926119be926005850192910190611a83565b50608082015180516119da916006840191602090910190611a83565b5060a082015180516119f6916007840191602090910190611a83565b5050505092915050565b600091825260076020818152604084209091018054600181018255908452922082015590565b815481835581811115611a4a57600083815260209020611a4a918101908301611ace565b505050565b6040805160c0810182526000808252602082018190529181019190915260608082018190526080820181905260a082015290565b828054828255906000526020600020908101928215611abe579160200282015b82811115611abe578251825591602001919060010190611aa3565b50611aca929150611ace565b5090565b6109db91905b80821115611aca5760008155600101611ad456fea165627a7a72305820961b32d8c4df94c309051ccafbad02c2b66c5ae657800a88975ade814b1de1bf0029"}')},995:function(e,t,a){"use strict";var n=a(19),r=a(20),s=o(a(213));o(a(419));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(t,a,r){if(n(this,e),void 0===t.to)throw new Error("to must be defined");if(void 0===t.from)throw new Error("from must be defined");if(void 0===t.hash)throw new Error("hash must be defined");return this.to=t.to,this.from=t.from,this.hash=t.hash,this.account=r,this.Mail=this.account.Mail,this}return r(e,[{key:"toJSON",value:function(){return{to:this.to,from:this.from,hash:this.hash.toJSON()}}},{key:"getFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;if(this.to===this.account.subdomain)return this.Mail.receive(this.account,this,e,t);if(this.from===this.account.subdomain)return this.Mail.retrieveSent(this.account,this,e,t);throw Error("there was a problem...")}},{key:"saveAs",value:function(){arguments.length>0&&void 0!==arguments[0]||console.log,arguments.length>1&&void 0!==arguments[1]||console.log;return this.getFile(console.log,console.log).then((function(e){return(0,s.default)(e)}))}}]),e}();e.exports=i},996:function(e,t,a){"use strict";(function(n){var r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(82),i=d(a(222)),c=d(a(429)),u=d(a(119)),f=d(a(430));function d(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,a){r(this,e),this.config=t,this.Account=a,this.Store=a.Store,this.SF=new c.default(t.swarmGateway)}return s(e,[{key:"retrieveFile",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return this.Store.getDecryptedFile(t,e.privateKey,a,n)}},{key:"initStored",value:function(e){this.storeEncryptedValue("stored-1.0",'{"storedFiles":[]}',e,e.privateKey)}},{key:"getStored",value:function(e,t){return this.retrieveDecryptedValue("stored-1.0",t.address,t.privateKey,!0).then((function(e){return{files:JSON.parse(e.value).storedFiles.map((function(e){return new i.default(e,t)})),manifestAddress:e.address}})).catch((function(e){if(e.response&&404===e.response.status)return[];throw new Error(e)}))}},{key:"getStoredManifest",value:function(e){return this.retrieveDecryptedValue("stored-1.0",e.address,e.privateKey).then((function(e){return JSON.parse(e)}))}},{key:"updateStoredMeta",value:function(e,t,a){var n=this;return this.getStoredManifest(a).then((function(r){for(var s=0;s<r.storedFiles.length;s++)if(r.storedFiles[s].address===e){var o=void 0;for(var i in o=void 0===r.storedFiles[s].meta?{}:r.storedFiles[s].meta,t)o[i]=t[i];r.storedFiles[s].meta=o}return n.updateStoredManifest(r,a)}))}},{key:"updateStoredManifest",value:function(e,t){return this.storeEncryptedValue("stored-1.0",JSON.stringify(e),t,t.privateKey,!0)}},{key:"storeFile",value:function(e,t,a,n,r,s,o,i){var c=this;return this.Store.storeEncryptedFile(t,e.privateKey,a,n,r,!0,s).then((function(t){return c.getStored("all",e).then((function(a){for(var n=a.files,r=a.manifestAddress,s=!1,u=0;u<n.length;u++)n[u].address===t.address&&(s=!0);return!1===s&&(n.push(t.toJSON()),c.storeEncryptedValue("stored-1.0",JSON.stringify({storedFiles:n}),e,e.privateKey,i).then((function(e){return!0===o?{storedFile:t,storedManifestAddress:e,oldStoredManifestAddress:r}:t})))}))}))}},{key:"initContacts",value:function(e){return this.storeEncryptedValue("contacts-1.0","[]",e,e.privateKey)}},{key:"getContacts",value:function(e){return this.retrieveDecryptedValue("contacts-1.0",e.address,e.privateKey).then((function(e){return JSON.parse(e).map((function(e){return new f.default(e)}))})).catch((function(e){if(e.response&&404===e.response.status)return[];throw new Error("couldn't retrieve contacts: ".concat(e))}))}},{key:"storeContact",value:function(e,t){var a=this;return this.getContacts(e).then((function(n){var r=n.map((function(e){return e.toJSON()}));r.push(t.toJSON());var s=JSON.stringify(r);return a.storeEncryptedValue("contacts-1.0",s,e,e.privateKey)}))}},{key:"storeValue",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.SF.set(a.address,e,a.privateKey,t,n)}},{key:"retrieveValue",value:function(e,t){return this.SF.get(t.address,e)}},{key:"storeEncryptedValue",value:function(e,t,a,n){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=u.default.generateRandomIV();return u.default.encryptString(t,n,o).then((function(t){var n="0x"+o.toString("hex")+t;return r.SF.set(a.address,e,a.privateKey,n,s)}))}},{key:"retrieveDecryptedValue",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!1===r?this.SF.get(t,e,"arraybuffer").then((function(e){var t=e.toString("hex"),r=t.substring(32),s=n.from(t.substring(0,32),"hex");return u.default.decryptString(r,a,s)})):!0===r?this.SF.get(t,e,"arraybuffer",!0).then((function(e){var t=e.value.toString("hex"),r=t.substring(32),s=n.from(t.substring(0,32),"hex");return{value:u.default.decryptString(r,a,s),address:e.address}})):void 0}},{key:"retrieveUnencryptedValue",value:function(e,t){return this.SF.get(t,e,"arraybuffer").then((function(e){var t=(0,o.bytesToHex)(encryptedBuffer),a=t.substring(0,34),n=t.substring(34);return u.default.decryptString(n,password,a)}))}}]),e}();t.default=l,e.exports=t.default}).call(this,a(1).Buffer)},997:function(e,t,a){"use strict";var n=a(19),r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(223),o=function(){function e(t){n(this,e),this.url=t}return r(e,[{key:"gimmie",value:function(e){return(0,s.request)({responseType:"json",url:this.url,method:"POST",headers:{Accept:"application/x-www-form-urlencoded"},data:"address="+e}).then((function(e){return e.data.transaction}))}}]),e}();t.default=o,e.exports=t.default},998:function(e,t,a){"use strict";var n=a(301),r=a(19),s=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(82),i=a(161),c=function(){function e(t){r(this,e);var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0x";this.account=a,this.config=t,this.abi=n,this.bytecode=s,this.web3=this.config.web3,this.gasPrice=(0,o.toWei)(t.gasPrice.toString(),"gwei"),this.contractAddress=null}return s(e,[{key:"at",value:function(e){var t=this;this.contractAddress=e,this.web3Instance=new this.web3.eth.Contract(this.abi,this.contractAddress);for(var a=0;a<this.abi.length;a++)"function"===this.abi[a].type&&"view"===this.abi[a].stateMutability?function(){var e=t.abi[a].name;t[e]=function(){return this.call(e,Array.prototype.slice.call(arguments))}}():"function"!==this.abi[a].type||"payable"!==this.abi[a].stateMutability&&"nonpayable"!==this.abi[a].stateMutability||function(){var e=t.abi[a].name;t[e]=function(){return this.send(e,Array.prototype.slice.call(arguments),!0)}}();return this}},{key:"deploy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return i.time("deployTransaction//Contract"),new Promise((function(n,r){var s=new e.web3.eth.Contract(e.abi),o={data:e.bytecode};t!==[]&&(o.arguments=t);var c=s.deploy(o).encodeABI(),u=e.account.privateKey,f={from:e.account.address,data:c,gas:a,gasPrice:e.gasPrice,nonce:e.account.nonce};return e.account.nonce+=1,e.web3.eth.accounts.signTransaction(f,u).then((function(t){return e.web3.eth.sendSignedTransaction(t.rawTransaction).once("confirmation",(function(t,a){i.timeEnd("deployTransaction//Contract"),e.transactionReceipt=a,n(e.at(a.contractAddress))}))}))}))}},{key:"send",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15e6,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return i.time("sendTransaction//Contract"),new Promise((function(c,u){var f;if(null===t.contractAddress||"0x0"===t.contractAddress)throw new Error('you must use ".at" or ".deploy" first');var d=(f=new t.web3.eth.Contract(t.abi,t.contractAddress).methods)[e].apply(f,n(a)).encodeABI(),l=t.account.privateKey,b={from:t.account.address,to:t.contractAddress,data:d,gas:s,gasPrice:t.gasPrice,nonce:t.account.nonce,value:o};return t.account.nonce+=1,t.web3.eth.accounts.signTransaction(b,l).then((function(a){return t.web3.eth.sendSignedTransaction(a.rawTransaction).once("transactionHash",(function(t){!1===r&&(i.log("sendTransaction//Contract",e,r),i.timeEnd("sendTransaction//Contract"),c(t))})).once("confirmation",(function(t,a){!0===r&&(i.log("sendTransaction//Contract",e,r),i.timeEnd("sendTransaction//Contract"),c(a))}))}))}))}},{key:"call",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(i.time("call//Contract"),null===this.contractAddress||"0x0"===this.contractAddress)throw new Error('you must use ".at" or ".deploy" first');var r=new this.web3.eth.Contract(this.abi,this.contractAddress),s=void 0===this.account?"0x":this.account.address,o=(t=r.methods)[e].apply(t,n(a)).call({from:s});return i.log("call//Contract",e),i.timeEnd("call//Contract"),o}},{key:"getPastEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"allEvents",t=arguments.length>1?arguments[1]:void 0;return new this.web3.eth.Contract(this.abi,this.contractAddress).getPastEvents(e,t)}}]),e}();t.default=c,e.exports=t.default}},[[486,1,2]]]);
//# sourceMappingURL=main.67165868.chunk.js.map