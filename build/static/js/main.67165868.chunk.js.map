{"version":3,"sources":["../../FDS-Forks/fds.js/dist/ES5/FDS-Crypto.js","pages/account-create/pages/AccountCreateIntro.jsx","pages/account-create/pages/MnemonicShow.jsx","pages/account-create/pages/MnemonicCheck.jsx","pages/account-create/pages/ChooseUsername.jsx","pages/account-create/pages/ChoosePassword.jsx","pages/account-create/pages/ChooseAvatar.jsx","pages/account-create/pages/CreatingAccount.jsx","pages/account-create/AccountCreateRoot.jsx","pages/index.js","App.js","services/account/reducer.js","services/index.js","services/account/index.js","services/account/actionTypes.js","rootReducer.js","rootSaga.js","store.js","serviceWorker.js","index.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Swarm.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Trace.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Utils.js","../../FDS-Forks/fds.js/dist/ES5/FDS-ENS2.js","../../FDS-Forks/fds.js/dist/ES5/models/Hash.js","images/defaultAvatar.png","styles.module.css","../../FDS-Forks/fds.js/dist/ES5/FDS-Mail.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Multibox.js","../../FDS-Forks/fds.js/dist/ES5/FDS-SwarmFeeds.js","../../FDS-Forks/fds.js/dist/ES5/models/Contact.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Tx.js","../../FDS-Forks/fds.js/dist/ES5/index.js","pages/account-create/account-create.module.css","../../FDS-Forks/fds.js/dist/ES5/FDS-Account.js","../../FDS-Forks/fds.js/dist/ES5/FDS-UserStore.js","../../FDS-Forks/fds.js/dist/ES5/models/User.js","../../FDS-Forks/fds.js/dist/ES5/contracts/ENSRegistry.js","../../FDS-Forks/fds.js/dist/ES5/contracts/SubdomainRegistrar.js","../../FDS-Forks/fds.js/dist/ES5/contracts/PublicResolver.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Wallet.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Mailbox.js","../../FDS-Forks/fds.js/dist/ES5/contracts/Multibox.js","../../FDS-Forks/fds.js/dist/ES5/contracts/KeyValueTree.js","../../FDS-Forks/fds.js/dist/ES5/models/Message.js","../../FDS-Forks/fds.js/dist/ES5/FDS-SwarmStore.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Faucet.js","../../FDS-Forks/fds.js/dist/ES5/FDS-Contract.js"],"names":["Object","defineProperty","exports","value","default","_crypto","require","_elliptic","window","TextEncoder","TextDecoder","_default","randomBytes","privateKey","secp256k1","ec","buffer","Buffer","from","slice","keyFromPrivate","getPublic","recipientPublicKey","pk","substring","pub","length","Error","sender","createECDH","setPrivateKey","computeSecret","toString","string","password","iv","this","encryptBuffer","then","encryptedBuffer","decryptedBuffer","decryptBuffer","decode","Promise","resolve","reject","cipher","createCipheriv","concat","update","final","decipher","createDecipheriv","module","AccountCreateIntro","createStage","restoreStage","exitStage","className","accountstyles","container","title","subtitle","tabIndex","main","button","onClick","buttontext","a","ethers","bytes","utils","language","wordlists","en","entropyToMnemonic","randomMnemonic","HDNode","fromMnemonic","wallet","array","split","MnemonicShow","nextStage","setMnemonic","mnemonic","setWallet","setCollection","useEffect","createMnemonicArray","closeButton","closeicon","map","word","index","key","MnemonicCheck","prevStage","console","log","useState","word0Validity","setWord0Validity","word1Validity","setWord1Validity","word2Validity","setWord2Validity","word3Validity","setWord3Validity","formcontainer","styles","link","mnemoniccheck","mnemonicinputbox","mnemonicinput","placeholder","autoCorrect","autoCapitalize","data-lpignore","onChange","e","num","target","check0Validity","Check","style","color","check1Validity","check2Validity","check3Validity","ChooseUsername","avatarStage","username","setUsername","avatar","src","avatarImage","alt","uploadbtn","uploadicon","arrowup","usernameinputbox","type","autoFocus","usernameinput","ChoosePassword","createAccount","setPassword","passwordMatch","setPasswordMatch","password1","setPassword1","password2","setPassword2","checkPasswordValidity","b","passwordflex","flexer","name","handlePassword1","handlePassword2","ChooseAvatar","state","image","props","allowZoomOut","position","x","y","scale","rotate","borderRadius","preview","width","height","handleSave","data","img","editor","getImageScaledToCanvas","toDataURL","rect","getCroppingRect","setState","handleScale","parseFloat","handleNewImage","files","rotateRight","preventDefault","handlePositionChange","onClickSave","canvas","getImage","setAvatar","setEditorRef","avatareditor","rotateicon","ref","onPositionChange","sliderbox","min","max","step","defaultValue","for","hidden","id","accept","fileinput","bind","React","Component","CreatingAccount","accountCreateDone","item0","item1","item2","item3","statusbox","AccountCreateRoot","path","exact","component","fds","dispatch","useDispatch","stage","setStage","history","useHistory","defaultAvatar","setItem0","setItem1","setItem2","setItem3","wallet0","derivePath","wallet1","wallet2","Account","SwarmStore","SF","set","address","useravatar","publicKey","addresses","Date","toISOString","keyIndex","ownerAddress","content","myWeb3","eth","accounts","encrypt","encryptedPrivateKey","userObject","status","goBack","App","swarmcity","pages","initialState","account","mountPoint","reducer","persistentReducer","action","directories","dirName","metaHash","items","itemName","fileSize","mimeType","directoryList","idInfo","idString","balanceEth","balanceFdt","servicesReducers","values","services","forEach","combineReducers","globalReducer","rootSaga","all","filter","service","saga","Web3","FDS","sagaMiddleware","createSagaMiddleware","db","PouchDB","pouchMiddleware","persistentStore","store","configureStore","rootReducer","middleware","getDefaultMiddleware","enhancers","preloadedState","kwargs","run","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","_FDSUtils","_interopRequireDefault","_FDSCrypto","_Hash","_FDSTrace","_axios","obj","__esModule","asyncGeneratorStep","gen","_next","_throw","arg","info","done","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","File","options","gateway","swarmGateway","rawGateway","_this","sendRequest","digest","swarmhash","_this2","replace","uploadedProgressCallback","pin","url","formData","FormData","size","i","fileName","fullPath","splice","join","append","hash","file","time","now","secret","encryptedProgressCallback","progressMessageCallback","metadata","fileToBuffer","generateRandomIV","postData","meta","selectedMailbox","selectedWallet","getDataFromManifest","retrievedFile","blob","Blob","swarmHash","filename","getFile","manifestJSON","manifest","JSON","parse","entries","getData","progressCallback","protocol","pinHeader","requestType","responseType","dataLength","request","method","transformResponse","onUploadProgress","event","Math","floor","loaded","timeEnd","enabled","FileReader","fileReader","onload","result","readAsArrayBuffer","readAsText","_web3Utils","_ethEnsNamehash","ENSRegistryContract","SubdomainRegistrarContract","PublicResolverContract","ENSRegistry","registryAddress","SubdomainRegistrar","subdomainRegistrarAddress","PublicResolver","resolverContractAddress","subdomain","confirm","sha3","node","domain","addr","setResolver","multihash","publicKeyX","publicKeyY","setAll","getAll","setAddr","setPubkey","setMultihash","getPubKeyRaw","owner","_this3","getPubkey","keyCoords","keyStr","getMultihash","_fileSaver","Hash","attrs","decryptProgressCallback","downloadProgressCallback","retrieveFile","Store","_FDSENS","_FDSMailbox","_FDSSwarm","_FDSSwarmFeeds","_Message","_Contact","Mailbox","gasPrice","toWei","senderAccount","recipientSubdomain","multiboxAddress","ENS","ensConfig","recipientSubdomainNameHash","feedLocationHash","encodeFeedLocationHash","getPubKey","substr","multiboxPath","sharedSecret","message","encryptProgressCallback","uploadProgressCallback","senderSubdomainNameHash","calculateSharedSecret","getInboxFeed","stringify","newInboxFeed","storeContact","flh","decodeFeedLocationHash","initMessages","topic","storeEncryptedFile","storedFilehash","feedLocation","to","saveMessage","recipientAccount","senderPublicKey","getDecryptedFile","storeEncryptedValue","messages","getAccountMessages","push","toJSON","getMessageFeed","getReceivedMessages","getSentMessages","getSenders","senders","feedPromises","senderNamehash","messageFeeds","sort","getContacts","contacts","retrieveDecryptedValue","decryptedManifest","m","tree","children","assign","getTreeSenders","getInboxFeeds","senderTree","feeds","keys","_Multibox","_KeyValueTree","con","roots","contractAddress","rootKvt","kvts","mb","getRoots","root","_arguments","retrievePathNames","retrievePathValues","_this4","createPath","getSwarmDigest","nodeId","setKeyValue","_arguments2","_this5","splitPath","getRootId","parentNodeId","getSharedId","currentPath","newNodeId","addChildNode","_this6","keyValues","getKeyValues","keyValuesRaw","_arguments3","_this7","output","parentId","getChildren","getSwarmDigestValue","pathName","retrieveValues","retrievesDescendants","_arguments4","_this8","descendants","childOutput","_this9","retrieveTree","_this10","_secp256k","swarmNode","topicName","bytesToHex","withAddress","getResource","toHex","updateResource","padRight","padLeft","getMeta","metaResponse","feedUpdateDigest","signature","signData","feed","user","epoch","level","hexToBytes","sigObj","sign","recovery","topicBytes","userBytes","protocolVersion","dataBytes","buf","ArrayBuffer","topicLength","view","DataView","cursor","setUint8","v","setUint32","Uint8Array","Contact","_FDSContract","web3","abi","at","bytecode","gas","c","deploy","getTransactionCount","toAddress","amount","transactionCallback","tx","signTransaction","signed","sendSignedTransaction","rawTransaction","once","getBalance","ethGateway","getBlockNumber","sig","recover","_web","_FDSAccount","_FDSTx","defaultConfig","providers","HttpProvider","httpTimeout","transactionConfirmationBlocks","currentAccount","Tx","tokenName","faucetAddress","chainID","walletVersion","feedbackMessageCallback","create","unlock","delete","restoreFromFile","json","restore","restoreFromPrivateKey","saveBackupAs","getBackupAsJSON","_FDSUserStore","_FDSWallet","_FDSMail","_FDSSwarmStore","_FDSFaucet","_ENSRegistry","_FDSMultibox","UserStore","Mail","faucet","mailboxName","matches","matches2","getContract","call","generate","createWallet","addUser","walletV3","unlockByAddress","registerSubdomain","isMailboxNameValid","isMailboxNameAvailable","isAvailable","createAndStoreAccount","gimmie","deployMultibox","addENS","initContacts","initStored","interval","setInterval","balance","clearInterval","parseInt","getByAddress","syncNonce","fromJSON","walletJSONString","fileToString","walletJSON","_User","fs","localStorage","users","results","wv","scratchDir","scratchDirKey","initScratchDir","readFileSync","getItem","usersIndex","version","oldUser","saveAll","writeFileSync","setItem","existsSync","mkdirSync","User","nonce","deployContract","encryptionCallback","uploadCallback","send","recipientAddress","transactionSignedCallback","pay","getOwner","payAddress","decryptionCallback","downloadCallback","receive","retrieveSent","query","getMessages","storeValue","retrieveValue","contact","showManifestAddresses","storeFile","getStoredManifest","updateStoredManifest","updateMeta","updateStoredMeta","getStored","getBackupFile","getMultibox","lookupContact","FDSAccount","_SubdomainRegistrar","_PublicResolver","pubKeyX","pubKeyY","pubkeyX","pubkeyY","_arguments5","namehash","WalletClass","setTimeout","toLowerCase","privateToPublicKey","decrypt","senderAddress","recipientNamehash","senderSubdomainNamehash","multibox","Message","storerAccount","storedFiles","f","manifestAddress","k","oldStoredManifestAddress","isStored","storedManifestAddress","storedFile","contactsJSON","flatContacts","encryptString","encryptedString","ivAndEncryptedString","decryptString","t","transaction","Trace","web3Instance","Contract","contract","deployData","dataTx","encodeABI","receipt","transactionReceipt","methods","getPastEvents"],"mappings":"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","file":"static/js/main.67165868.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = require(\"crypto\");\n\nvar _elliptic = require(\"elliptic\");\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// handles crypto\nif (typeof window === \"undefined\") {\n  var TextEncoder = require('util').TextEncoder;\n\n  var TextDecoder = require('util').TextDecoder;\n} else {\n  var TextEncoder = window.TextEncoder;\n  var TextDecoder = window.TextDecoder;\n}\n\nclass Crypto {\n  /**\n   * @returns {number} random values\n   */\n  generateRandomIV() {\n    return (0, _crypto.randomBytes)(16);\n  }\n\n  privateToPublicKey(privateKey) {\n    var secp256k1 = new _elliptic.ec(\"secp256k1\"); // eslint-disable-line\n\n    var buffer = Buffer.from(privateKey.slice(2), \"hex\");\n    var ecKey = secp256k1.keyFromPrivate(buffer);\n    var publicKey = \"0x\" + ecKey.getPublic(false, 'hex').slice(2);\n    return publicKey;\n  }\n  /**\n   * Calculates shared secret\n   * @calculateSharedSecret\n   * @param {any} privateKey private key\n   * @param {any} recipientPublicKey recipient public key\n   * @returns {string} secret\n   */\n\n\n  calculateSharedSecret(privateKey, recipientPublicKey) {\n    var pk = privateKey.substring(2, 66);\n    var pub = recipientPublicKey.substring(2, 130);\n\n    if (pk.length !== 64) {\n      throw new Error('private key must be a 32 byte hex string ' + privateKey);\n    }\n\n    if (pub.length !== 128) {\n      throw new Error('public key must be a 64 byte hex string ' + recipientPublicKey);\n    }\n\n    var sender = (0, _crypto.createECDH)('secp256k1');\n    sender.setPrivateKey(pk, 'hex');\n    return sender.computeSecret(\"04\" + pub, 'hex').toString('hex');\n  }\n  /**\n   * \n   * @param {any} string to encrypt\n   * @param {any} password to use\n   * @param {any} iv initialization vector\n   * @returns {any} encrypted string\n   */\n\n\n  encryptString(string, password, iv) {\n    return this.encryptBuffer(Buffer.from(string, 'utf8'), password, iv).then(encryptedBuffer => {\n      return encryptedBuffer.toString('hex');\n    });\n  }\n  /**\n   * Decrypt string\n   * @param {any} string encrypted string\n   * @param {any} password to use\n   * @param {any} iv initialization vector\n   * @returns {string} decrypted string \n   */\n\n\n  decryptString(string, password, iv) {\n    var decryptedBuffer = this.decryptBuffer(Buffer.from(string, 'hex'), password, iv);\n    return new TextDecoder().decode(decryptedBuffer);\n  }\n\n  encryptBuffer(buffer, password, iv) {\n    return new Promise((resolve, reject) => {\n      var cipher = (0, _crypto.createCipheriv)('aes-256-ctr', Buffer.from(password.substring(2), 'hex'), iv);\n      var crypted = Buffer.concat([cipher.update(buffer), cipher.final()]);\n      resolve(crypted);\n    });\n  }\n\n  decryptBuffer(buffer, password, iv) {\n    var decipher = (0, _crypto.createDecipheriv)('aes-256-ctr', Buffer.from(password.substring(2), 'hex'), iv);\n    var dec = Buffer.concat([decipher.update(buffer), decipher.final()]);\n    return dec;\n  }\n\n}\n\nvar _default = new Crypto();\n\nexports.default = _default;\nmodule.exports = exports.default;","import React from \"react\"\nimport main from \"styles.module.css\"\nimport accountstyles from \"../account-create.module.css\"\n\nexport function AccountCreateIntro({ createStage, restoreStage, exitStage }) {\n\n    return (\n        <div className={accountstyles.container}>\n            <div className={accountstyles.title}>Welcome to Fairdrive</div>\n            <div className={accountstyles.subtitle}>\n                In the next steps you will be creating a Fairdrive Wallet.\n            </div>\n\n            <div tabIndex=\"2\" className={main.button} onClick={createStage}>\n                <div>\n                    <div className={main.buttontext}>create account</div>\n                </div>\n            </div>\n\n            <div tabIndex=\"2\" className={main.button}>\n                <div>\n                    <div className={main.buttontext} onClick={restoreStage}>restore account</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default AccountCreateIntro","import React, { useEffect } from \"react\"\nimport main from \"styles.module.css\"\nimport accountstyles from \"../account-create.module.css\"\nimport ethers from \"ethers\"\n\nasync function createMnemonicArray() {\n    window.ethers = ethers\n    let bytes = ethers.utils.randomBytes(16);\n    let language = ethers.wordlists.en;\n    let randomMnemonic = await ethers.utils.entropyToMnemonic(bytes, language)\n    let mnemonic = randomMnemonic\n    let wallet = await ethers.utils.HDNode.fromMnemonic(randomMnemonic)\n    let array = randomMnemonic.split(\" \")\n\n    window.wallet = wallet\n    return { array, wallet }\n}\n\nexport function MnemonicShow({ nextStage, exitStage, setMnemonic, mnemonic, setWallet, setCollection }) {\n\n    useEffect(() => {\n        createMnemonicArray().then(({ array, wallet }) => {\n            setWallet(wallet)\n            setMnemonic(array)\n        })\n    }, [setMnemonic, setWallet])\n\n    return (\n        <div className={accountstyles.container}>\n            <div className={accountstyles.closeButton} onClick={exitStage}>\n                <div className={main.closeicon} />\n            </div>\n            <div className={accountstyles.title}>Write down this seed phrase</div>\n            <div className={accountstyles.subtitle}>\n                With it, you will always be able to restore your account.\n            </div>\n\n            <div className={accountstyles.mnemonic}>\n                {mnemonic.map((word, index) => (\n                    <div key={index}>\n                        {index + 1 + \". \" + word}\n                    </div>\n                ))}\n            </div>\n            {mnemonic.length >= 1 ?\n                <div tabIndex=\"2\" className={main.button} onClick={nextStage}>\n                    <div>\n                        <div className={main.buttontext}>continue</div>\n                    </div>\n                </div>\n                : \"\"}\n\n\n        </div>\n    )\n}\n\nexport default MnemonicShow","import React, { useState } from \"react\";\nimport styles from \"styles.module.css\"\nimport accountstyles from \"../account-create.module.css\"\nimport { Check } from \"@material-ui/icons\"\n\nexport function MnemonicCheck({\n  nextStage,\n  prevStage,\n  exitStage,\n  mnemonic\n}) {\n  console.log(mnemonic[2], mnemonic[4], mnemonic[7], mnemonic[10])\n\n  const [word0Validity, setWord0Validity] = useState(false)\n  const [word1Validity, setWord1Validity] = useState(false)\n  const [word2Validity, setWord2Validity] = useState(false)\n  const [word3Validity, setWord3Validity] = useState(false)\n\n  const check0Validity = (num, e) => {\n    if (e.target.value === mnemonic[num]) {\n      setWord0Validity(true)\n    } else {\n      setWord0Validity(false)\n    }\n  }\n\n  const check1Validity = (num, e) => {\n    if (e.target.value === mnemonic[num]) {\n      setWord1Validity(true)\n    } else {\n      setWord1Validity(false)\n    }\n  }\n\n  const check2Validity = (num, e) => {\n    if (e.target.value === mnemonic[num]) {\n      setWord2Validity(true)\n    } else {\n      setWord2Validity(false)\n    }\n  }\n\n  const check3Validity = (num, e) => {\n    if (e.target.value === mnemonic[num]) {\n      setWord3Validity(true)\n    } else {\n      setWord3Validity(false)\n    }\n  }\n\n  return (\n    <div className={accountstyles.formcontainer}>\n\n      <div className={accountstyles.closeButton} onClick={exitStage}>\n        <div className={styles.closeicon} />\n      </div>\n      <div className={accountstyles.title}>\n        Check your backup\n    </div>\n      <div className={accountstyles.subtitle}>\n        Didn't write it down? You can start over with a <span className={accountstyles.link} onClick={prevStage}> new seed phrase</span>.\n    </div>\n      <div className={accountstyles.mnemoniccheck}>\n\n        <div className={accountstyles.mnemonicinputbox}>\n          <input\n            className={accountstyles.mnemonicinput}\n            placeholder=\"word 3\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"none\"\n            data-lpignore=\"true\"\n            onChange={(e) => check0Validity(2, e)}></input>\n          {word0Validity ? <Check style={{ color: '#92e7fa' }}></Check> :\n            <Check style={{ color: '#222222' }}></Check>}\n        </div>\n        <div className={accountstyles.mnemonicinputbox}>\n          <input\n            className={accountstyles.mnemonicinput}\n            placeholder=\"word 5\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"none\"\n            data-lpignore=\"true\"\n            onChange={(e) => check1Validity(4, e)}></input>\n          {word1Validity ? <Check style={{ color: '#92e7fa' }}></Check> :\n            <Check style={{ color: '#222222' }}></Check>}\n        </div>\n        <div className={accountstyles.mnemonicinputbox}>\n          <input\n            className={accountstyles.mnemonicinput}\n            placeholder=\"word 8\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"none\"\n            data-lpignore=\"true\"\n            onChange={(e) => check2Validity(7, e)}></input>\n          {word2Validity ? <Check style={{ color: '#92e7fa' }}></Check> :\n            <Check style={{ color: '#222222' }}></Check>}\n        </div>\n        <div className={accountstyles.mnemonicinputbox}>\n          <input\n            className={accountstyles.mnemonicinput}\n            placeholder=\"word 11\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"none\"\n            data-lpignore=\"true\"\n            onChange={(e) => check3Validity(10, e)}></input>\n          {word3Validity ? <Check style={{ color: '#92e7fa' }}></Check> :\n            <Check style={{ color: '#222222' }}></Check>}\n        </div>\n        {word0Validity && word1Validity && word2Validity && word3Validity ?\n          <div tabIndex=\"2\" className={styles.button} onClick={nextStage}>\n            <div>\n              <div className={styles.buttontext}>continue</div>\n            </div>\n          </div>\n          : \"\"}\n\n\n\n\n      </div>\n\n\n    </div >\n  );\n};\n\nexport default MnemonicCheck;\n","import React from \"react\";\nimport styles from \"styles.module.css\";\nimport accountstyles from \"../account-create.module.css\";\n\nconst ChooseUsername = ({\n  nextStage,\n  exitStage,\n  avatarStage,\n  username,\n  setUsername,\n  avatar\n}) => (\n    <div className={accountstyles.formcontainer}>\n      <div className={accountstyles.closeButton} onClick={exitStage}>\n        <div className={styles.closeicon} />\n      </div>\n      <div className={accountstyles.title}>\n        Choose an avatar and a username\n    </div>\n      <div className={accountstyles.placeholder}>\n        <img src={avatar} className={accountstyles.avatarImage} alt=\"avatar\" />\n      </div>\n      <div className={accountstyles.uploadbtn} />\n      <div className={accountstyles.uploadicon} onClick={avatarStage}>\n        <div className={accountstyles.arrowup} />\n      </div>\n      <div className={accountstyles.usernameinputbox}>\n        <input\n          type=\"text\"\n          autoFocus\n          className={accountstyles.usernameinput}\n          placeholder=\"Fairdrive User #1263\"\n          value={username}\n          onChange={e => setUsername(e.target.value)}\n        />\n      </div>\n      {username.length >= 1 ?\n        <div tabIndex=\"2\" className={styles.button} onClick={nextStage}>\n          <div>\n            <div className={styles.buttontext}>continue</div>\n          </div>\n        </div>\n        : \"\"\n      }\n\n    </div>\n  );\n\nexport default ChooseUsername;\n","import React, { useState } from \"react\";\nimport styles from \"styles.module.css\";\nimport accountstyles from \"../account-create.module.css\";\n\nexport function ChoosePassword({\n  createAccount,\n  exitStage,\n  nextStage,\n  setPassword,\n  password\n}) {\n\n  const [passwordMatch, setPasswordMatch] = useState(false)\n\n  const [password1, setPassword1] = useState()\n  const [password2, setPassword2] = useState()\n\n  const handlePassword1 = (e) => {\n    setPassword1(e.target.value)\n    checkPasswordValidity(e.target.value, password2)\n  }\n\n  const handlePassword2 = (e) => {\n    setPassword2(e.target.value)\n    checkPasswordValidity(e.target.value, password1)\n  }\n\n  const checkPasswordValidity = (a, b) => {\n    if (a !== \"\" | b !== \"\") {\n      if (a === b) {\n        setPasswordMatch(true)\n        setPassword(a)\n      } else {\n        setPasswordMatch(false)\n      }\n    }\n  }\n\n  return (\n\n    <div className={accountstyles.formcontainer} >\n      <div className={accountstyles.closeButton} onClick={exitStage}>\n        <div className={styles.closeicon} />\n      </div>\n      <div className={accountstyles.title}>Choose a password</div>\n      <div className={accountstyles.passwordflex} />\n      <div className={accountstyles.flexer} />\n\n      <div className={accountstyles.usernameinputbox}>\n        <input\n          type=\"password\"\n          autoFocus\n          name=\"1\"\n          className={accountstyles.mnemonicinput}\n          placeholder=\"Password\"\n          value={password1}\n          onChange={(e) => handlePassword1(e)}\n        />\n      </div>\n      <div className={accountstyles.usernameinputbox}>\n        <input\n          type=\"password\"\n          name=\"2\"\n          className={accountstyles.mnemonicinput}\n          placeholder=\"Control\"\n          value={password2}\n          onChange={(e) => handlePassword2(e)}\n        />\n      </div>\n      {passwordMatch ?\n        <div tabIndex=\"2\" className={styles.button} onClick={createAccount}>\n          <div>\n            <div className={styles.buttontext}>set password</div>\n          </div>\n        </div>\n        : \"\"}\n    </div>\n  );\n}\n\nexport default ChoosePassword;\n","import React from \"react\";\nimport AvatarEditor from \"react-avatar-editor\";\nimport styles from \"styles.module.css\";\nimport createAccount from \"../account-create.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default class ChooseAvatar extends React.Component {\n  static propTypes = {\n    setAvatar: PropTypes.func.isRequired\n  };\n\n  state = {\n    image: this.props.avatar,\n    allowZoomOut: false,\n    position: { x: 0.5, y: 0.5 },\n    scale: 1.2,\n    rotate: 0,\n    borderRadius: 200,\n    preview: null,\n    width: 200,\n    height: 200\n  };\n\n  handleSave = data => {\n    const img = this.editor.getImageScaledToCanvas().toDataURL();\n    const rect = this.editor.getCroppingRect();\n\n    this.setState({\n      preview: {\n        img,\n        rect,\n        scale: this.state.scale,\n        width: this.state.width,\n        height: this.state.height,\n        borderRadius: this.state.borderRadius\n      }\n    });\n  };\n\n  handleScale = e => {\n    const scale = parseFloat(e.target.value);\n    this.setState({ scale });\n  };\n\n  handleNewImage = e => {\n    this.setState({ image: e.target.files[0] });\n  };\n\n  rotateRight = e => {\n    e.preventDefault();\n    this.setState({\n      rotate: this.state.rotate + 90\n    });\n  };\n\n  handlePositionChange = position => {\n    this.setState({ position });\n  };\n\n  onClickSave = () => {\n    if (this.editor) {\n      // This returns a HTMLCanvasElement, it can be made into a data URL or a blob,\n      // drawn on another canvas, or added to the DOM.\n      const canvas = this.editor.getImage();\n\n      // If you want the image resized to the canvas size (also a HTMLCanvasElement)\n      // const canvasScaled = this.editor.getImageScaledToCanvas();\n      this.props.setAvatar(canvas.toDataURL(\"image/jpeg\", 0.82));\n      this.props.exitStage()\n    }\n  };\n\n  setEditorRef = editor => (this.editor = editor);\n\n  render() {\n    return (\n      <div className={createAccount.formcontainer}>\n        <div className={createAccount.avatareditor}>\n          <div className={styles.rotateicon} onClick={this.rotateRight} />\n          <AvatarEditor\n            ref={this.setEditorRef}\n            scale={parseFloat(this.state.scale)}\n            width={this.state.width}\n            height={this.state.height}\n            position={this.state.position}\n            onPositionChange={this.handlePositionChange}\n            rotate={parseFloat(this.state.rotate)}\n            borderRadius={this.state.borderRadius}\n            image={this.state.image}\n          />\n        </div>\n        <div className={createAccount.sliderbox}>\n          <input\n            name=\"scale\"\n            type=\"range\"\n            onChange={this.handleScale}\n            min={\"1\"}\n            max=\"3\"\n            step=\"0.01\"\n            defaultValue=\"1.2\"\n          />\n        </div>\n        <div className={createAccount.subtitle}>\n          scroll to zoom - drag to move\n        </div>\n        <label for=\"newFile\" className={createAccount.link} onClick=\"\">\n          choose another file\n        </label>\n        <input\n          hidden\n          name=\"newImage\"\n          id=\"newFile\"\n          accept=\".jpg, .jpeg, .png, .gif\"\n          type=\"file\"\n          onChange={this.handleNewImage}\n          className={createAccount.fileinput}\n        />\n        <div tabIndex=\"2\" className={styles.button} onClick={this.onClickSave.bind(this)}>\n          <div>\n            <div className={styles.buttontext}>set avatar</div>\n          </div>\n        </div>\n        <div className={createAccount.flexer}></div>\n        <div className={createAccount.link}>Cancel</div>\n\n\n      </div>\n    );\n  }\n}\n","import React, { useState } from \"react\";\nimport styles from \"styles.module.css\";\nimport accountstyles from \"../account-create.module.css\";\nimport { Check } from \"@material-ui/icons\"\n\nexport function CreatingAccount({ accountCreateDone, item0, item1, item2, item3, nextStage }) {\n\n  return (\n\n    <div className={accountstyles.formcontainer} >\n\n      <div className={accountstyles.title}>Your account is being created</div>\n      <div className={accountstyles.statusbox}>\n        {item0 ?\n          <Check style={{ color: '#92e7fa' }}></Check>\n          :\n          <Check style={{ color: '#333333' }}></Check>\n        }\n        {item0 ?\n          <div style={{ color: '#92e7fa' }}>Creating wallet</div>\n          :\n          <div>Creating wallet</div>\n        }\n        {item1 ?\n          <Check style={{ color: '#92e7fa' }}></Check>\n          :\n          <Check style={{ color: '#333333' }}></Check>\n        }\n        {item1 ?\n          <div style={{ color: '#92e7fa' }}>Setting storage on Swarm</div>\n          :\n          <div>Setting storage on Swarm</div>\n        }\n        {item2 ?\n          <Check style={{ color: '#92e7fa' }}></Check>\n          :\n          <Check style={{ color: '#333333' }}></Check>\n        }\n        {item2 ?\n          <div style={{ color: '#92e7fa' }}>Creating Fairdrive</div>\n          :\n          <div>Creating Fairdrive</div>\n        }\n        {item3 ?\n          <Check style={{ color: '#92e7fa' }}></Check>\n          :\n          <Check style={{ color: '#333333' }}></Check>\n        }\n        {item3 ?\n          <div style={{ color: '#92e7fa' }}>Encrypting keys</div>\n          :\n          <div>Encrypting keys</div>\n        }\n      </div>\n\n\n      {item0 && item1 && item2 && item3 ?\n        <div tabIndex=\"2\" className={styles.button} onClick={nextStage}>\n          <div>\n            <div className={styles.buttontext}>To your account</div>\n          </div>\n        </div>\n        : \"\"}\n    </div>\n  );\n}\n\nexport default CreatingAccount;\n","import React, { useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { useDispatch } from \"react-redux\"\nimport defaultAvatar from \"images/defaultAvatar.png\"\n\n// Sub-pages\nimport AccountCreateIntro from \"./pages/AccountCreateIntro\"\nimport MnemonicShow from \"./pages/MnemonicShow\"\nimport MnemonicCheck from \"./pages/MnemonicCheck\"\nimport ChooseUsername from \"./pages/ChooseUsername\"\nimport ChoosePassword from \"./pages/ChoosePassword\"\nimport ChooseAvatar from \"./pages/ChooseAvatar\"\nimport CreatingAccount from \"./pages/CreatingAccount\"\nimport { createNextState } from \"@reduxjs/toolkit\";\n\n// Ids\nconst accountCreateIntroId = \"accountCreateIntroId\"\nconst mnemonicShowId = \"mnemonicShowId\"\nconst mnemonicCheckId = \"mnemonicCheckId\"\nconst chooseUsernameId = \"chooseUsernameId\"\nconst chooseAvatarId = \"chooseAvatarId\"\nconst choosePasswordId = \"choosePasswordId\"\nconst creatingAccountId = \"creatingAccountId\"\n\nexport function AccountCreateRoot() {\n\n    const fds = window.fds\n    const dispatch = useDispatch()\n\n    const [stage, setStage] = useState(accountCreateIntroId)\n    const history = useHistory()\n    // Mnemonic for debugging\n    //const [mnemonic, setMnemonic] = useState([\"scissors\", \"system\", \"judge\", \"reveal\", \"slogan\", \"rice\", \"option\", \"body\", \"bronze\", \"insane\", \"evolve\", \"matter\"])\n    const [mnemonic, setMnemonic] = useState([])\n    const [wallet, setWallet] = useState()\n    const [collection, setCollection] = useState()\n    const [avatar, setAvatar] = useState(defaultAvatar)\n    const [username, setUsername] = useState(\"\")\n    const [password, setPassword] = useState()\n\n    const [accountCreateDone, setAccountCreateDone] = useState(false)\n    const [item0, setItem0] = useState(false)\n    const [item1, setItem1] = useState(false)\n    const [item2, setItem2] = useState(false)\n    const [item3, setItem3] = useState(false)\n\n    // Create account function \n    const createAccount = async () => {\n        setStage(creatingAccountId)\n        const wallet0 = wallet.derivePath(\"m/44'/60'/0'/0/0\")\n        const wallet1 = wallet.derivePath(\"m/44'/60'/1'/0/0\")\n        const wallet2 = wallet.derivePath(\"m/44'/60'/2'/0/0\")\n        setItem0(true)\n        const hash = await fds.Account.SwarmStore.SF.set(\n            wallet0.address,\n            'userdata',\n            wallet0.privateKey,\n            {\n                username: username,\n                useravatar: avatar,\n                publicKey: wallet0.publicKey,\n                address: wallet0.address,\n                addresses: [wallet0.address, wallet1.address]\n            })\n        setItem1(true)\n        const tempFolderId = new Date().toISOString()\n        const tempFolderFeed = await fds.Account.SwarmStore.SF.set(\n            wallet1.address,\n            'fairdrive-temp',\n            wallet1.privateKey,\n            {\n                keyIndex: 1,\n                name: \"Temporary\",\n                ownerAddress: wallet1.address,\n                content: {}\n            })\n        const dappFolderFeed = await fds.Account.SwarmStore.SF.set(\n            wallet2.address,\n            'fairdrive-dappdata',\n            wallet2.privateKey,\n            {\n                keyIndex: 2,\n                name: \"DappData\",\n                ownerAddress: wallet2.address,\n                content: {}\n            })\n        const hash2 = await fds.Account.SwarmStore.SF.set(\n            wallet0.address,\n            'fairdrive',\n            wallet0.privateKey,\n            {\n                \"Temporary\": {\n                    name: 'Temporary',\n                    address: wallet1.address\n                },\n                \"DappData\": {\n                    name: 'DappData',\n                    address: wallet2.address\n                }\n            })\n        setItem2(true)\n        // encrypt mnemonic\n        const encryptedPrivateKey = await window.myWeb3.eth.accounts.encrypt(wallet.privateKey, password);\n\n        // encrypt wallet0\n        const userObject = {\n            status: 'accountSet',\n            username: username,\n            avatar: avatar,\n            address: wallet.address,\n            publicKey: wallet.publicKey,\n            privateKey: encryptedPrivateKey\n        }\n        dispatch({ type: \"SET_ACCOUNT\", data: userObject })\n        setItem3(true)\n    }\n\n    // Router\n    switch (stage) {\n        case accountCreateIntroId:\n            return (\n                <AccountCreateIntro\n                    createStage={() => setStage(mnemonicShowId)}\n                    restoreStage={() => setStage()}\n                    exitStage={() => history.goBack()}\n                />\n            )\n\n        case mnemonicShowId:\n            return (\n                <MnemonicShow\n                    nextStage={() => setStage(mnemonicCheckId)}\n                    exitStage={() => setStage(accountCreateIntroId)}\n                    setMnemonic={setMnemonic}\n                    mnemonic={mnemonic}\n                    setWallet={setWallet}\n                    setCollection={setCollection}\n                />\n            )\n        case mnemonicCheckId:\n            return (\n                <MnemonicCheck\n                    nextStage={() => setStage(chooseUsernameId)}\n                    prevStage={() => setStage(mnemonicShowId)}\n                    exitStage={() => setStage(accountCreateIntroId)}\n                    mnemonic={mnemonic}\n                />\n            )\n        case chooseUsernameId:\n            return (\n                <ChooseUsername\n                    avatar={avatar}\n                    setUsername={setUsername}\n                    username={username}\n                    nextStage={() => setStage(choosePasswordId)}\n                    exitStage={() => setStage(accountCreateIntroId)}\n                    avatarStage={() => setStage(chooseAvatarId)}>\n                </ChooseUsername>\n            );\n        case chooseAvatarId:\n            return (\n                <ChooseAvatar\n                    avatar={defaultAvatar}\n                    exitStage={() => setStage(chooseUsernameId)}\n                    setAvatar={setAvatar}>\n                </ChooseAvatar>\n            );\n        case choosePasswordId:\n            return (\n                <ChoosePassword\n                    createAccount={createAccount}\n                    exitStage={() => setStage(accountCreateIntroId)}\n                    setPassword={setPassword}\n                    password={password}\n                />\n            );\n        case creatingAccountId:\n            return (\n                <CreatingAccount\n                    accountCreateDone={accountCreateDone}\n                    item0={item0}\n                    item1={item1}\n                    item2={item2}\n                    item3={item3}\n                />\n            );\n        default:\n            return <h1>Oops...</h1>\n    }\n}\n\nexport default AccountCreateRoot","import AccountCreateRoot from \"./account-create/AccountCreateRoot\"\n\nexport default [\n    { path: \"/account-create\", exact: true, component: AccountCreateRoot }\n]","import React from 'react'\nimport { Route } from \"react-router-dom\"\nimport pages from \"pages\"\nimport styles from \"styles.module.css\"\n\nfunction App() {\n  return (\n    <div className={styles.swarmcity}>\n      {pages.map(({ path, exact, component }) => (\n        <Route key={path} {...{ path, exact, component }} />\n      ))}\n    </div >\n  )\n}\n\nexport default App","import * as t from \"./actionTypes\";\nimport { persistentReducer } from \"redux-pouchdb-plus\";\n\n// Service > user\n\nconst initialState = {\n    status: 'noAccount',\n};\n\nfunction accountState(state = initialState, action) {\n    switch (action.type) {\n        case t.SET_ACCOUNT:\n            return {\n                ...state,\n                ...action.data\n            };\n\n        case t.RESET_ACCOUNT:\n            return {\n                ...initialState\n            }\n\n        default:\n            return state;\n    }\n}\n\nconst account = persistentReducer(accountState, {\n    name: \"account\"\n});\n\nexport default account\n","import account from \"./account/\"\n\nexport default {\n    account\n};\n","import reducer from \"./reducer\";\n\n// Service > system\n\nexport const mountPoint = \"account\";\n\nexport default {\n    mountPoint,\n    reducer\n};\n","export const CREATE_ACCOUNT = \"CREATE_ACCOUNT\"\nexport const SET_ACCOUNT = \"SET_ACCOUNT\"\nexport const RESET_ACCOUNT = \"RESET_ACCOUNT\"\nexport const CREATE_MNEMONIC = \"CREATE_MNEMONIC\"\nexport const CREATE_SHORTCODE = \"CREATE_SHORTCODE\"\nexport const RESOLVE_SHORTCODE = \"RESOLVE_SHORTCODE\"","import { combineReducers } from \"redux\";\nimport services from \"./services\";\n\nconst initialState = {\n  directories: {\n    '0x1': {\n      dirName: 'DappData',\n      metaHash: '0x...',\n      items: {\n        '0': {\n          itemName: 'File 1.jpg',\n          fileSize: 12233,\n          mimeType: 'JPEG'\n        }\n      }\n    },\n    '0x2': {\n      dirName: 'Images',\n      metaHash: '0x...',\n      items: {\n        '0': {\n          itemName: 'File 2.jpg',\n          fileSize: 12233,\n          mimeType: 'JPEG'\n        }\n      }\n    }\n  },\n  directoryList: [],\n  idInfo: {\n    idString: \"KarsDrive-1\",\n    balanceEth: 1000000000000000000,\n    balanceFdt: 20000000000000000000\n  }\n};\n\nconst globalReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"ADD_DIRECTORY\":\n      return {\n        ...state,\n        directories: [...state.directories, action.directories]\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst servicesReducers = {};\nObject.values(services).forEach(({ mountPoint, reducer }) => {\n  servicesReducers[mountPoint] = reducer;\n});\n\nexport default combineReducers({\n  ...servicesReducers,\n  globalReducer\n});\n","import { all } from \"redux-saga/effects\";\nimport services from \"./services\";\n\nexport default function* rootSaga() {\n  yield all([\n    ...Object.values(services)\n      .filter(service => service.saga)\n      .map(service => service.saga())\n  ]);\n}\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\"\nimport createSagaMiddleware from \"redux-saga\"\nimport { persistentStore } from \"redux-pouchdb-plus\";\nimport PouchDB from \"pouchdb\";\nimport rootReducer from \"./rootReducer\"\nimport rootSaga from \"./rootSaga\"\nimport FDS from \"fds.js\"\nimport Web3 from \"web3\"\n\nwindow.myWeb3 = new Web3(\"https://goerli.infura.io/v3/46958faea5154db687257f9598b0e269\")\nwindow.fds = new FDS()\n\n// create the saga middleware\nconst sagaMiddleware = createSagaMiddleware();\nconst db = new PouchDB({ name: \"fairdrive\" });\nconst pouchMiddleware = persistentStore({ db });\n\nconst initialState = {}\n\nconst store = configureStore({\n    reducer: rootReducer,\n    middleware: [sagaMiddleware, ...getDefaultMiddleware()],\n    enhancers: [pouchMiddleware],\n    preloadedState: initialState\n});\n\nexport default store\n\n// For dev purposes\nwindow.dispatch = (type, kwargs) => {\n    store.dispatch({ type, ...kwargs })\n}\n\n// Run the saga\nsagaMiddleware.run(rootSaga)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Provider } from 'react-redux'\nimport store from './store'\nimport { HashRouter as Router } from \"react-router-dom\"\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n)\n\nserviceWorker.register()","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _FDSUtils = _interopRequireDefault(require(\"./FDS-Utils\"));\n\nvar _FDSCrypto = _interopRequireDefault(require(\"./FDS-Crypto\"));\n\nvar _Hash = _interopRequireDefault(require(\"./models/Hash.js\"));\n\nvar _FDSTrace = _interopRequireDefault(require(\"./FDS-Trace\"));\n\nvar _axios = require(\"axios\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//create stub file class only for node.js applications\nif (typeof File === \"undefined\") {\n  var File = class {\n    constructor(content, name, options) {\n      this.content = content;\n      this.name = name;\n      this.type = options.type;\n    }\n\n  };\n}\n\nclass Swarm {\n  constructor(config, account) {\n    this.config = config;\n    this.account = account;\n    this.gateway = config.swarmGateway;\n    this.rawGateway = config.swarmGateway + '/bzz-raw:/';\n  } //later we'll try to do this offline\n\n\n  getSwarmDigest(string) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      switch (string) {\n        case '/shared/mail':\n          return '0x723beeeb4a880dc9432fdf3b1b53df942c4ec162ffda83037f2ad2ef94b22c23';\n\n        case '/shared':\n          return '0x23e642b7242469a5e3184a6566020c815689149967703a98c0affc14b9ca9b28';\n\n        case '/':\n          return '0xc7f5bbf5fe95923f0691c94f666ac3dfed12456cd33bd018e7620c3d93edd5a6';\n\n        default:\n          var digest = yield _this.sendRequest(_this.rawGateway, 'POST', 'text', string, null, null, true);\n          return '0x' + digest;\n      }\n    })();\n  }\n\n  getSwarmDigestValue(swarmhash) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      swarmhash = swarmhash.replace(/0x/, '');\n\n      switch (swarmhash) {\n        case '723beeeb4a880dc9432fdf3b1b53df942c4ec162ffda83037f2ad2ef94b22c23':\n          return '/shared/mail';\n\n        case '23e642b7242469a5e3184a6566020c815689149967703a98c0affc14b9ca9b28':\n          return '/shared';\n\n        case 'c7f5bbf5fe95923f0691c94f666ac3dfed12456cd33bd018e7620c3d93edd5a6':\n          return '/';\n\n        default:\n          var value = yield _this2.sendRequest(_this2.rawGateway + swarmhash, 'GET', 'text');\n          return value;\n      }\n    })();\n  }\n  /**\n   * Store unencrypted file to swarm\n   * @param {any} file to store\n   * @param {any} encryptedProgressCallback callback\n   * @param {any} uploadedProgressCallback callback\n   * @param {any} progressMessageCallback callback\n   * @returns {Hash} with address, file, time and iv\n   */\n\n\n  storeFilesUnencrypted(files) {\n    var uploadedProgressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n    var progressMessageCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    var pin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var url = this.gateway + '/bzz:/';\n    var formData = new FormData();\n    var size = 0;\n\n    for (var i = files.length - 1; i >= 0; i--) {\n      size += files[i].size;\n      var fileName = files[i].fullPath ? files[i].fullPath.split('/').splice(1).join('/') : files[i].name;\n      formData.append('file', files[i], fileName);\n    }\n\n    return this.sendRequest(url, 'POST', 'text', formData, uploadedProgressCallback, size, pin).then(hash => {\n      return new _Hash.default({\n        address: hash,\n        file: files[0],\n        time: Date.now()\n      }, this.account);\n    }).catch(error => {\n      throw new Error(error);\n    });\n  }\n  /**\n   * Store encrypted file to swarm\n   * @param {any} file to store\n   * @param {any} secret to use\n   * @param {any} encryptedProgressCallback callback\n   * @param {any} uploadedProgressCallback callback\n   * @param {any} progressMessageCallback callback\n   * @returns {Hash} with address, file, time and iv\n   */\n\n\n  storeEncryptedFile(file, secret) {\n    var encryptedProgressCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    var uploadedProgressCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    var progressMessageCallback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : console.log;\n    var pin = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var metadata = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n    progressMessageCallback(\"encrypting\");\n    return _FDSUtils.default.fileToBuffer(file).then(buffer => {\n      var iv = _FDSCrypto.default.generateRandomIV();\n\n      return _FDSCrypto.default.encryptBuffer(buffer, secret, iv).then(encryptedBuffer => {\n        encryptedProgressCallback(true);\n        progressMessageCallback(\"uploading\");\n        return this.postData(encryptedBuffer, uploadedProgressCallback, 'bzz:/', pin).then(hash => {\n          return new _Hash.default({\n            address: hash,\n            file: file,\n            time: Date.now(),\n            iv: '0x' + iv.toString('hex'),\n            meta: metadata\n          }, this.account);\n        }).catch(error => {\n          throw new Error(error);\n        });\n      });\n    });\n  }\n  /**\n   * Get decrypted file\n   * @param {any} hash location\n   * @param {any} secret to decrypt\n   * @param {any} selectedMailbox mailbox to use\n   * @param {any} selectedWallet wallet to use\n   * @returns {any} decrypted file\n   */\n\n\n  getDecryptedFile(hash, secret, selectedMailbox, selectedWallet) {\n    return this.getDataFromManifest(hash.address, hash.file.name).then(retrievedFile => {\n      var decryptedBuffer = _FDSCrypto.default.decryptBuffer(retrievedFile, secret, Buffer.from(hash.iv.substring(2, 34), 'hex'));\n\n      var file;\n\n      if (typeof window === 'object') {\n        var blob = new Blob([decryptedBuffer], {\n          type: hash.file.type\n        });\n        blob.name = hash.file.name;\n        return blob; // file = new File([blob], hash.file.name, { type: hash.file.type });\n      } else {\n        // console.log( new File([decryptedBuffer], hash.file.name, { type: hash.file.type }),  new File([decryptedBuffer], hash.file.name, { type: hash.file.type }).content);\n        return new File([decryptedBuffer], hash.file.name, {\n          type: hash.file.type\n        });\n      }\n    });\n  }\n  /**\n   * Get file from url\n   * @param {any} url url\n   * @returns {any} result of request\n   */\n\n\n  getFile(url) {\n    return this.sendRequest(url, 'GET', 'text');\n  }\n  /**\n  * Get data from url\n  * @param {any} url url\n  * @returns {any} result of request\n  */\n\n\n  getData(url) {\n    return this.sendRequest(url, 'GET', 'arraybuffer');\n  }\n  /**\n   * Get manifest from url\n   * @param {any} swarmHash hash \n   * @param {any} filename file at hash\n   * @returns {any} result of request (manifest)\n   */\n\n\n  getDataFromManifest(swarmHash, filename) {\n    var url = this.rawGateway + swarmHash + \"/\";\n    return this.getFile(url).then(manifestJSON => {\n      var manifest = JSON.parse(manifestJSON);\n\n      if (manifest.entries.length === 1) {\n        return this.getData(this.rawGateway + manifest.entries[0].hash + \"/\").then(data => {\n          return data;\n        });\n      } else {\n        throw new Error(\"couldn't find that file in the manifest.\");\n      }\n    });\n  }\n  /**\n   * Post data \n   * @param {any} data data\n   * @param {any} progressCallback callback \n   * @param {any} protocol protocol to use\n   * @returns {any} swarm request data \n   */\n\n\n  postData(data) {\n    var progressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n    var protocol = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'bzz:/';\n    var pinHeader = arguments.length > 3 ? arguments[3] : undefined;\n    return this.sendRequest(this.gateway + '/' + protocol, 'POST', 'text', data, progressCallback, data.length, pinHeader);\n  }\n\n  pin(hash) {\n    return this.sendRequest(this.gateway + '/bzz-pin/', 'POST', 'text', \"\", progressCallback, 0, true);\n  }\n  /**\n   * Request data\n   * @param {any} url to use\n   * @param {any} requestType type of request\n   * @param {any} data data to send\n   * @param {any} progressCallback callback\n   * @returns {any} result of request\n   */\n\n\n  sendRequest(url, requestType, responseType, data, progressCallback, dataLength) {\n    var pinHeader = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n    var headers = {\n      'Accept': 'application/octet-stream'\n    };\n\n    if (pinHeader) {\n      headers['x-swarm-pin'] = true;\n    }\n\n    _FDSTrace.default.time('sendRequest//Swarm');\n\n    return (0, _axios.request)({\n      responseType: responseType,\n      url: \"\".concat(url),\n      method: requestType,\n      headers: headers,\n      data: data,\n      transformResponse: [function (data) {\n        if (responseType === 'arraybuffer') {\n          return Buffer.from(data);\n        } else {\n          return data;\n        }\n      }],\n      onUploadProgress: event => {\n        if (progressCallback) {\n          progressCallback(Math.floor(event.loaded / dataLength * 100, 2));\n        }\n      }\n    }).then(response => {\n      _FDSTrace.default.timeEnd('sendRequest//Swarm');\n\n      _FDSTrace.default.log(url, requestType);\n\n      return response.data;\n    });\n  }\n\n}\n\nvar _default = Swarm;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar enabled = false;\n\nclass FDSTrace {\n  log() {\n    if (enabled === true) {\n      console.log(...arguments);\n    }\n  }\n\n  time(a) {\n    if (enabled === true) {\n      console.time(a);\n    }\n  }\n\n  timeEnd(a) {\n    if (enabled === true) {\n      console.timeEnd(a);\n    }\n  }\n\n}\n\nvar _default = new FDSTrace();\n\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// general utilities\nclass Utils {\n  /**\n   * Read file into buffer\n   * @param {any} file to use\n   * @returns {Buffer} contents of file\n   */\n  fileToBuffer(file) {\n    // return Buffer.from(file.content[0])\n    return new Promise((resolve, reject) => {\n      if (typeof FileReader === 'undefined') {\n        //node.js\n        resolve(Buffer.from(file.content[0]));\n      } else {\n        //browser\n        var fileReader = new FileReader();\n\n        fileReader.onload = function (event) {\n          // resolve(event.target.result);\n          resolve(Buffer.from(event.target.result));\n        };\n\n        fileReader.readAsArrayBuffer(file);\n      }\n    });\n  }\n  /**\n   * Read file into string\n   * @param {any} file to use\n   * @returns {string} contents of file\n   */\n\n\n  fileToString(file) {\n    return new Promise((resolve, reject) => {\n      if (typeof window === 'undefined') {\n        resolve(file.content[0].toString());\n      } else {\n        var fileReader = new FileReader();\n\n        fileReader.onload = function (event) {\n          resolve(event.target.result);\n        };\n\n        fileReader.readAsText(file);\n      }\n    });\n  }\n\n}\n\nvar _default = new Utils();\n\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web3Utils = require(\"web3-utils\");\n\nvar _ethEnsNamehash = require(\"eth-ens-namehash\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar ENSRegistryContract = require('./contracts/ENSRegistry.js');\n\nvar SubdomainRegistrarContract = require('./contracts/SubdomainRegistrar.js');\n\nvar PublicResolverContract = require('./contracts/PublicResolver.js');\n\nclass FDSENS2 {\n  constructor(account, config) {\n    this.account = account;\n    this.config = config;\n    this.ENSRegistry = new ENSRegistryContract(this.account, config.registryAddress);\n    this.SubdomainRegistrar = new SubdomainRegistrarContract(this.account, config.subdomainRegistrarAddress);\n    this.PublicResolver = new PublicResolverContract(this.account, config.resolverContractAddress);\n  }\n\n  registerSubdomain(subdomain) {\n    var confirm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return this.SubdomainRegistrar.register((0, _web3Utils.sha3)(subdomain), confirm);\n  }\n\n  setResolver(subdomain) {\n    var confirm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain);\n    var addr = this.config.resolverContractAddress;\n    return this.ENSRegistry.setResolver(node, addr, confirm);\n  }\n\n  setAll(subdomain, content, multihash, name) {\n    var confirm = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain);\n    var publicKey = this.account.publicKey;\n    var publicKeyX = publicKey.substring(0, 66);\n    var publicKeyY = \"0x\" + publicKey.substring(66, 130);\n    return this.PublicResolver.setAll(node, this.account.wallet.address, content, multihash, publicKeyX, publicKeyY, name, confirm);\n  }\n\n  getAll(subdomain) {\n    var confirm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain);\n    return this.PublicResolver.getAll(node, confirm);\n  }\n\n  setAddr(subdomain) {\n    var confirm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain); // not needed \n    // let addr = this.config.resolverContractAddress;    \n\n    return this.PublicResolver.setAddr(node, this.account.wallet.address, confirm);\n  }\n\n  setPubkey(subdomain) {\n    var confirm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain);\n    var publicKey = this.account.publicKey;\n    var publicKeyX = publicKey.substring(0, 66);\n    var publicKeyY = \"0x\" + publicKey.substring(66, 130);\n    return this.PublicResolver.setPubkey(node, publicKeyX, publicKeyY, confirm);\n  }\n\n  setMultihash(subdomain, multihash) {\n    var confirm = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain);\n    return this.PublicResolver.setMultihash(node, multihash, confirm);\n  }\n  /**\n   * Get public key of subdoman\n   * @param {string} subdomain name\n   * @returns {string | boolean} returns false if invalid\n   */\n\n\n  getPubKey(subdomain) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + _this.config.domain);\n      return _this.getPubKeyRaw(node);\n    })();\n  }\n  /**\n   * Get owner's address of subdoman\n   * @param {string} subdomain name\n   * @returns {string | boolean} returns false if invalid\n   */\n\n\n  getOwner(subdomain) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + _this2.config.domain);\n      return _this2.ENSRegistry.owner(node);\n    })();\n  }\n  /**\n   * Get public key of subdoman\n   * @param {string} subdomain name\n   * @returns {string | boolean} returns false if invalid\n   */\n\n\n  getPubKeyRaw(node) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var keyCoords = yield _this3.PublicResolver.getPubkey(node);\n      var keyStr = '04' + keyCoords[0].substring(2, 66) + keyCoords[1].substring(2, 66);\n\n      if (keyStr !== \"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\") {\n        return keyStr;\n      } else {\n        return false;\n      }\n\n      return keyStr;\n    })();\n  }\n  /**\n   * Get multihash of subdomain\n   * @param {string} subdomain name\n   * @returns {TransactionObject} transaction object\n   */\n\n\n  getMultihash(subdomain) {\n    var node = (0, _ethEnsNamehash.hash)(subdomain + '.' + this.config.domain);\n    return this.PublicResolver.getMultihash(node);\n  }\n\n}\n\nvar _default = FDSENS2;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nvar _fileSaver = _interopRequireDefault(require(\"file-saver\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\nclass Hash {\n  constructor(attrs, account) {\n    if (attrs.address === undefined) throw new Error('address must be defined');\n    if (attrs.file === undefined) throw new Error('file must be defined');\n    if (attrs.time === undefined) throw new Error('time must be defined'); // if(attrs.iv === undefined) throw new Error('iv must be defined');\n\n    this.address = attrs.address;\n    this.file = attrs.file;\n    this.time = attrs.time;\n    this.iv = attrs.iv;\n    this.meta = attrs.meta; // backwards compatibility\n\n    if (attrs.meta === undefined) {\n      this.meta = {};\n    }\n\n    this.account = account;\n    this.SwarmStore = this.account.SwarmStore;\n    return this;\n  }\n\n  toJSON() {\n    return {\n      address: this.address,\n      file: {\n        name: this.file.name,\n        type: this.file.type,\n        size: this.file.size\n      },\n      time: this.time,\n      iv: this.iv,\n      meta: this.meta\n    };\n  }\n\n  getFile() {\n    var decryptProgressCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : console.log;\n    var downloadProgressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n    return this.SwarmStore.retrieveFile(this.account, this, decryptProgressCallback, downloadProgressCallback);\n  }\n\n  saveAs() {\n    var decryptProgressCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : console.log;\n    var downloadProgressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n    return this.getFile(decryptProgressCallback = console.log, downloadProgressCallback = console.log).then(file => (0, _fileSaver.default)(file));\n  }\n\n  gatewayLink() {\n    return \"\".concat(this.account.Store.config.swarmGateway, \"/bzz:/\").concat(this.address, \"/\").concat(this.file.name);\n  }\n\n}\n\nmodule.exports = Hash;","module.exports = __webpack_public_path__ + \"static/media/defaultAvatar.e9316813.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"baseShadow\":\"styles_baseShadow__3Xdrr\",\"baseGlow\":\"styles_baseGlow__fiX4_\",\"baseGlowText\":\"styles_baseGlowText__1theI\",\"mainTitle1\":\"styles_mainTitle1__2NSyK\",\"mainTitle2\":\"styles_mainTitle2__Si20_\",\"mainTitle3\":\"styles_mainTitle3__LGCpn\",\"mainTitle4\":\"styles_mainTitle4__1V0jS\",\"bodyDefault\":\"styles_bodyDefault__3HIAZ\",\"bodyBold\":\"styles_bodyBold__1X9lW\",\"bodyDetail\":\"styles_bodyDetail__3X0gq\",\"smallLight\":\"styles_smallLight__19t_v\",\"smallBold\":\"styles_smallBold__2dgD2\",\"smallestLight\":\"styles_smallestLight__2N7qc\",\"smallestBold\":\"styles_smallestBold__2t4FG\",\"fair-drive\":\"styles_fair-drive__17zvp\",\"container\":\"styles_container__d38tt\",\"topbar\":\"styles_topbar__1EdBD\",\"brand\":\"styles_brand__3zFIq styles_mainTitle2__Si20_\",\"loginregistertitle\":\"styles_loginregistertitle__2U9ie styles_bodyBold__1X9lW\",\"breadcrumb\":\"styles_breadcrumb__bpbO0 styles_mainTitle2__Si20_\",\"h1\":\"styles_h1__1yNOI styles_mainTitle4__1V0jS\",\"address\":\"styles_address__9xoaG styles_bodyDefault__3HIAZ\",\"space\":\"styles_space__1gPRX\",\"breadcrumbpath\":\"styles_breadcrumbpath__UqK5n styles_bodyBold__1X9lW\",\"exiticonblue\":\"styles_exiticonblue__2iuy7\",\"exitgrayicon\":\"styles_exitgrayicon__wSN_K\",\"closeicon\":\"styles_closeicon__1ph6l\",\"innercontainer\":\"styles_innercontainer__atUd9\",\"logincontainer\":\"styles_logincontainer__1R-KF\",\"register\":\"styles_register__-9W1q\",\"createnew\":\"styles_createnew__26ZmC styles_smallLight__19t_v\",\"button\":\"styles_button__jo6qc styles_bodyBold__1X9lW styles_baseGlow__fiX4_\",\"buttontext\":\"styles_buttontext__Rx19U styles_baseGlowText__1theI\",\"rowfile\":\"styles_rowfile__3vKca\",\"dirName\":\"styles_dirName__1mRTc styles_bodyBold__1X9lW\",\"icons8folder\":\"styles_icons8folder__TMZPE\",\"directoryrow\":\"styles_directoryrow__1zOps\",\"flaticon\":\"styles_flaticon__1-ES6\",\"solid\":\"styles_solid__2wDj6\",\"A1\":\"styles_A1__28MMj\",\"grid-1\":\"styles_grid-1__14Q4R\",\"grid\":\"styles_grid__2je-P\",\"location\":\"styles_location__3GLdJ\",\"myaccount\":\"styles_myaccount__2kWuX\",\"handlebalance\":\"styles_handlebalance__26a3V\",\"avatar\":\"styles_avatar__1frs7\",\"handle\":\"styles_handle__3mz5R styles_smallBold__2dgD2\",\"balance\":\"styles_balance__xoCET styles_smallBold__2dgD2\",\"bigbalance\":\"styles_bigbalance__IVi1A styles_mainTitle2__Si20_\"};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _ethEnsNamehash = require(\"eth-ens-namehash\");\n\nvar _web3Utils = require(\"web3-utils\");\n\nvar _FDSENS = _interopRequireDefault(require(\"./FDS-ENS2.js\"));\n\nvar _FDSMailbox = _interopRequireDefault(require(\"./FDS-Mailbox.js\"));\n\nvar _FDSSwarm = _interopRequireDefault(require(\"./FDS-Swarm.js\"));\n\nvar _FDSSwarmFeeds = _interopRequireDefault(require(\"./FDS-SwarmFeeds.js\"));\n\nvar _FDSCrypto = _interopRequireDefault(require(\"./FDS-Crypto.js\"));\n\nvar _Message = _interopRequireDefault(require(\"./models/Message.js\"));\n\nvar _Hash = _interopRequireDefault(require(\"./models/Hash.js\"));\n\nvar _Contact = _interopRequireDefault(require(\"./models/Contact.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass Mail {\n  constructor(config, account) {\n    this.account = account;\n    this.config = config;\n    this.Mailbox = new _FDSMailbox.default(config);\n    this.Store = new _FDSSwarm.default(config, account);\n    this.SF = new _FDSSwarmFeeds.default(config.swarmGateway);\n    this.SwarmStore = this.account.SwarmStore;\n    this.gasPrice = (0, _web3Utils.toWei)(config.gasPrice.toString(), 'gwei');\n  } // \n  // \n\n  /**\n   * @sendFileTo\n   * TODO: later will replace callbacks with emitted events...\n   * @param {any} senderAccount account\n   * @param {any} recipientSubdomain name\n   * @param {any} file to send\n   * @param {any} encryptProgressCallback callback\n   * @param {any} uploadProgressCallback callback \n   * @param {any} progressMessageCallback callback\n   * @returns {any} success\n   */\n\n\n  lookupContact(senderAccount, recipientSubdomain) {\n    var ENS = new _FDSENS.default(senderAccount, this.config.ensConfig);\n    var multiboxAddress, recipientPublicKey; // let senderSubdomainNameHash = hash(senderAccount.subdomain + '.' + this.config.ensConfig.domain);\n\n    var recipientSubdomainNameHash = (0, _ethEnsNamehash.hash)(recipientSubdomain + '.' + this.config.ensConfig.domain);\n    var feedLocationHash = this.Mailbox.encodeFeedLocationHash(senderAccount.address, recipientSubdomainNameHash); //get public key\n    // progressMessageCallback(`retrieving public key`);\n\n    return ENS.getPubKey(recipientSubdomain).then(publicKey => {\n      //calculate shared secret\n      recipientPublicKey = '0x' + publicKey.substr(2, 130); // let sharedSecret = Crypto.calculateSharedSecret(senderAccount.privateKey, publicKey);\n      // return sharedSecret;\n      //retrieve multihash\n    }).then(secret => {\n      // sharedSecret = secret;\n      // progressMessageCallback(`retrieving mailbox address`);\n      return ENS.getMultihash(recipientSubdomain); //if multihash\n    }).then(hash => {\n      multiboxAddress = hash; // progressMessageCallback(`retrieving connection`);\n\n      if (multiboxAddress === '0x') {\n        throw Error('could not find multihash entry');\n      }\n    }).then(request => {\n      return new _Contact.default({\n        subdomain: recipientSubdomain,\n        publicKey: recipientPublicKey,\n        multiboxAddress: multiboxAddress,\n        feedLocationHash: feedLocationHash\n      });\n    });\n  } // \n  // \n\n  /**\n   * @sendFileTo\n   * TODO: later will replace callbacks with emitted events...\n   * @param {any} senderAccount account\n   * @param {any} recipientSubdomain name\n   * @param {any} file to send\n   * @param {any} encryptProgressCallback callback\n   * @param {any} uploadProgressCallback callback \n   * @param {any} progressMessageCallback callback\n   * @returns {any} success\n   */\n\n\n  send(senderAccount, recipientSubdomain, file, multiboxPath) {\n    var encryptProgressCallback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : console.log;\n    var uploadProgressCallback = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : console.log;\n    var progressMessageCallback = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : console.log;\n    var ENS = new _FDSENS.default(senderAccount, this.config.ensConfig); //get public key from repo\n\n    var sharedSecret, multiboxAddress, recipientPublicKey, message;\n    var senderSubdomainNameHash = (0, _ethEnsNamehash.hash)(senderAccount.subdomain + '.' + this.config.ensConfig.domain);\n    var recipientSubdomainNameHash = (0, _ethEnsNamehash.hash)(recipientSubdomain + '.' + this.config.ensConfig.domain);\n    var feedLocationHash = this.Mailbox.encodeFeedLocationHash(senderAccount.address, recipientSubdomainNameHash); //get public key\n\n    progressMessageCallback(\"retrieving public key\");\n    return ENS.getPubKey(recipientSubdomain).then(publicKey => {\n      //calculate shared secret\n      recipientPublicKey = publicKey;\n\n      var sharedSecret = _FDSCrypto.default.calculateSharedSecret(senderAccount.privateKey, publicKey);\n\n      return sharedSecret; //retrieve multihash\n    }).then(secret => {\n      sharedSecret = secret;\n      progressMessageCallback(\"retrieving mailbox address\");\n      return ENS.getMultihash(recipientSubdomain); //if multihash\n    }).then(hash => {\n      multiboxAddress = hash;\n      progressMessageCallback(\"retrieving connection\");\n\n      if (multiboxAddress !== '0x') {\n        return this.Mailbox.getInboxFeed(senderAccount, senderAccount.subdomain, multiboxAddress, multiboxPath);\n      } else {\n        throw Error('could not find multihash entry');\n      }\n    }).then(request => {\n      //create a new request\n      if (JSON.stringify(request.values) === JSON.stringify({}) || request.values[senderSubdomainNameHash] === undefined) {\n        progressMessageCallback(\"creating connection \".concat(senderAccount.subdomain, \"->\").concat(recipientSubdomain));\n        return this.Mailbox.newInboxFeed(senderAccount, senderAccount.subdomain, senderSubdomainNameHash, multiboxAddress, feedLocationHash, multiboxPath).then(request => {\n          return senderAccount.storeContact(new _Contact.default({\n            subdomain: recipientSubdomain,\n            publicKey: recipientPublicKey,\n            multiboxAddress: multiboxAddress,\n            feedLocationHash: feedLocationHash\n          }));\n        }).then(() => {\n          var flh = this.Mailbox.decodeFeedLocationHash(feedLocationHash);\n          return this.initMessages(recipientPublicKey, senderAccount, flh.topic);\n        });\n      } else {\n        //if there's a request, do nothing\n        progressMessageCallback(\"request found\");\n        return true;\n      }\n    }).then(() => {\n      //store encrypted file\n      progressMessageCallback(\"storing encrypted file\");\n      return this.Store.storeEncryptedFile(file, \"0x\" + sharedSecret, encryptProgressCallback, uploadProgressCallback, progressMessageCallback);\n    }).then(storedFilehash => {\n      //send the resulting hash to the recipient\n      progressMessageCallback(\"sending encrypted message\");\n      var feedLocation = this.Mailbox.decodeFeedLocationHash(feedLocationHash);\n      message = new _Message.default({\n        to: recipientSubdomain,\n        from: senderAccount.subdomain,\n        hash: storedFilehash\n      }, this.config, senderAccount);\n      return this.saveMessage(recipientPublicKey, senderAccount, feedLocation.topic, message, multiboxPath, progressMessageCallback);\n    }).then(() => {\n      return message;\n    });\n  }\n  /**\n   * Receive \n   * @param {any} recipientAccount account\n   * @param {any} message message\n   * @param {any} decryptProgressCallback callback \n   * @param {any} downloadProgressCallback callback\n   * @returns {any} stored file\n   */\n\n\n  receive(recipientAccount, message) {\n    var decryptProgressCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    var downloadProgressCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    //get public key from repo\n    var ENS = new _FDSENS.default(recipientAccount, this.config.ensConfig);\n    return ENS.getPubKey(message.from).then(senderPublicKey => {\n      //calculate shared secret\n      var sharedSecret = _FDSCrypto.default.calculateSharedSecret(recipientAccount.privateKey, senderPublicKey);\n\n      return \"0x\" + sharedSecret;\n    }).then(sharedSecret => {\n      //encrypt and upload to store\n      var storedFile = this.Store.getDecryptedFile(message.hash, sharedSecret, decryptProgressCallback, downloadProgressCallback);\n      return storedFile;\n    });\n  }\n  /**\n   * Retrieves sent file\n   * @param {any} recipientAccount account\n   * @param {any} message message\n   * @param {any} decryptProgressCallback callback\n   * @param {any} downloadProgressCallback callback\n   * @returns {any} stored file\n   */\n\n\n  retrieveSent(recipientAccount, message) {\n    var decryptProgressCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    var downloadProgressCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    //get public key from repo\n    var ENS = new _FDSENS.default(recipientAccount, this.config.ensConfig);\n    return ENS.getPubKey(message.to).then(recipientPublicKey => {\n      //calculate shared secret\n      var sharedSecret = _FDSCrypto.default.calculateSharedSecret(recipientAccount.privateKey, recipientPublicKey);\n\n      return \"0x\" + sharedSecret;\n    }).then(sharedSecret => {\n      //encrypt and upload to store\n      var storedFile = this.Store.getDecryptedFile(message.hash, sharedSecret, decryptProgressCallback, downloadProgressCallback);\n      return storedFile;\n    });\n  } // ...\n\n  /**\n   * Initialize messages\n   * @param {any} recipientPublicKey public key\n   * @param {any} senderAccount account \n   * @param {any} topic name\n   * @returns {any} hash \n   */\n\n\n  initMessages(recipientPublicKey, senderAccount, topic) {\n    var sharedSecret = _FDSCrypto.default.calculateSharedSecret(senderAccount.privateKey, recipientPublicKey);\n\n    return this.SwarmStore.storeEncryptedValue(topic, JSON.stringify({\n      messages: []\n    }), senderAccount, \"0x\" + sharedSecret);\n  }\n  /**\n   * Save message\n   * @param {any} recipientPublicKey public key\n   * @param {any} senderAccount account \n   * @param {any} topic name\n   * @param {any} message to save\n   * @param {any} progressMessageCallback callback\n   * @returns {any} hash\n   */\n\n\n  saveMessage(recipientPublicKey, senderAccount, topic, message, multiboxPath) {\n    var progressMessageCallback = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : console.log;\n    progressMessageCallback(\"retrieving connection message feed\");\n    return this.getAccountMessages(recipientPublicKey, senderAccount, topic, multiboxPath).then(messages => {\n      progressMessageCallback(\"saving message feed\");\n      messages.push(message.toJSON());\n      progressMessageCallback(\"appending message\");\n\n      var sharedSecret = _FDSCrypto.default.calculateSharedSecret(senderAccount.privateKey, recipientPublicKey);\n\n      return this.SwarmStore.storeEncryptedValue(topic, JSON.stringify({\n        messages: messages\n      }), senderAccount, \"0x\" + sharedSecret);\n    });\n  }\n  /**\n   * Get account messages\n   * @param {any} recipientPublicKey public key\n   * @param {any} senderAccount account \n   * @param {any} topic name\n   * @returns {any} array of messages \n   */\n\n\n  getAccountMessages(recipientPublicKey, senderAccount, topic, multiboxPath) {\n    return this.getMessageFeed(recipientPublicKey, senderAccount.address, senderAccount, topic, multiboxPath);\n  }\n  /**\n   * Get messages\n   * @param {any} type of messages, received or sent, received default\n   * @param {any} account account\n   * @returns {any} array of messages\n   */\n\n\n  getMessages() {\n    var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'received';\n    var account = arguments.length > 1 ? arguments[1] : undefined;\n    var path = arguments.length > 2 ? arguments[2] : undefined;\n\n    switch (type) {\n      case 'received':\n        return this.getReceivedMessages(account, path);\n\n      case 'sent':\n        return this.getSentMessages(account, path);\n    }\n  }\n  /**\n   * Get received messages\n   * @param {any} recipientAccount account\n   * @returns {any} array of messages\n   */\n\n\n  getReceivedMessages(recipientAccount, multiboxPath) {\n    var ENS = new _FDSENS.default(recipientAccount, this.config.ensConfig);\n    return this.getSenders(recipientAccount, multiboxPath).then(senders => {\n      var feedPromises = [];\n\n      for (var i = senders.length - 1; i >= 0; i--) {\n        feedPromises.push(new Promise((resolve, reject) => {\n          var feedLocation = this.Mailbox.decodeFeedLocationHash(senders[i].feedLocationHash);\n          return ENS.getPubKeyRaw(senders[i].senderNamehash).then(publicKey => {\n            return this.getMessageFeed(publicKey, feedLocation.address, recipientAccount, feedLocation.topic, multiboxPath).then(resolve);\n          });\n        }));\n      }\n\n      return Promise.all(feedPromises).then(messageFeeds => {\n        return [].concat.apply([], messageFeeds).sort((a, b) => {\n          return a.hash.time > b.hash.time ? 1 : -1;\n        });\n      });\n    });\n  }\n  /**\n   * Get send messages \n   * @param {any} recipientAccount account\n   * @returns {any} array of messages\n   */\n\n\n  getSentMessages(recipientAccount, multiboxPath) {\n    return recipientAccount.getContacts().then(contacts => {\n      var feedPromises = [];\n\n      for (var i = contacts.length - 1; i >= 0; i--) {\n        feedPromises.push(new Promise((resolve, reject) => {\n          var feedLocation = this.Mailbox.decodeFeedLocationHash(contacts[i].feedLocationHash);\n          return this.getMessageFeed(contacts[i].publicKey, feedLocation.address, recipientAccount, feedLocation.topic, multiboxPath).then(resolve);\n        }));\n      }\n\n      return Promise.all(feedPromises).then(messageFeeds => {\n        //just concatenating the messages for now, later we'll be more clever with retrieval...\n        return [].concat.apply([], messageFeeds).sort((a, b) => {\n          return a.hash.time > b.hash.time ? 1 : -1;\n        });\n      });\n    });\n  }\n  /**\n   * Get message feed\n   * @param {any} publicKey public key\n   * @param {any} address address \n   * @param {any} account account\n   * @param {any} topic name\n   * @returns {any} messages with hash objects\n   */\n\n\n  getMessageFeed(publicKey, address, account, topic) {\n    var sharedSecret = _FDSCrypto.default.calculateSharedSecret(account.privateKey, publicKey);\n\n    return this.SwarmStore.retrieveDecryptedValue(topic, address, \"0x\" + sharedSecret).then(decryptedManifest => {\n      var messageParsed = JSON.parse(decryptedManifest).messages;\n      var messageObjects = messageParsed.map(m => new _Message.default(m, this.config, account));\n      var messageObjectsWithHashObjects = messageObjects.map(m => {\n        m.hash = new _Hash.default(m.hash, this.config);\n        return m;\n      });\n      return messageObjectsWithHashObjects;\n    }).catch(error => {\n      if (error.response.status !== 404) {\n        throw new Error(error);\n      } else {\n        return [];\n      }\n    });\n  }\n\n  getTreeSenders(tree) {\n    var senders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (tree.children && tree.children.length > 0) {\n      for (var i = tree.children.length - 1; i >= 0; i--) {\n        senders = Object.assign(senders, this.getTreeSenders(tree.children[i]));\n      }\n\n      return senders;\n    } else {\n      senders = Object.assign(senders, tree.values);\n      return senders;\n    }\n  }\n  /**\n   * Get senders\n   * @param {any} recipientAccount account\n   * @returns {any} sender and location hashes\n   */\n\n\n  getSenders(recipientAccount, multiboxPath) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var ENS = new _FDSENS.default(recipientAccount, _this.config.ensConfig);\n      var multiboxAddress = yield ENS.getMultihash(recipientAccount.subdomain);\n\n      if (multiboxAddress === null) {\n        throw new Error(\"couldn't find mailbox for \".concat(recipientAccount.subdomain));\n      }\n\n      var senderTree = yield _this.Mailbox.getInboxFeeds(recipientAccount, multiboxAddress, multiboxPath);\n\n      var senders = _this.getTreeSenders(senderTree);\n\n      var feeds = [];\n\n      for (var senderNamehash of Object.keys(senders)) {\n        feeds.push({\n          senderNamehash: senderNamehash,\n          feedLocationHash: senders[senderNamehash]\n        });\n      }\n\n      return feeds;\n    })();\n  }\n\n}\n\nvar _default = Mail;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _FDSSwarm = _interopRequireDefault(require(\"./FDS-Swarm.js\"));\n\nvar _Multibox = _interopRequireDefault(require(\"./contracts/Multibox.js\"));\n\nvar _KeyValueTree = _interopRequireDefault(require(\"./contracts/KeyValueTree.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass Multibox {\n  constructor(account, config) {\n    this.account = account;\n    this.con = null;\n    this.roots = null;\n    this.contractAddress = null;\n    this.rootKvt = null;\n    this.kvts = null;\n    this.Store = new _FDSSwarm.default(config, account);\n  }\n\n  at(address) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.mb = yield new _Multibox.default(_this.account, address);\n      _this.contractAddress = address;\n      _this.roots = yield _this.mb.getRoots();\n      _this.rootKvt = new _KeyValueTree.default(_this.account, _this.roots[0]);\n      _this.kvts = _this.roots.map(root => new _KeyValueTree.default(_this.account, root));\n      return _this;\n    })();\n  }\n\n  deploy() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.mb = yield new _Multibox.default(_this2.account);\n      _this2.contractAddress = _this2.mb.contractAddress;\n      _this2.roots = yield _this2.mb.getRoots();\n      _this2.rootKvt = new _KeyValueTree.default(_this2.account, _this2.roots[0]);\n      _this2.kvts = _this2.roots.map(root => new _KeyValueTree.default(_this2.account, root));\n      return _this2;\n    })();\n  } // note - we should use something other than swarm digest id's here eg. encrypted strings in multibox contract\n  // it's unnecessarily expensive and also prone requires swarm hashes to be available from network in order to work\n  // note - would be good to check these in reverse to avoid unneccesary calls\n\n\n  get(path) {\n    var _arguments = arguments,\n        _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var retrievePathNames = _arguments.length > 1 && _arguments[1] !== undefined ? _arguments[1] : true;\n      return _this3.retrievePathValues(path, retrievePathNames);\n    })();\n  }\n\n  set(path, key, value) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this4.createPath(path);\n      var nodeId = yield _this4.Store.getSwarmDigest(path);\n      return _this4.rootKvt.setKeyValue(nodeId, key, value);\n    })();\n  }\n\n  createPath(path, value) {\n    var _arguments2 = arguments,\n        _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      var kvti = _arguments2.length > 2 && _arguments2[2] !== undefined ? _arguments2[2] : 0;\n      var parentNodeId;\n      var splitPath = path.split('/').slice(1);\n\n      if (splitPath[0] === 'root') {\n        //do nothing\n        parentNodeId = yield _this5.rootKvt.getRootId();\n      } else if (splitPath[0] === 'shared') {\n        parentNodeId = yield _this5.rootKvt.getSharedId();\n      } else {\n        throw new Error('path must begin /shared or /root');\n      }\n\n      for (var i = 0; i < splitPath.length - 1; i++) {\n        var currentPath = '/' + splitPath.slice(0, i + 2).join('/');\n        var newNodeId = yield _this5.Store.getSwarmDigest(currentPath);\n        var addChildNode = yield _this5.rootKvt.addChildNode(parentNodeId, newNodeId);\n        parentNodeId = newNodeId;\n      }\n\n      return true;\n    })();\n  }\n\n  retrieveValues(nodeId) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      var keyValues = {};\n      var keyValuesRaw = yield _this6.rootKvt.getKeyValues(nodeId);\n\n      for (var i = 0; i < keyValuesRaw['keys'].length; i++) {\n        keyValues[keyValuesRaw['keys'][i]] = keyValuesRaw['values'][i];\n      }\n\n      return keyValues;\n    })();\n  }\n\n  retrieveTree(nodeId) {\n    var _arguments3 = arguments,\n        _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      var values = _arguments3.length > 1 && _arguments3[1] !== undefined ? _arguments3[1] : false;\n      var retrievePathNames = _arguments3.length > 2 && _arguments3[2] !== undefined ? _arguments3[2] : false;\n      var output = {\n        id: nodeId,\n        parentId: false\n      };\n      var children = yield _this7.rootKvt.getChildren(nodeId);\n\n      if (retrievePathNames === true) {\n        var pathName = yield _this7.Store.getSwarmDigestValue(nodeId);\n        output.name = pathName;\n      }\n\n      if (children.length === 0 && values === false) {\n        output = {\n          id: nodeId,\n          parentId: false\n        };\n      } else if (children.length === 0 && values === true) {\n        output.values = yield _this7.retrieveValues(nodeId);\n      } else {\n        output.values = yield _this7.retrieveValues(nodeId);\n        output.children = yield _this7.retrievesDescendants(nodeId, values, retrievePathNames);\n      }\n\n      return output;\n    })();\n  }\n\n  retrievesDescendants(nodeId) {\n    var _arguments4 = arguments,\n        _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      var values = _arguments4.length > 1 && _arguments4[1] !== undefined ? _arguments4[1] : false;\n      var retrievePathNames = _arguments4.length > 2 && _arguments4[2] !== undefined ? _arguments4[2] : false;\n      var children = yield _this8.rootKvt.getChildren(nodeId);\n      var output = [];\n\n      for (var i = 0; i < children.length; i++) {\n        var descendants = yield _this8.retrievesDescendants(children[i], values, retrievePathNames);\n        var childOutput = {\n          id: children[i],\n          parentId: nodeId\n        };\n\n        if (retrievePathNames === true) {\n          var pathName = yield _this8.Store.getSwarmDigestValue(children[i]);\n          childOutput.name = pathName;\n        }\n\n        if (descendants.length > 0) {\n          childOutput.children = descendants;\n          output.push(childOutput);\n        } else {\n          var keyValues = {};\n\n          if (values === true) {\n            keyValues = yield _this8.retrieveValues(children[i]);\n          }\n\n          childOutput.values = keyValues;\n          output.push(childOutput);\n        }\n      }\n\n      return output;\n    })();\n  } // retrieves tree structure only of path eg. /shared/mail\n\n\n  retrievePathNodes(path) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      var nodeId = yield _this9.Store.getSwarmDigest(path);\n      return yield _this9.retrieveTree(nodeId, false, false);\n    })();\n  } // retrieves tree structure and keyvalues of path eg. /shared/mail\n\n\n  retrievePathValues(path, retrievePathNames) {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      var nodeId = yield _this10.Store.getSwarmDigest(path);\n      return yield _this10.retrieveTree(nodeId, true, retrievePathNames);\n    })();\n  }\n\n}\n\nvar _default = Multibox;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web3Utils = require(\"web3-utils\");\n\nvar _secp256k = _interopRequireDefault(require(\"secp256k1\"));\n\nvar _FDSSwarm = _interopRequireDefault(require(\"./FDS-Swarm\"));\n\nvar _FDSTrace = _interopRequireDefault(require(\"./FDS-Trace\"));\n\nvar _axios = require(\"axios\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// interaction with swarm feeds\nclass SwarmFeeds {\n  /**\n   * Creates a new instance of SwarmFeeds\n   * @constructor\n   * @param {string} swarmNode - The url of the Swarm gateway endpoint.\n   */\n  constructor(swarmNode) {\n    if (typeof swarmNode !== 'string') {\n      throw new Error('You must provide a Swarm gateway endpoint.');\n    }\n\n    this.swarmNode = swarmNode;\n  }\n  /**\n   * Retrieves the Swarm hash associated with pointer of a topic\n   * @get\n   * @param {string} address - 0x prefixed Ethereum address of the owner of the feed.\n   * @param {string} topicName - utf8 string of the topic.\n   * @returns {promise} promise which resolves rejects with error based on ajax request outcome.      \n   */\n\n\n  getHex(address, topicName) {\n    return this.get(address, topicName, 'arraybuffer').then(response => {\n      return (0, _web3Utils.bytesToHex)(response);\n    });\n  }\n  /**\n   * Retrieves the Swarm hash associated with pointer of a topic\n   * @get\n   * @param {string} address - 0x prefixed Ethereum address of the owner of the feed.\n   * @param {string} topicName - utf8 string of the topic.\n   * @param {any} responseType response type\n   * @returns {promise} promise which resolves rejects with error based on ajax request outcome.\n   */\n\n\n  get(address, topicName) {\n    var responseType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'text';\n    var withAddress = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    return this.getResource(topicName, address).then(hash => {\n      return this.sendRequest(\"/bzz-raw:/\".concat(hash, \"/\"), 'GET', responseType).then(response => {\n        if (withAddress) {\n          return {\n            value: response,\n            address: hash\n          };\n        } else {\n          return response;\n        }\n      });\n    });\n  }\n  /**\n   * Retrieves the Swarm hash associated with pointer of a topic\n   * @set\n   * @param {string} address - 0x prefixed Ethereum address of the owner of the feed.\n   * @param {string} topicName - utf8 string of the topic.\n   * @param {string} privateKey - private key of the owner of the feed.\n   * @param {string} data - a text string of data which will be uploaded and the resultant hash set as the pointer location.\n   * @returns {promise} promise which resolves rejects with error based on ajax request outcome.   \n   */\n\n\n  set(address, topicName, privateKey, data) {\n    var pin = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    return this.sendRequest('/bzz-raw:/', 'POST', 'text', (0, _web3Utils.toHex)(data), pin).then(hash => {\n      return this.updateResource(topicName, address, privateKey, (0, _web3Utils.toHex)(hash)).then(() => {\n        return hash;\n      });\n    });\n  }\n  /**\n   * Retrieves the pointer of a topic\n   * @getResource\n   * @param {string} topicName - utf8 string of the topic.\n   * @param {string} address - 0x prefixed Ethereum address of the owner of the feed.\n   * @returns {promise} promise which resolves rejects with error based on ajax request outcome.      \n   */\n\n\n  getResource(topicName, address) {\n    var topic = (0, _web3Utils.padRight)((0, _web3Utils.toHex)(topicName), 64, '0');\n    return this.sendRequest(\"/bzz-feed:/?topic=\".concat(topic, \"&user=\").concat(address), 'GET');\n  }\n  /**\n   * Retrieves the meta information of a topic\n   * @getMeta\n   * @param {string} topicName - utf8 string of the topic.\n   * @param {string} address - 0x prefixed Ethereum address of the owner of the feed.\n   * @returns {promise} promise which resolves rejects with error based on ajax request outcome.      \n   */\n\n\n  getMeta(topicName, address) {\n    var topic = (0, _web3Utils.padRight)((0, _web3Utils.toHex)(topicName), 64, '0');\n    return this.sendRequest(\"/bzz-feed:/?topic=\".concat(topic, \"&user=\").concat(address, \"&meta=1\"), 'GET', 'text');\n  }\n  /**\n   * Updates the content of the feed\n   * @updateResource\n   * @param {string} topicName - utf8 string of the topic.\n   * @param {string} address - 0x prefixed Ethereum address of the owner of the feed.\n   * @param {string} privateKey - private key of the owner of the feed.\n   * @param {string} state - hex encoded state data.\n   * @returns {promise} promise which resolves with ? and rejects with error based on ajax request outcome.   \n   */\n\n\n  updateResource(topicName, address, privateKey, state) {\n    var pin = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var data = (0, _web3Utils.padLeft)(state, 2, '0');\n    var topic = (0, _web3Utils.padRight)((0, _web3Utils.toHex)(topicName), 64, '0');\n    return this.getMeta(topicName, address).then(response => {\n      var metaResponse = JSON.parse(response);\n      var digest = this.feedUpdateDigest(metaResponse, data);\n      var signature = this.signData(digest, privateKey);\n      return this.sendRequest(\"/bzz-feed:/?topic=\".concat(metaResponse.feed.topic, \"&user=\").concat(metaResponse.feed.user, \"&level=\").concat(metaResponse.epoch.level, \"&time=\").concat(metaResponse.epoch.time, \"&signature=\").concat(signature), 'POST', 'text', data).then(response => {\n        var hash = response.substr(1).substr(0, 64);\n        return response;\n      });\n    });\n  }\n  /**\n   * Performs XMLHTTPRequests\n   * @sendRequest\n   * @param {string} url - url of the request.\n   * @param {string} requestType - request type, must be POST or GET.\n   * @param {string} responseType - expected response type, must be text or arraybuffer\n   * @param {arraybuffer} data - binary data contained in ArrayBuffer.\n   * @returns {promise} promise which resolves with data or rejects with error based on ajax request outcome.   \n   */\n\n\n  sendRequest(url, requestType, responseType) {\n    var data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var pinHeader = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n    _FDSTrace.default.time('sendRequest//SwarmFeeds');\n\n    if (data) {\n      data = Buffer.from((0, _web3Utils.hexToBytes)(data));\n    }\n\n    var headers = {\n      'Accept': 'application/octet-stream'\n    };\n\n    if (pinHeader) {\n      headers['x-swarm-pin'] = true;\n    }\n\n    return (0, _axios.request)({\n      responseType: responseType,\n      url: \"\".concat(this.swarmNode).concat(url),\n      method: requestType,\n      headers: headers,\n      data: data,\n      transformResponse: [function (data) {\n        // Do whatever you want to transform the data\n        if (responseType === 'arraybuffer') {\n          return Buffer.from(data);\n        } else {\n          return data;\n        }\n      }]\n    }).then(response => {\n      _FDSTrace.default.timeEnd('sendRequest//SwarmFeeds');\n\n      _FDSTrace.default.log(url, requestType);\n\n      return response.data;\n    });\n  }\n  /**\n   * Signs data using secp256k1 curve\n   * @signData\n   * @param {string} data - hex encoded data.\n   * @param {string} privateKey key to sign\n   * @returns {string} hex encoded signature.\n   */\n\n\n  signData(data, privateKey) {\n    var sigObj = _secp256k.default.sign(Buffer.from((0, _web3Utils.hexToBytes)(data)), Buffer.from((0, _web3Utils.hexToBytes)(privateKey)));\n\n    return \"0x\".concat(sigObj.signature.toString('hex'), \"0\").concat(sigObj.recovery.toString());\n  }\n  /**\n   * Creates the data to sign for the feed update digest\n   * @feedUpdateDigest\n   * @param {object} metaResponse - the server response from getMeta.\n   * @param {string} data - hex encoded data.\n   * @returns {string} sha3 hashed digest.   \n   */\n\n\n  feedUpdateDigest(metaResponse, data) {\n    var dataBytes = (0, _web3Utils.hexToBytes)(data);\n    var topicBytes;\n    var userBytes;\n    var protocolVersion = 0;\n    var topicLength = 32;\n    var userLength = 20;\n    var timeLength = 7;\n    var levelLength = 1;\n    var headerLength = 8;\n    var updateMinLength = topicLength + userLength + timeLength + levelLength + headerLength;\n    protocolVersion = metaResponse.protocolVersion;\n\n    try {\n      topicBytes = (0, _web3Utils.hexToBytes)(metaResponse.feed.topic);\n    } catch (err) {\n      return undefined;\n    }\n\n    try {\n      userBytes = (0, _web3Utils.hexToBytes)(metaResponse.feed.user);\n    } catch (err) {\n      return undefined;\n    }\n\n    var buf = new ArrayBuffer(updateMinLength + dataBytes.length);\n    var view = new DataView(buf);\n    var cursor = 0;\n    view.setUint8(cursor, protocolVersion); // first byte is protocol version.\n\n    cursor += headerLength; // leave the next 7 bytes (padding) set to zero\n\n    topicBytes.forEach(v => {\n      view.setUint8(cursor, v);\n      cursor++;\n    });\n    userBytes.forEach(v => {\n      view.setUint8(cursor, v);\n      cursor++;\n    }); // time is little-endian\n\n    view.setUint32(cursor, metaResponse.epoch.time, true);\n    cursor += 7;\n    view.setUint8(cursor, metaResponse.epoch.level);\n    cursor++;\n    dataBytes.forEach(v => {\n      view.setUint8(cursor, v);\n      cursor++;\n    });\n    return (0, _web3Utils.sha3)((0, _web3Utils.padLeft)((0, _web3Utils.bytesToHex)(new Uint8Array(buf)), 264));\n  }\n  /**\n   * Converts data from hex string to ArrayBuffer\n   * @signData\n   * @param {string} data - hex encoded data.\n   * @returns {arraybuffer} data - array buffer.\n   */\n\n\n  dataToBuffer(data) {\n    return Buffer.from(data, \"hex\");\n    var dataBytes = (0, _web3Utils.hexToBytes)(data);\n    var buf = new ArrayBuffer(dataBytes.length);\n    var dataView = new DataView(buf);\n\n    for (var i = 0; i < dataBytes.length; i++) {\n      dataView.setUint8(i, dataBytes[i]);\n    }\n\n    return buf;\n  }\n\n}\n\nvar _default = SwarmFeeds;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\nclass Contact {\n  constructor(attrs) {\n    if (attrs.subdomain === undefined) throw new Error('subdomain must be defined');\n    if (attrs.publicKey === undefined) throw new Error('publicKey must be defined');\n    if (attrs.multiboxAddress === undefined) throw new Error('mailboxAddress must be defined');\n    if (attrs.feedLocationHash === undefined) throw new Error('feedLocationHash must be defined');\n    this.subdomain = attrs.subdomain;\n    this.publicKey = attrs.publicKey;\n    this.multiboxAddress = attrs.multiboxAddress;\n    this.feedLocationHash = attrs.feedLocationHash;\n    return this;\n  }\n\n  toJSON() {\n    return {\n      subdomain: this.subdomain,\n      publicKey: this.publicKey,\n      multiboxAddress: this.multiboxAddress,\n      feedLocationHash: this.feedLocationHash\n    };\n  }\n\n}\n\nmodule.exports = Contact;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web3Utils = require(\"web3-utils\");\n\nvar _FDSContract = _interopRequireDefault(require(\"./FDS-Contract\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\nclass Tx {\n  constructor(config, account) {\n    this.account = account;\n    this.config = config;\n    this.web3 = this.config.web3;\n  }\n\n  getContract(account, abi, address) {\n    var c = new _FDSContract.default(this.config, account, abi);\n    return c.at(address);\n  }\n\n  deployContract(account, abi, bytecode) {\n    var args = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    var nonce = arguments.length > 4 ? arguments[4] : undefined;\n    var gas = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 12000000;\n    var c = new _FDSContract.default(this.config, account, abi, bytecode); //predict\n\n    return c.deploy(args, gas);\n  }\n\n  syncNonce(account) {\n    return this.web3.eth.getTransactionCount(account.wallet.address);\n  }\n  /**\n   * \n   * @param {any} account to send from\n   * @param {any} toAddress 0xfff\n   * @param {any} amount in eth\n   * @param {any} transactionCallback callback\n   * @param {any} transactionSignedCallback callback\n   * @returns {any} transaction\n   */\n\n\n  pay(account, toAddress, amount) {\n    var gas = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 15000000;\n    var transactionCallback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : console.log;\n    var transactionSignedCallback = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : console.log;\n    return new Promise((resolve, reject) => {\n      var tx = {\n        from: account.address,\n        to: toAddress,\n        gas: gas,\n        gasPrice: this.gasPrice,\n        value: (0, _web3Utils.toWei)(amount, 'ether')\n      };\n      transactionCallback(tx);\n      return this.web3.eth.accounts.signTransaction(tx, account.privateKey).then(signed => {\n        return this.web3.eth.sendSignedTransaction(signed.rawTransaction).once('confirmation', function (i, hash) {\n          resolve(hash);\n        });\n      });\n    });\n  }\n  /**\n   * Ensure address has enough balance\n   * @getBalance\n   * @param {string} address to check\n   * @returns {void} balance of address \n   */\n\n\n  getBalance(address) {\n    try {\n      return this.web3.eth.getBalance(address);\n    } catch (error) {\n      console.error(\"can't access gateway \", config.ethGateway);\n    }\n  }\n\n  getBlockNumber() {\n    return this.web3.eth.getBlockNumber();\n  }\n\n  sign(account, message) {\n    return this.web3.eth.accounts.sign(message, account.privateKey);\n  }\n\n  recover(message, sig) {\n    return this.web3.eth.accounts.recover(message, sig);\n  }\n\n}\n\nvar _default = Tx;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web = _interopRequireDefault(require(\"web3\"));\n\nvar _FDSAccount = _interopRequireDefault(require(\"./FDS-Account\"));\n\nvar _FDSTx = _interopRequireDefault(require(\"./FDS-Tx\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass FDS {\n  defaultConfig() {\n    return {\n      tokenName: 'gas',\n      swarmGateway: 'https://swarm2.fairdatasociety.org',\n      ethGateway: 'https://geth-noordung.fairdatasociety.org',\n      faucetAddress: 'https://faucet-noordung.fairdatasociety.org/gimmie',\n      chainID: '235813',\n      httpTimeout: 1000,\n      gasPrice: 0.001,\n      walletVersion: 1,\n      ensConfig: {\n        domain: 'datafund.eth',\n        registryAddress: '0xA1029cb176082eca658A67fD6807B9bDfB44A695',\n        subdomainRegistrarAddress: '0x0E6a3B5f6800145bAe95C48934B7b5a90Df50722',\n        resolverContractAddress: '0xC91AB84FFad79279D47a715eF91F5fbE86302E4D'\n      }\n    };\n  }\n\n  constructor() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (config === false) {\n      config = this.defaultConfig();\n    }\n\n    config.web3 = new _web.default(new _web.default.providers.HttpProvider(config.ethGateway, config.httpTimeout), null, {\n      transactionConfirmationBlocks: 1\n    });\n    this.ethGateway = config.ethGateway;\n    this.swarmGateway = config.swarmGateway;\n    this.currentAccount = null;\n    this.Account = new _FDSAccount.default(config);\n    this.Tx = new _FDSTx.default(config); // this.Utils = Utils;\n    // this.Crypto = Crypto;\n  }\n  /**\n   * Retrieves accounts stored in localstorage.\n   * @GetAccounts\n   * @returns {any} all accounts\n   */\n\n\n  GetAccounts(walletVersion) {\n    return this.Account.getAll(walletVersion);\n  }\n  /**\n   * Creates an FDS account with associated ENS name and stores the account info in localstorage.\n   * @CreateAccount\n   * @param {string} subdomain - the subdomain of the ENS record.\n   * @param {string} password - password for wallet encryption.\n   * @param {any} feedbackMessageCallback callback\n   * @returns {promise} outcome of attempt to create account, Account object or error.      \n   */\n\n\n  CreateAccount(subdomain, password) {\n    var feedbackMessageCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    return this.Account.create(subdomain, password, feedbackMessageCallback).then(account => {\n      return account;\n    });\n  }\n  /**\n   * Retrieves an FDS account from localstorage unlocks, and sets as context.\n   * @get\n   * @param {string} subdomain name\n   * @param {string} password to use\n   * @returns {boolean} true if successful\n   */\n\n\n  UnlockAccount(subdomain, password) {\n    return this.currentAccount = this.Account.unlock(subdomain, password).then(account => {\n      this.currentAccount = account;\n      return this.currentAccount;\n    });\n  }\n  /**\n   * Removes an FDS account from localstorage.\n   * @deleteAccount\n   * @param {string} subdomain - the subdomain of the configured ENS domain.\n   * @returns {boolean} true if successful\n   */\n\n\n  DeleteAccount(subdomain) {\n    // if the account exists locally\n    // delete it\n    return this.Account.delete(subdomain);\n  }\n  /**\n   * Removes unlocked keys from memory.\n   * @get\n   * @param {string} subdomain name\n   */\n\n\n  LockAccount(subdomain) {\n    // retrieve account\n    // unlock it\n    this.currentAccount = null;\n  }\n  /**\n   * Restores an FDS account from a string.\n   * @get\n   * @param {string} file wallet in JSON\n   * @returns {boolean} true if successful\n   */\n\n\n  RestoreAccount(file) {\n    return this.Account.restoreFromFile(file);\n  }\n  /**\n   * Restores an FDS account from a string.\n   * @get\n   * @param {string} file wallet in JSON\n   * @returns {boolean} true if successful\n   */\n\n\n  RestoreAccountFromJSON(subdomain, json) {\n    return this.Account.restore(subdomain, json);\n  }\n  /**\n   * Restores an FDS account from a private key.\n   * @get\n   * @param {string} private key as a hex string\n   * @returns {boolean} true if successful\n   */\n\n\n  RestoreAccountFromPrivateKey(subdomain, password, privateKey) {\n    return this.Account.restoreFromPrivateKey(subdomain, password, privateKey);\n  }\n  /**\n   * Intigates download of a FDS wallet backup file.\n   * @get\n   * @param {string} subdomain name\n   * @returns {boolean} true if successful\n   */\n\n\n  BackupAccount(subdomain) {\n    return this.Account.get(subdomain).saveBackupAs();\n  }\n  /**\n   * Intigates download of FDS wallet backup JSON.\n   * @get\n   * @param {string} subdomain name\n   * @returns {boolean} true if successful\n   */\n\n\n  BackupAccountAsJSON(subdomain) {\n    return this.Account.get(subdomain).getBackupAsJSON();\n  }\n\n}\n\nvar _default = FDS;\nexports.default = _default;\nmodule.exports = exports.default;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"account-create_container__3NdcF\",\"containergreen\":\"account-create_containergreen__24rsl account-create_container__3NdcF\",\"containerred\":\"account-create_containerred__sljYP account-create_container__3NdcF\",\"formcontainer\":\"account-create_formcontainer__1FtYc account-create_container__3NdcF\",\"closeButton\":\"account-create_closeButton__3zjgh\",\"title\":\"account-create_title__1QZdD styles_mainTitle1__2NSyK\",\"titleblue\":\"account-create_titleblue__1CHBH styles_mainTitle1__2NSyK\",\"formtitle\":\"account-create_formtitle__2gzcM styles_mainTitle1__2NSyK\",\"formsubtitle\":\"account-create_formsubtitle__199uV styles_smallLight__19t_v\",\"subtitle\":\"account-create_subtitle__3_35a styles_bodyDefault__3HIAZ\",\"link\":\"account-create_link__1Ayx_ styles_baseGlowText__1theI\",\"username\":\"account-create_username__1WQGK styles_bodyBold__1X9lW\",\"showkeystoggle\":\"account-create_showkeystoggle__3cERA styles_smallBold__2dgD2\",\"box\":\"account-create_box___GsGi styles_bodyBold__1X9lW\",\"placeholder\":\"account-create_placeholder__3Uv3g\",\"avatarImage\":\"account-create_avatarImage__DaV2F\",\"button\":\"account-create_button__nj0EZ undefined styles_baseShadow__3Xdrr\",\"buttontext\":\"account-create_buttontext__1LWBJ\",\"buttongray\":\"account-create_buttongray__7H5lD undefined styles_baseShadow__3Xdrr\",\"buttontextblue\":\"account-create_buttontextblue__12CFX\",\"uploadicon\":\"account-create_uploadicon__3p-4z\",\"arrowup\":\"account-create_arrowup__Q_BAP\",\"avatareditor\":\"account-create_avatareditor__3bq5u\",\"usernameinputbox\":\"account-create_usernameinputbox__3DSg4\",\"usernameinput\":\"account-create_usernameinput__qwoNz styles_bodyBold__1X9lW\",\"mnemonicinputbox\":\"account-create_mnemonicinputbox__3s9ic\",\"mnemonicinput\":\"account-create_mnemonicinput__cPDmh styles_bodyBold__1X9lW\",\"passwordflex\":\"account-create_passwordflex__2UZT5\",\"flexer\":\"account-create_flexer__3OqLs\",\"dialogiconbox\":\"account-create_dialogiconbox__1FIZw\",\"confirm\":\"account-create_confirm__1MSCL\",\"cancel\":\"account-create_cancel__1s5HZ\",\"sliderbox\":\"account-create_sliderbox__1sBLF\",\"statusbox\":\"account-create_statusbox__2oMVP\",\"statusboxitemactive\":\"account-create_statusboxitemactive__vnq_N\",\"blacktext\":\"account-create_blacktext__22UQe styles_smallBold__2dgD2\",\"choosefile\":\"account-create_choosefile__2pDg4 styles_smallBold__2dgD2\",\"nextbuttonbox\":\"account-create_nextbuttonbox__3ixzS\",\"mnemonic\":\"account-create_mnemonic__1lK4p styles_bodyBold__1X9lW\",\"mnemoniccheck\":\"account-create_mnemoniccheck__1gGIJ\",\"fileinput\":\"account-create_fileinput__38N5L\",\"textField\":\"account-create_textField__1mcno\"};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _FDSUserStore = _interopRequireDefault(require(\"./FDS-UserStore.js\"));\n\nvar _FDSWallet = _interopRequireDefault(require(\"./FDS-Wallet\"));\n\nvar _FDSUtils = _interopRequireDefault(require(\"./FDS-Utils.js\"));\n\nvar _FDSCrypto = _interopRequireDefault(require(\"./FDS-Crypto.js\"));\n\nvar _FDSMail = _interopRequireDefault(require(\"./FDS-Mail.js\"));\n\nvar _FDSSwarm = _interopRequireDefault(require(\"./FDS-Swarm.js\"));\n\nvar _FDSSwarmStore = _interopRequireDefault(require(\"./FDS-SwarmStore.js\"));\n\nvar _FDSFaucet = _interopRequireDefault(require(\"./FDS-Faucet\"));\n\nvar _FDSTx = _interopRequireDefault(require(\"./FDS-Tx\"));\n\nvar _ENSRegistry = _interopRequireDefault(require(\"./abi/ENSRegistry.json\"));\n\nvar _FDSMultibox = _interopRequireDefault(require(\"./FDS-Multibox.js\"));\n\nvar _FDSENS = _interopRequireDefault(require(\"./FDS-ENS2.js\"));\n\nvar _FDSTrace = _interopRequireDefault(require(\"./FDS-Trace\"));\n\nvar _ethEnsNamehash = _interopRequireDefault(require(\"eth-ens-namehash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass FDSAccount {\n  /**\n   * Constructs account\n   * @param {any} config settings \n   */\n  constructor(config) {\n    this.config = config;\n    this.UserStore = new _FDSUserStore.default(config, this);\n    this.Store = new _FDSSwarm.default(config, this);\n    this.SwarmStore = new _FDSSwarmStore.default(config, this);\n    this.Mail = new _FDSMail.default(config, this);\n    this.Tx = new _FDSTx.default(config, this);\n    this.web3 = this.config.web3;\n    this.faucet = new _FDSFaucet.default(config.faucetAddress);\n  }\n  /** \n   * @returns {any} all Users \n   */\n\n\n  getAll(walletVersion) {\n    return this.UserStore.getAll(walletVersion);\n  }\n  /**\n   * Check if mailbox is valid\n   * @isMailboxNameValid\n   * check to see if name conforms to subdomain restrictions\n   * @param {any} mailboxName name\n   * @returns {boolean} is mailbox valid\n   */\n\n\n  isMailboxNameValid(mailboxName) {\n    if (mailboxName === undefined || mailboxName === false) return false;\n    var pattern = /^[a-z0-9_-]*$/;\n    var matches = mailboxName.match(pattern);\n    var pattern2 = /^[A-Z]*$/;\n    var matches2 = mailboxName.match(pattern2);\n\n    if (mailboxName.length < 83 && mailboxName.length > 3 && matches !== null && matches.length > 0 && matches2 === null) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  /**\n   * Check if mailbox name is available\n   * @isMailboxNameAvailable\n   * @param {any} mailboxName name\n   * @returns {boolean} is subdomain available\n   */\n\n\n  isMailboxNameAvailable(subdomain) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var node = _ethEnsNamehash.default.hash(subdomain + '.' + _this.config.ensConfig.domain); //no account exists at this point, so can't use the FDSContract instance\n\n\n      var ENS = _this.Tx.getContract(false, _ENSRegistry.default.abi, _this.config.ensConfig.registryAddress);\n\n      var owner = yield ENS.call('owner', [node]);\n      return owner === '0x0000000000000000000000000000000000000000';\n    })();\n  }\n  /**\n   * Creates an FDS account with associated ENS name and stores the account info in localstorage.\n   * @createSubdomain\n   * @param {string} subdomain name\n   * @param {string} password password\n   * @param {any} feedbackMessageCallback callback\n   * @returns {Promise} promise\n   */\n\n\n  createWallet(password) {\n    var dw = new _FDSWallet.default();\n    return dw.generate(password);\n  }\n\n  createAndStoreAccount(subdomain, password, feedbackMessageCallback) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      feedbackMessageCallback('creating wallet');\n      var wallet = yield _this2.createWallet(password);\n      feedbackMessageCallback('storing user');\n      var user = yield _this2.UserStore.addUser(wallet.walletV3, subdomain);\n      return _this2.unlockByAddress(user.wallet.address, password);\n    })();\n  }\n\n  deployMultibox(user) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      return new _FDSMultibox.default(user, _this3.config).deploy();\n    })();\n  }\n\n  getMultibox(user, subdomain) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      var ENS = new _FDSENS.default(user, _this4.config.ensConfig);\n      var multiboxAddress = yield ENS.getMultihash(subdomain);\n      return new _FDSMultibox.default(user, _this4.config).at(multiboxAddress);\n    })();\n  }\n\n  addENS(user, subdomain, multihash) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      //, multihash = false){\n      var confirmPk = false;\n\n      if (multihash === false) {\n        confirmPk = true;\n      }\n\n      var ENS = new _FDSENS.default(user, _this5.config.ensConfig);\n      yield ENS.registerSubdomain(subdomain);\n      yield ENS.setResolver(subdomain); //\n\n      var content = '0x0000000000000000000000000000000000000000000000000000000000000000';\n      var name = 'subdomain-hidden';\n      yield ENS.setAll(subdomain, content, multihash, name, true);\n      return true;\n    })();\n  } // creates account with ENS and multibox\n\n\n  create(subdomain, password, feedbackMessageCallback) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      _FDSTrace.default.time(\"created account \".concat(subdomain));\n\n      var isValid = _this6.isMailboxNameValid(subdomain);\n\n      if (isValid === false) {\n        throw new Error('account name is not valid.');\n      } else {\n        _FDSTrace.default.time(\"creating account \".concat(subdomain));\n\n        feedbackMessageCallback('checking mailbox name is available');\n        var isAvailable = yield _this6.isMailboxNameAvailable(subdomain);\n        feedbackMessageCallback('MICHELLE-4 mailbox name is available, creating account');\n\n        if (isAvailable === true) {\n          var mb;\n          var user = yield _this6.createAndStoreAccount(subdomain, password, feedbackMessageCallback);\n          var tokenName = _this6.config.tokenName;\n\n          try {\n            feedbackMessageCallback(\"account created, gifting you \".concat(tokenName, \"! \\u2764\"));\n            var fund = yield _this6.faucet.gimmie('0x' + user.wallet.address);\n          } catch (error) {\n            yield _this6.UserStore.delete(subdomain);\n            throw new Error('could not fund account');\n          }\n\n          try {\n            feedbackMessageCallback('deploying multibox');\n            mb = yield _this6.deployMultibox(user);\n          } catch (error) {\n            yield _this6.UserStore.delete(subdomain);\n            throw new Error('could not deploy multibox');\n          } // try {                \n          //     feedbackMessageCallback('creating inbox');\n          //     await mb.createPath('/shared/mail');\n          // }\n          // catch(error){\n          //     throw new Error('could not create inbox');\n          // }\n          // try {                \n\n\n          feedbackMessageCallback('creating ENS subdomain');\n          yield _this6.addENS(user, subdomain, mb.contractAddress); // }\n          // catch(error){\n          //     await this.UserStore.delete(subdomain);\n          //     throw new Error('could not create ENS subdomain');\n          // }\n          // try {                \n\n          feedbackMessageCallback('initialising storage');\n          yield _this6.SwarmStore.initContacts(user);\n          yield _this6.SwarmStore.initStored(user); // }\n          // catch(error){\n          //     throw new Error('could not initialising storage');\n          // }\n\n          _FDSTrace.default.timeEnd(\"created account \".concat(subdomain));\n\n          feedbackMessageCallback(\"created account \".concat(subdomain));\n          return user;\n        } else {\n          throw new Error('account name is not available.');\n        }\n      }\n    })();\n  }\n  /**\n   * Ensure address has enough balance\n   * @ensureHasBalance\n   * @param {string} address to check\n   * @returns {void} \n   */\n\n\n  ensureHasBalance(address) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      var intervalTime = 2000;\n      var tries = 200;\n      return new Promise((resolve, reject) => {\n        var i = 0;\n        var interval = setInterval(() => {\n          i++;\n\n          _this7.web3.eth.getBalance(address).then(balance => {\n            console.log(i + \"/ checking: \" + address + \" balance: \" + balance);\n\n            if (i > tries) {\n              clearInterval(interval);\n              reject(false);\n              return;\n            }\n\n            if (parseInt(balance) > 0) {\n              clearInterval(interval);\n              resolve(true);\n            }\n          });\n        }, intervalTime);\n      });\n    })();\n  }\n  /**\n   * Gets subdomina \n   * @get\n   * @param {any} subdomain name\n   * @returns {User} User \n   */\n\n\n  get(subdomain) {\n    var user = this.UserStore.get(subdomain);\n\n    if (user === false) {\n      throw new Error(\"\".concat(subdomain, \" account does not exist locally, please import it.\"));\n    }\n\n    return user;\n  }\n  /**\n   * Unlock subdomain\n   * @unlock\n   * @param {any} subdomain name\n   * @param {any} password to use\n   * @returns {User} user\n   */\n\n\n  unlockByAddress(address, password) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      var user = _this8.UserStore.getByAddress(address);\n\n      yield user.syncNonce();\n\n      if (user === false) {\n        throw new Error(\"\".concat(address, \" account does not exist locally, please import it.\"));\n      }\n\n      var wallet = new _FDSWallet.default();\n      return wallet.fromJSON(user.wallet, password).then(wallet => {\n        user.address = wallet.address;\n        user.publicKey = wallet.publicKey;\n        user.privateKey = wallet.privateKey;\n        return user;\n      });\n    })();\n  }\n  /**\n   * Unlock subdomain\n   * @unlock\n   * @param {any} subdomain name\n   * @param {any} password to use\n   * @returns {User} user\n   */\n\n\n  unlock(subdomain, password) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      var user = _this9.get(subdomain);\n\n      yield user.syncNonce();\n      var wallet = new _FDSWallet.default();\n      return wallet.fromJSON(user.wallet, password).then(wallet => {\n        user.address = wallet.address;\n        user.publicKey = wallet.publicKey;\n        user.privateKey = wallet.privateKey;\n        return user;\n      });\n    })();\n  }\n  /**\n   * Restore wallet from JSON\n   * @restore    \n   * @param {string} subdomain name\n   * @param {string} walletJSONString json\n   * @returns {User} user\n   */\n\n\n  restore(subdomain, walletJSONString) {\n    return this.UserStore.restore(subdomain, walletJSONString);\n  }\n  /**\n   * Restore from private key \n   * @param {any} subdomain domain to use \n   * @param {any} password password to use \n   * @param {any} privateKey  private key without 0x\n   * returns {any} stored wallet \n   */\n\n\n  restoreFromPrivateKey(subdomain, password, privateKey) {\n    return new _FDSWallet.default().encrypt(privateKey, password).then(walletJSONString => {\n      this.UserStore.restore(subdomain, walletJSONString);\n      return this.unlock(subdomain, password);\n    });\n  }\n  /**\n   * Restore wallet from file\n   * @restoreFromFile\n   * @param {string} file to restore\n   * @returns {any} restored wallet\n   */\n\n\n  restoreFromFile(file) {\n    var match = file.name.match(/fds-wallet-(.*)-backup/);\n\n    if (match.length === 2) {\n      var subdomain = match[1];\n    } else {\n      throw new Error('file name should be in the format fds-wallet-subdomain-backup');\n    }\n\n    return _FDSUtils.default.fileToString(file).then(walletJSON => {\n      this.restore(subdomain, walletJSON);\n    });\n  }\n\n  delete(subdomain) {\n    return this.UserStore.delete(subdomain);\n  }\n\n}\n\nvar _default = FDSAccount;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _FDSUtils = _interopRequireDefault(require(\"./FDS-Utils.js\"));\n\nvar _User = _interopRequireDefault(require(\"./models/User.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//rename to account store\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// stores user accounts\n// https://stackoverflow.com/questions/28572380/conditional-build-based-on-environment-using-webpack\n// if (typeof localStorage === \"undefined\" || localStorage === null) {\n//   var LocalStorage = require('node-localstorage').LocalStorage;\n//   var localStorage = new LocalStorage('./scratch');\n// }\nvar fs = null;\n\nif (typeof localStorage === 'undefined') {\n  fs = require('fs');\n}\n\nclass UserStore {\n  /**\n   * Create user store\n   * @param {any} config configuration settings\n   * @param {any} Account to use\n   */\n  constructor(config, Account) {\n    this.config = config;\n    this.Account = Account;\n    this.users = this.getAll();\n  }\n  /**\n   * Get subdomain\n   * @param {string} subdomain name\n   * @returns {User} user \n   */\n\n\n  get(subdomain) {\n    var results = this.getAll().filter(user => user.subdomain === subdomain);\n\n    if (results.length === 1) {\n      return new _User.default(results[0], this.Account);\n    } else if (results.length === 0) {\n      return false;\n    } else {\n      throw new Error('there should only be one result per subdomain');\n    }\n  }\n  /**\n   * Get subdomain\n   * @param {string} subdomain name\n   * @returns {User} user \n   */\n\n\n  getByAddress(address) {\n    var results = this.getAll().filter(user => user.wallet.address === address);\n\n    if (results.length === 1) {\n      return new _User.default(results[0], this.Account);\n    } else if (results.length === 0) {\n      return false;\n    } else {\n      throw new Error('there should only be one result per address');\n    }\n  }\n  /**\n   *  Get all users\n   *  @returns {User} returns users from local storage\n  */\n\n\n  getAll(walletVersion) {\n    if (this.config.walletVersion === undefined) {\n      walletVersion = 0; //backwards compatibility\n    }\n\n    var wv = walletVersion === undefined ? this.config.walletVersion : walletVersion;\n    var key = this.config.chainID ? \"fds-users_\".concat(this.config.chainID) : 'users';\n    var value;\n\n    if (typeof localStorage === 'undefined') {\n      var scratchDir = this.config.scratchDir !== undefined ? this.config.scratchDir : \"./scratch/\";\n      var scratchDirKey = \"\".concat(scratchDir, \"/\").concat(key);\n      this.initScratchDir(scratchDir, scratchDirKey);\n      value = fs.readFileSync(scratchDirKey);\n    } else {\n      value = localStorage.getItem(key);\n    }\n\n    if (value === null) {\n      return [];\n    } else {\n      var users = [];\n      var usersIndex = JSON.parse(value);\n\n      for (var i = usersIndex.length - 1; i >= 0; i--) {\n        if (wv === 0 && usersIndex[i].version === undefined || //backwards compatibility\n        wv === usersIndex[i].version) {\n          users.push(new _User.default(usersIndex[i], this.Account));\n        }\n      }\n\n      return users;\n    }\n  }\n  /**\n   * Add user to subdomain \n   * @param {any} subdomain name \n   * @param {any} wallet to use\n   * @returns {User} user\n   */\n\n\n  addUser(wallet) {\n    var subdomain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var oldUser = this.getByAddress(wallet.address);\n\n    if (oldUser === false) {\n      var user = new _User.default({\n        version: this.config.walletVersion,\n        subdomain: subdomain,\n        wallet: wallet\n      }, this.Account);\n      this.users.push(user);\n      this.saveAll();\n      return user;\n    } else {\n      if (subdomain === oldUser.subdomain) {\n        return oldUser;\n      } else {\n        throw new Error('user already present in local storage, but with username ' + oldUser.subdomain);\n      }\n    }\n  }\n  /**\n   * Delete subdomain\n   * @param {any} subdomain name\n   */\n\n\n  delete(subdomain) {\n    this.users = this.getAll().filter(user => user.subdomain !== subdomain);\n    this.saveAll();\n  }\n  /**\n   * Save all \n   * @returns {any} result \n   */\n\n\n  saveAll() {\n    var key = this.config.chainID ? \"fds-users_\".concat(this.config.chainID) : 'users';\n    var users = [];\n\n    for (var i = this.users.length - 1; i >= 0; i--) {\n      users.push(this.users[i].toJSON());\n    }\n\n    if (typeof localStorage === 'undefined') {\n      var scratchDir = this.config.scratchDir !== undefined ? this.config.scratchDir : \"./scratch/\";\n      var scratchDirKey = \"\".concat(scratchDir, \"/\").concat(key);\n      this.initScratchDir(scratchDir, scratchDirKey);\n      return fs.writeFileSync(scratchDirKey, JSON.stringify(users));\n    } else {\n      return localStorage.setItem(key, JSON.stringify(users));\n    }\n  }\n  /**\n   * Restore subdomain from JSON wallet \n   * @param {string} subdomain name\n   * @param {string} walletJSONString json wallet as string\n   * @returns {User} user\n   */\n\n\n  restore(subdomain, walletJSONString) {\n    var wallet = JSON.parse(walletJSONString);\n    return this.addUser(wallet, subdomain);\n  }\n\n  initScratchDir(scratchDir, scratchDirKey) {\n    if (!fs.existsSync(scratchDir)) {\n      fs.mkdirSync(scratchDirKey);\n    }\n\n    if (!fs.existsSync(scratchDirKey)) {\n      fs.writeFileSync(scratchDirKey, JSON.stringify([]));\n    }\n  }\n\n}\n\nvar _default = UserStore;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nvar _fileSaver = _interopRequireDefault(require(\"file-saver\"));\n\nvar _FDSENS = _interopRequireDefault(require(\"../FDS-ENS2.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass User {\n  constructor(attrs, Account) {\n    if (attrs.subdomain === undefined) throw new Error('subdomain must be defined');\n    if (attrs.wallet === undefined) throw new Error('wallet must be defined');\n    this.Account = Account;\n    this.Mail = this.Account.Mail;\n    this.Tx = this.Account.Tx;\n    this.SwarmStore = this.Account.SwarmStore;\n    this.version = attrs.version || undefined;\n    this.subdomain = attrs.subdomain;\n    this.wallet = attrs.wallet;\n    this.nonce = false;\n    return this;\n  }\n\n  syncNonce() {\n    return this.Tx.syncNonce(this).then(nonce => {\n      this.nonce = nonce;\n    });\n  }\n\n  toJSON() {\n    return {\n      subdomain: this.subdomain,\n      wallet: this.wallet,\n      version: this.version\n    };\n  }\n\n  sign(message) {\n    return this.Tx.sign(this, message);\n  }\n\n  recover(message, sig) {\n    return this.Tx.recover(message, sig);\n  }\n\n  deployContract(abi, bytecode) {\n    var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var nonce = arguments.length > 3 ? arguments[3] : undefined;\n    var gas = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 15000000;\n    return this.Tx.deployContract(this, abi, bytecode, args, nonce, gas);\n  }\n\n  getContract(abi, address) {\n    return this.Tx.getContract(this, abi, address);\n  }\n  /**\n   * Send file \n   * @param {any} recipientSubdomain name \n   * @param {any} file to send \n   * @param {any} encryptionCallback callback\n   * @param {any} uploadCallback callback\n   * @param {any} progressMessageCallback callback\n   * @returns {any} result\n   */\n\n\n  send(recipientSubdomain, file, multiboxPath) {\n    var encryptionCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    var uploadCallback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : console.log;\n    var progressMessageCallback = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : console.log;\n    return this.Mail.send(this, recipientSubdomain, file, multiboxPath, encryptionCallback, uploadCallback, progressMessageCallback);\n  }\n  /**\n  * send tokens\n  * @param {any} recipientAddress 0xfff\n  * @param {any} amount in eth\n  * @param {any} transactionCallback callback\n  * @param {any} transactionSignedCallback callback\n  * @returns {any} transaction\n  */\n\n\n  payAddress(recipientAddress, amount) {\n    var gas = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 15000000;\n    var transactionCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    var transactionSignedCallback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : console.log;\n    return this.Tx.pay(this, recipientAddress, amount, gas, transactionCallback, transactionSignedCallback);\n  }\n  /**\n  * Send amount of tokens to subdomain\n  * @param {any} subdomain to whom to send subdomain\n  * @param {any} amount in ethers\n  * @returns {any} result\n  */\n\n\n  pay(recipientSubdomain, amount) {\n    var _arguments = arguments,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      var gas = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : 15000000;\n      var transactionCallback = _arguments.length > 3 && _arguments[3] !== undefined ? _arguments[3] : console.log;\n      var transactionSignedCallback = _arguments.length > 4 && _arguments[4] !== undefined ? _arguments[4] : console.log;\n      var ENS = new _FDSENS.default(_this, _this.Account.config.ensConfig);\n      var recipientAddress = yield ENS.getOwner(recipientSubdomain);\n      return _this.payAddress(recipientAddress, amount, gas, transactionCallback, transactionSignedCallback);\n    })();\n  }\n  /**\n   * Send file \n   * @param {any} recipientSubdomain name \n   * @param {any} file to send \n   * @param {any} encryptionCallback callback\n   * @param {any} uploadCallback callback\n   * @param {any} progressMessageCallback callback\n   * @returns {any} result\n   */\n\n\n  getBalance() {\n    return this.Tx.getBalance(this.address);\n  }\n\n  getBlockNumber() {\n    return this.Tx.getBlockNumber();\n  }\n  /**\n    * Receive file\n    * @param {any} message that points to file\n    * @param {any} decryptionCallback callback \n    * @param {any} downloadCallback callback\n    * @returns {any} returns file if success\n    */\n\n\n  receive(message) {\n    var _arguments2 = arguments,\n        _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var decryptionCallback = _arguments2.length > 1 && _arguments2[1] !== undefined ? _arguments2[1] : console.log;\n      var downloadCallback = _arguments2.length > 2 && _arguments2[2] !== undefined ? _arguments2[2] : console.log;\n\n      if (message.to === _this2.subdomain) {\n        return yield _this2.Mail.receive(_this2, message, decryptionCallback, downloadCallback);\n      } else if (message.from === _this2.subdomain) {\n        return yield _this2.Mail.retrieveSent(_this2, message, decryptionCallback, downloadCallback);\n      } else {\n        throw Error('there was a problem...');\n      }\n    })();\n  }\n  /**\n   * Get messages\n   * @param {any} query to lookup to\n   * @returns {any} available messages\n   */\n\n\n  messages() {\n    var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'received';\n    var multiboxPath = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (['received', 'sent'].indexOf(query) === -1) {\n      throw new Error('must be of type received or sent');\n    }\n\n    return this.Mail.getMessages(query, this, multiboxPath);\n  }\n  /**\n   * store value\n   * @param {any} key to store under\n   * @param {any} value to store\n   * @returns {any} stored result\n   */\n\n\n  storeValue(key, value) {\n    var pin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return this.SwarmStore.storeValue(key, value, this, pin);\n  }\n  /**\n   * retrieve value\n   * @param {any} key to lookup\n   * @returns {any} retrieved value\n   */\n\n\n  retrieveValue(key) {\n    return this.SwarmStore.retrieveValue(key, this);\n  }\n  /**\n   * store encrypted value\n   * @param {any} key to store under\n   * @param {any} value to store\n   * @returns {any} decrypted value if exists\n   */\n\n\n  storeEncryptedValue(key, value) {\n    return this.SwarmStore.storeEncryptedValue(key, value, this, this.privateKey);\n  }\n  /**\n   * retrieve decrypted value\n   * @param {any} key to lookup\n   * @returns {any} decrypted value if exists \n   */\n\n\n  retrieveDecryptedValue(key) {\n    return this.SwarmStore.retrieveDecryptedValue(key, this.address, this.privateKey);\n  }\n  /** @returns {Contact} array of contacts */\n\n\n  getContacts() {\n    return this.SwarmStore.getContacts(this);\n  }\n  /**\n   * \n   * @param {Contact} contact to store\n   * @returns {any} stored\n   */\n\n\n  storeContact(contact) {\n    return this.SwarmStore.storeContact(this, contact);\n  }\n  /**\n   * Store file\n   * @param {any} file to store\n   * @param {any} encryptionCallback callback \n   * @param {any} uploadCallback callback \n   * @param {any} progressMessageCallback callback \n   * @returns {string} hash where stored\n   */\n\n\n  store(file) {\n    var encryptionCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n    var uploadCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    var progressMessageCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    var metadata = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    var showManifestAddresses = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n    var pin = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n    return this.SwarmStore.storeFile(this, file, encryptionCallback, uploadCallback, progressMessageCallback, metadata, showManifestAddresses, pin);\n  }\n  /**\n   * access stored manifest\n   */\n\n\n  storedManifest() {\n    return this.SwarmStore.getStoredManifest(this);\n  }\n\n  updateStoredManifest(manifest) {\n    return this.SwarmStore.updateStoredManifest(manifest, this);\n  }\n\n  updateStoredMeta(hash, updateMeta) {\n    return this.SwarmStore.updateStoredMeta(hash, updateMeta, this);\n  }\n  /**\n   * check stored files\n   * @param {any} query to lookup\n   * @returns {any} stored \n   */\n\n\n  stored(query) {\n    return this.SwarmStore.getStored(query, this).then(response => {\n      return response.files;\n    });\n  }\n  /** Get backup of wallet \n   * @returns {any} file\n   */\n\n\n  getBackup() {\n    return {\n      data: JSON.stringify(this.wallet),\n      name: \"fds-wallet-\".concat(this.subdomain, \"-backup.json\")\n    };\n  }\n  /** Get backup of wallet \n   * @returns {any} file\n   */\n\n\n  getBackupAsJSON() {\n    return JSON.stringify(this.wallet);\n  }\n  /** get wallet file \n   *  @returns {any} wallet file */\n\n\n  getBackupFile() {\n    return new File([JSON.stringify(this.wallet)], \"fds-wallet-\".concat(this.subdomain, \"-backup.json\"), {\n      type: 'application/json'\n    });\n  }\n  /** Save wallet backup\n   *  @returns {any} result of save operation */\n\n\n  saveBackupAs() {\n    return (0, _fileSaver.default)(this.getBackupFile());\n  }\n\n  getMultibox(subdomain) {\n    return this.Account.getMultibox(this, subdomain);\n  }\n\n  lookupContact(subdomain) {\n    return this.Mail.lookupContact(this, subdomain);\n  }\n\n}\n\nmodule.exports = User;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _ENSRegistry = require(\"../abi/ENSRegistry.json\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass ENSRegistry {\n  constructor(FDSAccount) {\n    var contractAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    this.account = FDSAccount;\n    this.contractAddress = contractAddress;\n    this.con = false;\n\n    if (contractAddress !== false) {\n      this.con = FDSAccount.getContract(_ENSRegistry.abi, contractAddress);\n    }\n\n    return this;\n  }\n\n  owner(node) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return _this.con.call('owner', [node]);\n    })();\n  }\n\n  setResolver(node, address) {\n    var _arguments = arguments,\n        _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : false;\n      return _this2.con.send('setResolver', [node, address], confirm);\n    })();\n  }\n\n  setAddr(node, address) {\n    var _arguments2 = arguments,\n        _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments2.length > 2 && _arguments2[2] !== undefined ? _arguments2[2] : false;\n      return _this3.con.send('setResolver', [node, address], confirm);\n    })();\n  }\n\n}\n\nvar _default = ENSRegistry;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _SubdomainRegistrar = require(\"../abi/SubdomainRegistrar.json\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass SubdomainRegistrar {\n  constructor(FDSAccount) {\n    var contractAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    this.account = FDSAccount;\n    this.contractAddress = contractAddress;\n    this.con = false;\n\n    if (contractAddress !== false) {\n      this.con = FDSAccount.getContract(_SubdomainRegistrar.abi, contractAddress);\n    }\n\n    return this;\n  }\n\n  register(subdomain) {\n    var _arguments = arguments,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments.length > 1 && _arguments[1] !== undefined ? _arguments[1] : false;\n      return _this.con.send('register', [subdomain, _this.account.wallet.address], confirm);\n    })();\n  }\n\n}\n\nvar _default = SubdomainRegistrar;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _PublicResolver = require(\"../abi/PublicResolver.json\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass PublicResolver {\n  constructor(FDSAccount) {\n    var contractAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    this.account = FDSAccount;\n    this.contractAddress = contractAddress;\n    this.con = false;\n\n    if (contractAddress !== false) {\n      this.con = FDSAccount.getContract(_PublicResolver.abi, contractAddress);\n    }\n\n    return this;\n  } // set all params in one transactions\n\n\n  setAll(node, address, content, multihash, pubKeyX, pubKeyY, name) {\n    var _arguments = arguments,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments.length > 7 && _arguments[7] !== undefined ? _arguments[7] : false;\n      return _this.con.send('setAll', [node, address, content, multihash, pubKeyX, pubKeyY, name], confirm);\n    })();\n  } // returns { addres, content, multihash, x,y, name }\n\n\n  getAll(node) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this2.con.call('getAll', [node]);\n    })();\n  }\n\n  setResolver(node, address) {\n    var _arguments2 = arguments,\n        _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments2.length > 2 && _arguments2[2] !== undefined ? _arguments2[2] : false;\n      return _this3.con.send('setResolver', [node, address], confirm);\n    })();\n  }\n\n  setAddr(node, address) {\n    var _arguments3 = arguments,\n        _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments3.length > 2 && _arguments3[2] !== undefined ? _arguments3[2] : false;\n      return _this4.con.send('setAddr', [node, address], confirm);\n    })();\n  }\n\n  setPubkey(node, pubkeyX, pubkeyY) {\n    var _arguments4 = arguments,\n        _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments4.length > 3 && _arguments4[3] !== undefined ? _arguments4[3] : false;\n      return _this5.con.send('setPubkey', [node, pubkeyX, pubkeyY], confirm);\n    })();\n  }\n\n  setMultihash(node, multihash) {\n    var _arguments5 = arguments,\n        _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      var confirm = _arguments5.length > 2 && _arguments5[2] !== undefined ? _arguments5[2] : false;\n      return _this6.con.send('setMultihash', [node, multihash], confirm);\n    })();\n  }\n\n  getPubkey(namehash) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this7.con.call('pubkey', [namehash]);\n    })();\n  }\n\n  getMultihash(namehash) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this8.con.call('multihash', [namehash]);\n    })();\n  }\n\n}\n\nvar _default = PublicResolver;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _FDSCrypto = _interopRequireDefault(require(\"./FDS-Crypto.js\"));\n\nvar _web = _interopRequireDefault(require(\"web3\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// thin wrapper around ethereumjs-wallet\nvar web3 = new _web.default();\n\nclass WalletClass {\n  constructor(attrs) {\n    this.address = attrs.address || null;\n    this.publicKey = attrs.publicKey || null;\n    this.privateKey = attrs.privateKey || null;\n  }\n\n}\n\nclass Wallet {\n  /**\n   * Generate new wallet \n   * @param {string} password to use when generating wallet\n   * @returns {Wallet} new wallet\n   */\n  generate(password) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        var account = web3.eth.accounts.create();\n        var wallet = new WalletClass({\n          address: account.address.toLowerCase(),\n          publicKey: _FDSCrypto.default.privateToPublicKey(account.privateKey),\n          privateKey: account.privateKey\n        });\n        this.wallet = wallet;\n        this.walletV3 = web3.eth.accounts.encrypt(account.privateKey, password);\n        resolve(this);\n      });\n    });\n  }\n  /**\n   * Create wallet from json string \n   * @param {string} walletJSON string\n   * @param {string} password to use\n   * @returns {Wallet} wallet\n   */\n\n\n  fromJSON(walletJSON, password) {\n    return new Promise((resolve, reject) => {\n      try {\n        var account = web3.eth.accounts.decrypt(walletJSON, password);\n        var wallet = new WalletClass({\n          address: account.address.toLowerCase(),\n          publicKey: _FDSCrypto.default.privateToPublicKey(account.privateKey),\n          privateKey: account.privateKey\n        });\n        resolve(wallet);\n      } catch (err) {\n        if (err.message === \"Key derivation failed - possibly wrong passphrase\") {\n          reject(false);\n        } else {\n          throw new Error(err);\n        }\n      }\n    });\n  }\n  /**\n   * Restores wallet from private key\n   * @param {string} privateKey private key string, no 0x\n   * @param {string} password to use\n   * @returns {Wallet} wallet\n   */\n\n\n  encrypt(privateKey, password) {\n    return new Promise((resolve, reject) => {\n      try {\n        var walletV3 = web3.eth.accounts.encrypt(privateKey, password);\n        var walletJSON = JSON.stringify(walletV3);\n        resolve(walletJSON);\n      } catch (err) {\n        throw new Error(err);\n      }\n    });\n  }\n\n}\n\nvar _default = Wallet;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web3Utils = require(\"web3-utils\");\n\nvar _FDSMultibox = _interopRequireDefault(require(\"./FDS-Multibox.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass Mailbox {\n  constructor(config) {\n    this.config = config;\n    this.web3 = this.config.web3;\n    this.gasPrice = (0, _web3Utils.toWei)(config.gasPrice.toString(), 'gwei');\n  }\n  /**\n   * encode feed locatio hash\n   * @param {any} senderAddress address\n   * @param {any} recipientNamehash recepient hash \n   * @returns {any} encoded sender and recipient hash\n   */\n\n\n  encodeFeedLocationHash(senderAddress, recipientNamehash) {\n    return senderAddress + recipientNamehash.substr(42, 66);\n  }\n  /**\n   * subdomain name hash to feed location hash\n   * @param {any} recipientNamehash hash of recipient name\n   * @returns {any} substring of recepient name hash that is feed location hash\n   */\n\n\n  subdomainNameHashToFeedLocationHash(recipientNamehash) {\n    return recipientNamehash.substr(42, 66);\n  }\n  /**\n   * Decode feed location\n   * @param {any} feedLocationHash hash of feed location\n   * @returns {any} object with address and topic\n   */\n\n\n  decodeFeedLocationHash(feedLocationHash) {\n    return {\n      address: feedLocationHash.substring(0, 42),\n      topic: feedLocationHash.substr(42, 66)\n    };\n  } // async newInboxFeed(account, recipientSubdomain, multiboxAddress, feedLocationHash, applicationDomain = 'shared') {\n  //     let multibox = await new Multibox(account, this.config).at(multiboxAddress);\n  //     return multibox.set(`/shared/mail/$(applicationDomain)/$(senderAccount.subdomain)`, feedLocationHash);\n  // }\n  // async getInboxFeed(account, subdomain, multiboxAddress, applicationDomain = 'shared'){\n  //     let multibox = await new Multibox(account, this.config).at(multiboxAddress);\n  //     return multibox.get(`/shared/mail/$(applicationDomain)/$(subdomain)`);\n  // }\n\n\n  newInboxFeed(senderAccount, subdomain, senderSubdomainNamehash, multiboxAddress, feedLocationHash, multiboxPath) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var multibox = yield new _FDSMultibox.default(senderAccount, _this.config).at(multiboxAddress);\n      return multibox.set(multiboxPath, senderSubdomainNamehash, feedLocationHash);\n    })();\n  }\n\n  getInboxFeed(senderAccount, subdomain, multiboxAddress, path) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var multibox = yield new _FDSMultibox.default(senderAccount, _this2.config).at(multiboxAddress);\n      return multibox.get(path);\n    })();\n  }\n\n  getInboxFeeds(account, multiboxAddress, path) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var multibox = yield new _FDSMultibox.default(account, _this3.config).at(multiboxAddress);\n      return multibox.get(path);\n    })();\n  }\n\n}\n\nvar _default = Mailbox;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Multibox = require(\"../abi/Multibox.json\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass Multibox {\n  constructor(FDSAccount) {\n    var contractAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    this.account = FDSAccount;\n    this.contractAddress = contractAddress;\n    this.con = false;\n\n    if (contractAddress !== false) {\n      this.con = FDSAccount.getContract(_Multibox.abi, contractAddress);\n    } else {\n      return this.deploy();\n    }\n\n    return this;\n  }\n\n  deploy() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.con = yield _this.account.deployContract(_Multibox.abi, _Multibox.bytecode);\n      _this.contractAddress = _this.con.contractAddress;\n      var init = yield _this.con.send('init', [], true);\n      return _this;\n    })();\n  }\n\n  getRoots() {\n    var _arguments = arguments,\n        _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var address = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : false;\n      return _this2.con.call('getRoots', []);\n    })();\n  }\n\n}\n\nvar _default = Multibox;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _KeyValueTree = require(\"../abi/KeyValueTree.json\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nclass KeyValueTree {\n  constructor(FDSAccount, contractAddress) {\n    this.account = FDSAccount;\n    this.contractAddress = contractAddress;\n    this.con = FDSAccount.getContract(_KeyValueTree.abi, contractAddress);\n  }\n\n  getSharedId() {\n    var _arguments = arguments,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      var address = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : false;\n      return _this.con.call('getSharedId', []);\n    })();\n  }\n\n  getRootId() {\n    var _arguments2 = arguments,\n        _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var address = _arguments2.length > 0 && _arguments2[0] !== undefined ? _arguments2[0] : false;\n      return _this2.con.call('getRootId', []);\n    })();\n  }\n\n  setKeyValue(nodeId, key, value) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this3.con.send('setKeyValue', [nodeId, key, value], true);\n    })();\n  }\n\n  getKeyValue(nodeId, key) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this4.con.call('getValue', [nodeId, key]);\n    })();\n  }\n\n  getKeyValues(nodeId) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this5.con.call('getKeysValues', [nodeId]);\n    })();\n  }\n\n  addChildNode(parentNodeId, newNodeId) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this6.con.send('addChildNode', [parentNodeId, newNodeId]);\n    })();\n  }\n\n  getChildren(parentNodeId) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this7.con.call('getChildren', [parentNodeId]);\n    })();\n  }\n\n}\n\nvar _default = KeyValueTree;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nvar _fileSaver = _interopRequireDefault(require(\"file-saver\"));\n\nvar _FDSMail = _interopRequireDefault(require(\"../FDS-Mail.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\nclass Message {\n  constructor(attrs, config, account) {\n    if (attrs.to === undefined) throw new Error('to must be defined');\n    if (attrs.from === undefined) throw new Error('from must be defined');\n    if (attrs.hash === undefined) throw new Error('hash must be defined');\n    this.to = attrs.to;\n    this.from = attrs.from;\n    this.hash = attrs.hash;\n    this.account = account;\n    this.Mail = this.account.Mail;\n    return this;\n  }\n\n  toJSON() {\n    return {\n      to: this.to,\n      from: this.from,\n      hash: this.hash.toJSON()\n    };\n  }\n  /**\n    * get file for this message\n    * @param {any} decryptProgressCallback callback\n    * @param {any} downloadProgressCallback callback\n    * @returns {File} file \n   */\n\n\n  getFile() {\n    var decryptProgressCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : console.log;\n    var downloadProgressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n\n    if (this.to === this.account.subdomain) {\n      return this.Mail.receive(this.account, this, decryptProgressCallback, downloadProgressCallback);\n    } else if (this.from === this.account.subdomain) {\n      return this.Mail.retrieveSent(this.account, this, decryptProgressCallback, downloadProgressCallback);\n    } else {\n      throw Error('there was a problem...');\n    }\n  }\n\n  saveAs() {\n    var decryptProgressCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : console.log;\n    var downloadProgressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.log;\n    return this.getFile(decryptProgressCallback = console.log, downloadProgressCallback = console.log).then(file => (0, _fileSaver.default)(file));\n  }\n\n}\n\nmodule.exports = Message;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web3Utils = require(\"web3-utils\");\n\nvar _Hash = _interopRequireDefault(require(\"./models/Hash.js\"));\n\nvar _FDSSwarmFeeds = _interopRequireDefault(require(\"./FDS-SwarmFeeds.js\"));\n\nvar _FDSCrypto = _interopRequireDefault(require(\"./FDS-Crypto.js\"));\n\nvar _Contact = _interopRequireDefault(require(\"./models/Contact.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// stores files, values, contacts and encrypted values\nclass SwarmStore {\n  /**\n   * \n   * @param {any} config configuration settings\n   * @param {any} Account to use\n   */\n  constructor(config, Account) {\n    this.config = config;\n    this.Account = Account;\n    this.Store = Account.Store;\n    this.SF = new _FDSSwarmFeeds.default(config.swarmGateway);\n  }\n  /**\n   * \n   * @param {any} storerAccount account\n   * @param {any} hash location \n   * @param {any} decryptProgressCallback callback\n   * @param {any} downloadProgressCallback callback\n   * @returns {any} decrypted file\n   */\n\n\n  retrieveFile(storerAccount, hash) {\n    var decryptProgressCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n    var downloadProgressCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console.log;\n    return this.Store.getDecryptedFile(hash, storerAccount.privateKey, decryptProgressCallback, downloadProgressCallback);\n  }\n  /**\n   * init stored files\n   * @param {any} storerAccount account\n   */\n\n\n  initStored(storerAccount) {\n    this.storeEncryptedValue('stored-1.0', '{\"storedFiles\":[]}', storerAccount, storerAccount.privateKey);\n  }\n  /**\n   * get stored values\n   * @param {any} query to retreive values, will be used later\n   * @param {any} storerAccount account \n   * @returns {any} array of hashes \n   */\n\n\n  getStored(query, storerAccount) {\n    return this.retrieveDecryptedValue('stored-1.0', storerAccount.address, storerAccount.privateKey, true).then(response => {\n      var files = JSON.parse(response.value);\n      var storedFiles = files.storedFiles;\n      var storedHashes = storedFiles.map(f => {\n        var h = new _Hash.default(f, storerAccount);\n        return h;\n      });\n      return {\n        files: storedHashes,\n        manifestAddress: response.address\n      };\n    }).catch(error => {\n      if (error.response && error.response.status === 404) {\n        return [];\n      } else {\n        throw new Error(error);\n      }\n    });\n  }\n\n  getStoredManifest(storerAccount) {\n    return this.retrieveDecryptedValue('stored-1.0', storerAccount.address, storerAccount.privateKey).then(response => {\n      return JSON.parse(response);\n    });\n  }\n\n  updateStoredMeta(hash, updateMeta, storerAccount) {\n    return this.getStoredManifest(storerAccount).then(manifest => {\n      for (var i = 0; i < manifest.storedFiles.length; i++) {\n        if (manifest.storedFiles[i].address === hash) {\n          var meta = void 0;\n\n          if (manifest.storedFiles[i].meta === undefined) {\n            meta = {};\n          } else {\n            meta = manifest.storedFiles[i].meta;\n          }\n\n          for (var k in updateMeta) {\n            meta[k] = updateMeta[k];\n          }\n\n          manifest.storedFiles[i].meta = meta;\n        }\n      }\n\n      return this.updateStoredManifest(manifest, storerAccount);\n    });\n  }\n\n  updateStoredManifest(manifest, storerAccount) {\n    return this.storeEncryptedValue('stored-1.0', JSON.stringify(manifest), storerAccount, storerAccount.privateKey, true);\n  }\n  /**\n   * Store file\n   * @param {any} storerAccount account \n   * @param {any} file file\n   * @param {any} encryptProgressCallback callback\n   * @param {any} uploadProgressCallback callback\n   * @param {any} progressMessageCallback callback\n   * @returns {any} hash encrypted value\n   */\n\n\n  storeFile(storerAccount, file, encryptProgressCallback, uploadProgressCallback, progressMessageCallback, metadata, showManifestAddresses, pin) {\n    return this.Store.storeEncryptedFile(file, storerAccount.privateKey, encryptProgressCallback, uploadProgressCallback, progressMessageCallback, true, metadata).then(hash => {\n      return this.getStored('all', storerAccount).then(response => {\n        var storedFiles = response.files;\n        var oldStoredManifestAddress = response.manifestAddress;\n        var isStored = false;\n\n        for (var i = 0; i < storedFiles.length; i++) {\n          if (storedFiles[i].address === hash.address) {\n            isStored = true;\n          }\n        }\n\n        if (isStored === false) {\n          storedFiles.push(hash.toJSON());\n          return this.storeEncryptedValue('stored-1.0', JSON.stringify({\n            storedFiles: storedFiles\n          }), storerAccount, storerAccount.privateKey, pin).then(storedManifestAddress => {\n            if (showManifestAddresses === true) {\n              return {\n                storedFile: hash,\n                storedManifestAddress: storedManifestAddress,\n                oldStoredManifestAddress: oldStoredManifestAddress\n              };\n            } else {\n              return hash;\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    });\n  } // contacts\n\n  /**\n   * Init contacts\n   * @param {any} storerAccount account\n   * @returns {any} result \n   */\n\n\n  initContacts(storerAccount) {\n    return this.storeEncryptedValue('contacts-1.0', '[]', storerAccount, storerAccount.privateKey);\n  }\n  /**\n   * Get contacts\n   * @param {any} storerAccount account\n   * @returns {any} contacts \n   */\n\n\n  getContacts(storerAccount) {\n    // debugger\n    return this.retrieveDecryptedValue('contacts-1.0', storerAccount.address, storerAccount.privateKey).then(contactsJSON => {\n      var contacts = JSON.parse(contactsJSON);\n      return contacts.map(c => new _Contact.default(c));\n    }).catch(error => {\n      if (error.response && error.response.status === 404) {\n        return [];\n      } else {\n        throw new Error(\"couldn't retrieve contacts: \".concat(error));\n      }\n    });\n  }\n  /**\n   * Store contact\n   * @param {any} storerAccount account \n   * @param {any} contact to store\n   * @returns {any} result\n   */\n\n\n  storeContact(storerAccount, contact) {\n    return this.getContacts(storerAccount).then(contacts => {\n      var flatContacts = contacts.map(c => c.toJSON());\n      flatContacts.push(contact.toJSON());\n      var contactsJSON = JSON.stringify(flatContacts);\n      return this.storeEncryptedValue('contacts-1.0', contactsJSON, storerAccount, storerAccount.privateKey);\n    });\n  } // values\n\n  /**\n   * Store value\n   * @param {string} key name\n   * @param {string} value to store\n   * @param {any} storerAccount account \n   * @returns {any} result\n   */\n\n\n  storeValue(key, value, storerAccount) {\n    var pin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    return this.SF.set(storerAccount.address, key, storerAccount.privateKey, value, pin);\n  }\n  /**\n   * Retrieve (get) value\n   * @param {any} key name \n   * @param {any} storerAccount account\n   * @returns {string} value\n   */\n\n\n  retrieveValue(key, storerAccount) {\n    return this.SF.get(storerAccount.address, key);\n  } // encrypted values\n\n  /**\n   * store encrypted value\n   * @param {string} key name\n   * @param {string} value to store\n   * @param {string} storerAccount account \n   * @param {string} password to use\n   * @returns {any} result \n   */\n\n\n  storeEncryptedValue(key, value, storerAccount, password) {\n    var pin = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n    var iv = _FDSCrypto.default.generateRandomIV();\n\n    return _FDSCrypto.default.encryptString(value, password, iv).then(encryptedString => {\n      var ivAndEncryptedString = '0x' + iv.toString('hex') + encryptedString;\n      return this.SF.set(storerAccount.address, key, storerAccount.privateKey, ivAndEncryptedString, pin);\n    });\n  }\n  /**\n   * retrieve decrypted value\n   * @param {string} key name \n   * @param {string} address to use\n   * @param {string} password to use\n   * @returns {string} decrypted value\n   */\n\n\n  retrieveDecryptedValue(key, address, password) {\n    var withAddress = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    if (withAddress === false) {\n      return this.SF.get(address, key, 'arraybuffer').then(encryptedBuffer => {\n        var ivAndEncryptedString = encryptedBuffer.toString('hex');\n        var encryptedString = ivAndEncryptedString.substring(32);\n        var iv = Buffer.from(ivAndEncryptedString.substring(0, 32), 'hex');\n        return _FDSCrypto.default.decryptString(encryptedString, password, iv);\n      });\n    } else if (withAddress === true) {\n      return this.SF.get(address, key, 'arraybuffer', true).then(response => {\n        var encryptedBuffer = response.value;\n        var ivAndEncryptedString = encryptedBuffer.toString('hex');\n        var encryptedString = ivAndEncryptedString.substring(32);\n        var iv = Buffer.from(ivAndEncryptedString.substring(0, 32), 'hex');\n\n        var val = _FDSCrypto.default.decryptString(encryptedString, password, iv);\n\n        return {\n          value: val,\n          address: response.address\n        };\n      });\n    }\n  }\n  /**\n   * retrieve decrypted value\n   * @param {string} key name \n   * @param {string} address to use\n   * @param {string} password to use\n   * @returns {string} decrypted value\n   */\n\n\n  retrieveUnencryptedValue(key, address) {\n    return this.SF.get(address, key, 'arraybuffer').then(t => {\n      var ivAndEncryptedString = (0, _web3Utils.bytesToHex)(encryptedBuffer);\n      var iv = ivAndEncryptedString.substring(0, 34);\n      var encryptedString = ivAndEncryptedString.substring(34);\n      return _FDSCrypto.default.decryptString(encryptedString, password, iv);\n    });\n  }\n\n}\n\nvar _default = SwarmStore;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _axios = require(\"axios\");\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\n// interaction with the faucet server\n// if (typeof XMLHttpRequest === \"undefined\" || XMLHttpRequest === null) {\n//   let _XMLHttpRequest = require('xmlhttprequest').XMLHttpRequest;\n//   XMLHttpRequest = require(\"xmlhttprequest\").XMLHttpRequest;\n// }\nclass Faucet {\n  constructor(url) {\n    this.url = url;\n  }\n  /**\n   * Fund address through faucet\n   * @param {string} address to fund\n   * @returns {Promise} result\n   */\n\n\n  gimmie(address) {\n    return (0, _axios.request)({\n      responseType: 'json',\n      url: this.url,\n      method: 'POST',\n      headers: {\n        'Accept': 'application/x-www-form-urlencoded'\n      },\n      data: 'address=' + address\n    }).then(response => {\n      return response.data.transaction;\n    });\n  }\n\n}\n\nvar _default = Faucet;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _web3Utils = require(\"web3-utils\");\n\n// Copyright 2019 The FairDataSociety Authors\n// This file is part of the FairDataSociety library.\n//\n// The FairDataSociety library is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Lesser General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// The FairDataSociety library is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU Lesser General Public License for more details.\n//\n// You should have received a copy of the GNU Lesser General Public License\n// along with the FairDataSociety library. If not, see <http://www.gnu.org/licenses/>.\nvar Trace = require('./FDS-Trace');\n\nclass FDSContract {\n  // later we dynamically create methods\n  constructor(config) {\n    var account = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var abi = arguments.length > 2 ? arguments[2] : undefined;\n    var bytecode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"0x\";\n    this.account = account;\n    this.config = config;\n    this.abi = abi;\n    this.bytecode = bytecode;\n    this.web3 = this.config.web3;\n    this.gasPrice = (0, _web3Utils.toWei)(config.gasPrice.toString(), 'gwei');\n    this.contractAddress = null;\n  }\n\n  at(contractAddress) {\n    var _this = this;\n\n    this.contractAddress = contractAddress;\n    this.web3Instance = new this.web3.eth.Contract(this.abi, this.contractAddress);\n\n    for (var i = 0; i < this.abi.length; i++) {\n      if (this.abi[i]['type'] === 'function' && this.abi[i]['stateMutability'] === 'view') {\n        (function () {\n          var name = _this.abi[i]['name'];\n\n          _this[name] = function () {\n            return this.call(name, [...arguments]);\n          };\n        })();\n      } else if (this.abi[i]['type'] === 'function' && (this.abi[i]['stateMutability'] === 'payable' || this.abi[i]['stateMutability'] === 'nonpayable')) {\n        (function () {\n          var name = _this.abi[i]['name'];\n\n          _this[name] = function () {\n            return this.send(name, [...arguments], true);\n          };\n        })();\n      }\n    }\n\n    return this;\n  }\n\n  deploy() {\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var gas = arguments.length > 1 ? arguments[1] : undefined;\n    Trace.time('deployTransaction//Contract');\n    return new Promise((resolve, reject) => {\n      var contract = new this.web3.eth.Contract(this.abi);\n      var deployData = {\n        data: this.bytecode\n      };\n\n      if (args !== []) {\n        deployData.arguments = args;\n      }\n\n      var dataTx = contract.deploy(deployData).encodeABI();\n      var privateKey = this.account.privateKey;\n      var tx = {\n        from: this.account.address,\n        data: dataTx,\n        gas: gas,\n        gasPrice: this.gasPrice,\n        nonce: this.account.nonce\n      };\n      this.account.nonce += 1;\n      return this.web3.eth.accounts.signTransaction(tx, privateKey).then(signed => {\n        return this.web3.eth.sendSignedTransaction(signed.rawTransaction).once('confirmation', (i, receipt) => {\n          Trace.timeEnd('deployTransaction//Contract');\n          this.transactionReceipt = receipt;\n          resolve(this.at(receipt.contractAddress));\n        });\n      });\n    });\n  }\n\n  send(method) {\n    var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var confirm = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var gas = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 15000000;\n    var value = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    Trace.time('sendTransaction//Contract');\n    return new Promise((resolve, reject) => {\n      if (this.contractAddress === null || this.contractAddress === '0x0') {\n        throw new Error('you must use \".at\" or \".deploy\" first');\n      }\n\n      var web3Instance = new this.web3.eth.Contract(this.abi, this.contractAddress);\n      var dataTx = web3Instance.methods[method](...args).encodeABI();\n      var privateKey = this.account.privateKey;\n      var tx = {\n        from: this.account.address,\n        to: this.contractAddress,\n        data: dataTx,\n        gas: gas,\n        gasPrice: this.gasPrice,\n        nonce: this.account.nonce,\n        value: value\n      };\n      this.account.nonce += 1;\n      return this.web3.eth.accounts.signTransaction(tx, privateKey).then(signed => {\n        return this.web3.eth.sendSignedTransaction(signed.rawTransaction).once('transactionHash', function (hash) {\n          if (confirm === false) {\n            Trace.log('sendTransaction//Contract', method, confirm);\n            Trace.timeEnd('sendTransaction//Contract');\n            resolve(hash);\n          }\n        }).once('confirmation', function (i, hash) {\n          if (confirm === true) {\n            Trace.log('sendTransaction//Contract', method, confirm);\n            Trace.timeEnd('sendTransaction//Contract');\n            resolve(hash);\n          }\n        });\n      });\n    });\n  }\n\n  call(method) {\n    var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    Trace.time('call//Contract');\n\n    if (this.contractAddress === null || this.contractAddress === '0x0') {\n      throw new Error('you must use \".at\" or \".deploy\" first');\n    }\n\n    var web3Instance = new this.web3.eth.Contract(this.abi, this.contractAddress);\n    var address = this.account === undefined ? '0x' : this.account.address;\n    var response = web3Instance.methods[method](...args).call({\n      from: address\n    });\n    Trace.log('call//Contract', method);\n    Trace.timeEnd('call//Contract');\n    return response;\n  }\n\n  getPastEvents() {\n    var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"allEvents\";\n    var options = arguments.length > 1 ? arguments[1] : undefined;\n    return new this.web3.eth.Contract(this.abi, this.contractAddress).getPastEvents(event, options);\n  }\n\n}\n\nvar _default = FDSContract;\nexports.default = _default;\nmodule.exports = exports.default;"],"sourceRoot":""}